<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Algorithm/图论/内向基环树">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">内向基环树 | Doongz&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doongz.github.io/docs/Algorithm/图论/内向基环树"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="内向基环树 | Doongz&#x27;s Site"><meta data-rh="true" name="description" content="来源1：内向基环树：拓扑排序 + 分类讨论（Python/Java/C++/Go） - 参加会议的最多员工数 - 力扣（LeetCode）"><meta data-rh="true" property="og:description" content="来源1：内向基环树：拓扑排序 + 分类讨论（Python/Java/C++/Go） - 参加会议的最多员工数 - 力扣（LeetCode）"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doongz.github.io/docs/Algorithm/图论/内向基环树"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Algorithm/图论/内向基环树" hreflang="en"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Algorithm/图论/内向基环树" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Doongz&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Doongz&#39;s Site Atom Feed">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bbae31c2.css">
<link rel="preload" href="/assets/js/runtime~main.958a4673.js" as="script">
<link rel="preload" href="/assets/js/main.715bfe53.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home page</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/catalogue-algo">Algorithm</a><a class="navbar__item navbar__link" href="/docs/catalogue-skill">Skill</a><a class="navbar__item navbar__link" href="/docs/catalogue-knowledge">Knowledge</a><a class="navbar__item navbar__link" href="/community/support">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Courses</a><ul class="dropdown__menu"><li><a href="https://github.com/doongz/mlc-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Machine Learning Compilation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs229" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stanford CS229: Machine Learning<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/aics" target="_blank" rel="noopener noreferrer" class="dropdown__link">中国科学院 智能计算系统<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs50-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Harvard CS50’s Introduction to AI with Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.824" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.824 Distributed Systems<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/os-workbench" target="_blank" rel="noopener noreferrer" class="dropdown__link">南京大学 操作系统：设计与实现<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.s081" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.S081 Operating Systems Engineering<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/doongz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/catalogue-algo">Catalogue</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/前述/面试时做题技巧">前述</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/数据结构/基本概念">数据结构</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/算法基础/排序">算法基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/动态规划/基础">动态规划</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Algorithm/图论/理论基础">图论</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/理论基础">理论基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/图的存储">图的存储</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/DFS">DFS 深度优先搜索</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/BFS">BFS 广度优先搜索</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/拓扑排序">拓扑排序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/最短路径">最短路径</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/欧拉图">欧拉图</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/A*算法">A* 算法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Algorithm/图论/二分图">二分图</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Algorithm/图论/内向基环树">内向基环树</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Algorithm/图论/例题-BFS/&lt;双向bfs&gt;-单词接龙">例题-BFS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Algorithm/图论/例题-DFS/&lt;回溯-模版题&gt;-电话号码组合">例题-DFS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Algorithm/图论/例题-图相关的题/&lt;分类&gt;-添加边使所有节点度数都为偶数">例题-图相关的题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Algorithm/图论/例题-拓扑排序/&lt;拓扑排序-有向无环图&gt;-课程表">例题-拓扑排序</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Algorithm/图论/例题-最短路径/&lt;重点题-各类最短路径算法&gt;-网络延迟时间">例题-最短路径</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Algorithm/图论/例题-欧拉图/&lt;欧拉通路&gt;-重新安排行程">例题-欧拉图</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/数学/数学运算/num和arr互转">数学</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/系列题目/括号问题/">系列题目</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">图论</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">内向基环树</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>内向基环树</h1><p>来源1：<a href="https://leetcode.cn/problems/maximum-employees-to-be-invited-to-a-meeting/solution/nei-xiang-ji-huan-shu-tuo-bu-pai-xu-fen-c1i1b/" target="_blank" rel="noopener noreferrer">内向基环树：拓扑排序 + 分类讨论（Python/Java/C++/Go） - 参加会议的最多员工数 - 力扣（LeetCode）</a></p><p>来源2：<a href="https://leetcode.cn/problems/find-closest-node-to-given-two-nodes/solution/ji-suan-dao-mei-ge-dian-de-ju-chi-python-gr2u/" target="_blank" rel="noopener noreferrer">计算到每个点的距离（Python/Java/C++/Go） - 找到离给定两个节点最近的节点 - 力扣（LeetCode）</a></p><p>来源3：<a href="https://leetcode.cn/problems/longest-cycle-in-a-graph/solution/nei-xiang-ji-huan-shu-zhao-huan-li-yong-pmqmr/" target="_blank" rel="noopener noreferrer">内向基环树找环 + 利用时间戳简单实现（Python/Java/C++/Go） - 图中的最长环 - 力扣（LeetCode）</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="概述">概述<a class="hash-link" href="#概述" title="Direct link to heading">​</a></h2><p>从 <code>i</code> 向 <code>arr[i]</code> 连边，我们可以得到一张有向图。由于每个大小为 <code>k</code> 的连通块都有 <code>k</code> 个点和 <code>k</code> 条边，所以每个连通块必定有且仅有一个环，且由于每个点的出度均为 <code>1</code>，这样的有向图又叫做内向<strong>基环树 (pseudotree)</strong>，由基环树组成的森林叫<strong>基环树森林 (pseudoforest)</strong>。</p><p>每一个内向基环树（连通块）都由一个<strong>基环</strong>和其余指向基环的<strong>树枝</strong>组成。</p><p><strong>基环树/森林特点</strong>：</p><ul><li>每个大小为 <code>k</code> 的连通块都有 <code>k</code> 个点和 <code>k</code> 条边</li><li>每个连通块必定有且仅有一个环</li><li>每个点的出度均为 <code>1</code></li><li>注意：数组 edges 是个基环森林</li></ul><p><strong>经典描述</strong></p><p>给你一个 n 个节点的 有向图 ，节点编号为 0 到 n - 1 ，每个节点 至多 有一条出边。如 <code>edges = [3,3,4,2,3]</code></p><p>有向图用大小为 n 下标从 0 开始的数组 edges 表示，表示节点 i 有一条有向边指向 edges<!-- -->[i]<!-- --> 。如果节点 i 没有出边，那么 edges<!-- -->[i]<!-- --> == -1 。</p><p>注意 <code>edges</code> 可能包含环。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="通用处理方法">通用处理方法<a class="hash-link" href="#通用处理方法" title="Direct link to heading">​</a></h3><p>下面介绍基环树问题的通用处理方法。</p><ol><li>生成入度表</li><li>我们可以通过一次拓扑排序「剪掉」所有树枝，<strong>因为拓扑排序后，树枝节点的入度均为 0，基环节点的入度均为 1</strong>。这样就可以将基环和树枝分开，从而简化后续处理流程：</li><li>遍历内向基环树<ul><li>如果要遍历基环，可以<strong>从拓扑排序后入度为 1 的节点出发</strong>，在图上搜索；</li><li>如果要遍历树枝，可以<strong>以基环与树枝的连接处为起点，顺着反图来搜索树枝</strong>（搜索入度为 0 的节点），从而将问题转化成一个树形问题。</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="例题1图中的最长环求基环的大小">例题1：图中的最长环（求基环的大小）<a class="hash-link" href="#例题1图中的最长环求基环的大小" title="Direct link to heading">​</a></h2><p>题目：<a href="https://leetcode.cn/problems/longest-cycle-in-a-graph/" target="_blank" rel="noopener noreferrer">2360. 图中的最长环</a></p><p>给你一个 n 个节点的 <strong>有向图</strong> ，节点编号为 0 到 n - 1 ，其中每个节点 <strong>至多</strong> 有一条出边。</p><p>图用一个大小为 n 下标从 0 开始的数组 edges 表示，节点 i 到节点 edges<!-- -->[i]<!-- --> 之间有一条有向边。如果节点 i 没有出边，那么 edges<!-- -->[i]<!-- --> == -1 。</p><p>请你返回图中的 <strong>最长</strong> 环，如果没有任何环，请返回 -1 。</p><p>一个环指的是起点和终点是 同一个 节点的路径。</p><p>示例 1：</p><p><img loading="lazy" alt="img" src="/assets/images/graph4drawio-5-c4a9540322ffa9b795fd5c99881c2992.png" width="335" height="191" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">输入：edges = [3,3,4,2,3]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出去：3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">解释：图中的最长环是：2 -&gt; 4 -&gt; 3 -&gt; 2 。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">这个环的长度为 3 ，所以返回 3 。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>示例 2：</p><p><img loading="lazy" alt="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKsAAAChCAYAAAC4c09/AAAAAXNSR0IArs4c6QAABL50RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJhcHAuZGlhZ3JhbXMubmV0JTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIyLTA2LTA3VDIzJTNBMTAlM0EzNy43OTZaJTIyJTIwYWdlbnQlM0QlMjI1LjAlMjAoV2luZG93cyUyME5UJTIwMTAuMCUzQiUyMFdpbjY0JTNCJTIweDY0KSUyMEFwcGxlV2ViS2l0JTJGNTM3LjM2JTIwKEtIVE1MJTJDJTIwbGlrZSUyMEdlY2tvKSUyMENocm9tZSUyRjEwMi4wLjUwMDUuNjMlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjBldGFnJTNEJTIyUF94aEtZeGNmSDNvQXNPQVA4ZHIlMjIlMjB2ZXJzaW9uJTNEJTIyMTguMC4yJTIyJTIwdHlwZSUzRCUyMmRldmljZSUyMiUzRSUzQ2RpYWdyYW0lMjBpZCUzRCUyMm5WeHl1d2g2U1F2bkc4dDdaWE1UJTIyJTIwbmFtZSUzRCUyMlBhZ2UtMSUyMiUzRTdWZkJqcHN3RlB3YWppc0ZPeUhaWThodTAwdXFWWFBvMllzZHNHUXdhMHdnJTJCJTJGVjl4QWFDczl0U1ZVcEUxUlAyJTJCUG5aYjJZTXhzT2J0TjRxa2ljN1NabncwSXpXSG43eUVQSm5lQVdQQmprWlpMRjhORUNzT0xWQlBiRG43NnlkYWRHU1UxWU1BcldVUXZOOENFWXl5MWlrQnhoUlNsYkRzSU1VdzFWekVyTXJZQjhSY1kzJTJCNEZRbkJsMmhaWTklMkZaVHhPMnBYOXdOYVhramJZVmxJa2hNcnFBc0xQSHQ0b0tiVnBwZldHaVlhOGxoY3o3OHNubzkzR0ZNdjBtQW5iYnloZGwlMkZIdWpYNVAxeXJjdmdjdnV3ZmZwamtTVWRxS1BSUUlTQmdXT2NtYWJldVQ1U0o0SzV1OWhnZVo2WWZpck5RYUF0QXFCN1hEZmh4YXNYMmVFNzIyZ044aXNNbFhOd293czJJTG84SGlDSW9CemFFVFZnblhiSiUyQlRxQm1wd0hhQUpUb1YwUE9oU1lyY0dPSEFhMGE3VkVlbU5LcyUyRjVjN3ZG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" width="171" height="161" class="img_ev3q"></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">输入：edges = [2,-1,3,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出：-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">解释：图中没有任何环。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1拓扑排序法">1、拓扑排序法<a class="hash-link" href="#1拓扑排序法" title="Direct link to heading">​</a></h3><p>时间复杂度：O(n)</p><p>空间复杂度：O(n)</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Solution</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">longestCycle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">indegree</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 1. 生成入度表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 2. 拓扑排序（为了重新计算入度表）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        queue</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> cur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">front</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">pop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// cur 只有一条出边</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">--</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 3. 遍历所有的点，拓扑排序后入度大于 0 的点为基环上的点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 注意：可能是个森林存在多个连通分量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> max_ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> cur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> cur </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> cur</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 取基环上的一个点，作为起点，标记用过；</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 基环的大小</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 将基环上的点的入度标记为 -1，避免重复访问</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ring_size</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            max_ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_ring_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ring_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> max_ring_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2时间戳法">2、时间戳法<a class="hash-link" href="#2时间戳法" title="Direct link to heading">​</a></h3><p>除了使用那篇题解中的通用做法（拓扑排序）外，我们还可以利用时间戳来实现找环的逻辑。</p><p>具体来说，初始时间戳 clock=1，首次访问一个点 x 时，记录访问这个点的时间 time<!-- -->[x]<!-- -->=clock，然后将 clock 加一。</p><p>如果首次访问一个点，则记录当前时间 startTime=clock，并尝试从这个点出发，看能否找到环。如果找到了一个之前访问过的点 x，且之前访问 x 的时间不早于 startTime，则说明我们找到了一个新的环，此时的环长就是前后两次访问 x 的时间差，即 clock−time<!-- -->[x]<!-- -->。</p><p>取所有环长的最大值作为答案。若没有找到环，则返回 −1。</p><p>复杂度分析</p><ul><li>时间复杂度：O(n)，其中 n 为 edges 的长度。</li><li>空间复杂度：O(n)。</li></ul><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Solution</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">longestCycle</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">edges</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        clock</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> x</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> t </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">time</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> t</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">continue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            start_time </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> clock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 重复访问</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> start_time</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 找到了一个新的环</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ans</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> clock </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                time</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> clock</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                clock </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                x </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">x</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3返回最长环上的所有节点">3、返回最长环上的所有节点<a class="hash-link" href="#3返回最长环上的所有节点" title="Direct link to heading">​</a></h3><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">            vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push_back</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 记录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ring_size</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="例题2求基环的大小变形题">例题2：求基环的大小变形题<a class="hash-link" href="#例题2求基环的大小变形题" title="Direct link to heading">​</a></h2><p>题目：<a href="https://leetcode.cn/problems/maximum-employees-to-be-invited-to-a-meeting/" target="_blank" rel="noopener noreferrer">2127. 参加会议的最多员工数</a></p><p>一个公司准备组织一场会议，邀请名单上有 n 位员工。公司准备了一张 <strong>圆形</strong> 的桌子，可以坐下 <strong>任意数目</strong> 的员工。</p><p>员工编号为 0 到 n - 1 。每位员工都有一位 <strong>喜欢</strong> 的员工，每位员工 <strong>当且仅当</strong> 他被安排在喜欢员工的旁边，他才会参加会议。每位员工喜欢的员工 <strong>不会</strong> 是他自己。</p><p>给你一个下标从 <strong>0</strong> 开始的整数数组 favorite ，其中 favorite<!-- -->[i]<!-- --> 表示第 i 位员工喜欢的员工。请你返回参加会议的 <strong>最多员工数目</strong> 。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">示例 1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输入：favorite = [2,2,1,2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出：3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">解释：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">上图展示了公司邀请员工 0，1 和 2 参加会议以及他们在圆桌上的座位。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">没办法邀请所有员工参与会议，因为员工 2 没办法同时坐在 0，1 和 3 员工的旁边。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">注意，公司也可以邀请员工 1，2 和 3 参加会议。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">所以最多参加会议的员工数目为 3 。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">示例 2：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输入：favorite = [1,2,0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出：3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">解释：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">每个员工都至少是另一个员工喜欢的员工。所以公司邀请他们所有人参加会议的前提是所有人都参加了会议。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">座位安排同图 1 所示：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 员工 0 坐在员工 2 和 1 之间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 员工 1 坐在员工 0 和 2 之间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 员工 2 坐在员工 1 和 0 之间。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">参与会议的最多员工数目为 3 。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">示例 3：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输入：favorite = [3,0,1,4,1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">输出：4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">解释：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">上图展示了公司可以邀请员工 0，1，3 和 4 参加会议以及他们在圆桌上的座位。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">员工 2 无法参加，因为他喜欢的员工 0 旁边的座位已经被占领了。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">所以公司只能不邀请员工 2 。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">参加会议的最多员工数目为 4 。</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>分析</strong>：</p><p>例如示例 <!-- -->[3,0,1,4,1]<!-- --> 可以得到如下内向基环树，其基环由节点 0、1、3 和 4 组成，节点 2 为其树枝：</p><p><img loading="lazy" alt="1.png" src="/assets/images/1641096462-IsWZUX-1-1ea6c54a0cc51bc731af52a05897a2b3.png" width="358" height="381" class="img_ev3q"></p><p>特别地，我们得到的基环可能只包含两个节点。例如示例 <!-- -->[2,2,1,2]<!-- --> 可以得到如下内向基环树，其基环只包含节点 1 和 2，而节点 0 和 3 组成其树枝：</p><p><img loading="lazy" alt="2.png" src="data:image/png;base64,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" width="314" height="210" class="img_ev3q"></p><p>对于本题来说，<strong>这两类基环树在组成圆桌时会有明显区别</strong>，下文会说明这一点。</p><p><strong>基环大小大于 2</strong></p><p>先来看看基环大小大于 2 的情况，显然基环上的节点组成了一个环，因而可以组成一个圆桌；而树枝上的点，若插入圆桌上 v→w 这两人中间，会导致节点 v 无法和其喜欢的员工坐在一起，因此<strong>树枝上的点是无法插入圆桌的</strong>；</p><p>此外，<strong>树枝上的点也不能单独组成圆桌</strong>，因为这样会存在一个出度为 0 的节点，其无法和其喜欢的员工坐在一起。对于其余内向基环树（连通块）上的节点，和树枝同理，也无法插入该基环组成的圆桌。</p><p>因此，对于基环大小大于 2 的情况，圆桌的最大员工数目即为最大的基环大小，记作 <code>maxRingSize</code></p><p><strong>基环大小等于 2</strong></p><p>下面来分析基环大小等于 2 的情况。</p><p>以如下基环树为例，0 和 1 组成基环，其余节点组成树枝：</p><p><img loading="lazy" alt="3.png" src="/assets/images/1641096473-JtGBgY-3-78d697f9b1c2ebcaba3cdb7c752c8820.png" width="513" height="509" class="img_ev3q"></p><ul><li>我们可以先让 0 和 1 坐在圆桌旁（假设 0 坐在 1 左侧），那么 0 这一侧的树枝只能坐在 0 的左侧，而 1 这一侧的树枝只能坐在 1 的右侧。</li><li>2 可以紧靠着坐在 0 的左侧，而 3 和 4 只能选一个坐在 2 的左侧（如果 4 紧靠着坐在 2 的左侧，那么 3 是无法紧靠着坐在 4 的左侧的，反之亦然）。</li></ul><p>这意味着从 0 出发倒着找树枝上的点（即<strong>沿着反图上的边</strong>），每个点只能在其反图上选择其中一个子节点，因此 0 这一侧的节点必须组成一条链，那么我们可以<strong>找最长的那条链</strong>，即上图加粗的节点。</p><p>对于 1 这一侧也同理，沿着反图上的边招最长的路径。将这两条最长链拼起来即为该基环树能组成的圆桌的最大员工数。</p><p>对于多个基环大小等于 2 的基环树，<strong>每个基环树所对应的链，都可以拼在其余链的末尾</strong>，因此我们可以将这些链全部拼成一个圆桌，其大小记作 <code>sumChainSize</code>。</p><p>答案即为 <code>max(maxRingSize, sumChainSize)</code></p><p>对于本题，我们可以遍历所有基环，并按基环大小分类计算：</p><ul><li>对于大小大于 2 的基环，我们取基环大小的最大值；</li><li>对于大小等于 2 的基环，我们可以从基环上的点出发，在反图上找到最大的树枝节点深度。</li></ul><p>复杂度分析</p><ul><li>时间复杂度：O(n)</li><li>空间复杂度：O(n)</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Solution</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">maximumInvitations</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rg</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// g 的反图</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">indegree</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// g 上每个节点的入读</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 1. 生成入度表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> v</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// v 喜欢 w, v-&gt;w</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            rg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push_back</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 2. 拓扑排序，剪掉 g 上的所有树枝</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        queue</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> cur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">front</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">pop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> next </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// cur 只有一条出边</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">--</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">next</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 通过反图 rg 寻找树枝上最深的链</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        function</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> rdfs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> depth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> rg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 树枝上的点在拓扑排序后，入度均为 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    depth </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">depth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rdfs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> depth</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 3. 遍历所有的点，拓扑排序后入度大于 0 的点为基环上的点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 注意：可能是个森林存在多个连通分量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> max_ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> sum_chain_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 【重点算法】求基环的大小</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// 取基环上的一个点，作为起点，标记用过；</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 基环的大小</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                indegree</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 将基环上的点的入度标记为 -1，避免重复访问</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ring_size</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ring_size </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 基环的大小为2，累加两条最长链的长度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sum_chain_size </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rdfs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rdfs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">                                            </span><span class="token comment" style="color:#999988;font-style:italic">// 基环的大小大于2，取所有基环的最大值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max_ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_ring_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ring_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 取所有基环的最大值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_ring_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sum_chain_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>可以在拓扑排序的同时计算出最长链的长度，这样就不需要建反图和在反图上找最长链了，从而节省不少时间、空间和代码量：</p><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Solution</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">maximumInvitations</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// favorite 就是内向基环森林 g</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> deg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deg</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// g 上每个节点的入度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">deg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> max_depth</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">memset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_depth</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_depth</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        queue</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">empty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 拓扑排序，剪掉 g 上的所有树枝</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">front</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">pop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">max_depth</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// v 只有一条出边</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            max_depth</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_depth</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> max_depth</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">--</span><span class="token plain">deg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> q</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">emplace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> max_ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sum_chain_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">deg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">continue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 遍历基环上的点（拓扑排序后入度大于 0）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            deg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                deg</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">v</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 将基环上的点的入度标记为 0，避免重复访问</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token operator" style="color:#393A34">++</span><span class="token plain">ring_size</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ring_size </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sum_chain_size </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> max_depth</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> max_depth</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 基环大小为 2，累加两条最长链的长度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max_ring_size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_ring_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ring_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 取所有基环的最大值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">max_ring_size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sum_chain_size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="例题3求一个点到基环树上任意点的距离">例题3：求一个点到基环树上任意点的距离<a class="hash-link" href="#例题3求一个点到基环树上任意点的距离" title="Direct link to heading">​</a></h2><p>题目：<a href="https://leetcode.cn/problems/find-closest-node-to-given-two-nodes/" target="_blank" rel="noopener noreferrer">2359. 找到离给定两个节点最近的节点</a></p><p>给你一个 n 个节点的 <strong>有向图</strong> ，节点编号为 0 到 n - 1 ，每个节点 <strong>至多</strong> 有一条出边。</p><p>有向图用大小为 n 下标从 <strong>0</strong> 开始的数组 edges 表示，表示节点 i 有一条有向边指向 edges<!-- -->[i]<!-- --> 。如果节点 i 没有出边，那么 edges<!-- -->[i]<!-- --> == -1 。</p><p>同时给你两个节点 node1 和 node2 。</p><p>请你返回一个从 node1 和 node2 都能到达节点的编号，使节点 node1 和节点 node2 到这个节点的距离 <strong>较大值最小化</strong>。如果有多个答案，请返回 <strong>最小</strong> 的节点编号。如果答案不存在，返回 -1 。</p><p>注意 edges 可能包含环。</p><p>示例 1：</p><p><img loading="lazy" alt="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUEAAAChCAYAAABZPQ0HAAAAAXNSR0IArs4c6QAABKx0RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJhcHAuZGlhZ3JhbXMubmV0JTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIyLTA2LTA3VDIzJTNBNTglM0EzMy40NThaJTIyJTIwYWdlbnQlM0QlMjI1LjAlMjAoV2luZG93cyUyME5UJTIwMTAuMCUzQiUyMFdpbjY0JTNCJTIweDY0KSUyMEFwcGxlV2ViS2l0JTJGNTM3LjM2JTIwKEtIVE1MJTJDJTIwbGlrZSUyMEdlY2tvKSUyMENocm9tZSUyRjEwMi4wLjUwMDUuNjMlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjBldGFnJTNEJTIyRHlqbzBKazh4QjhyUVllb0xVZGclMjIlMjB2ZXJzaW9uJTNEJTIyMTkuMC4yJTIyJTIwdHlwZSUzRCUyMmRldmljZSUyMiUzRSUzQ2RpYWdyYW0lMjBpZCUzRCUyMm5WeHl1d2g2U1F2bkc4dDdaWE1UJTIyJTIwbmFtZSUzRCUyMlBhZ2UtMSUyMiUzRTdWZkJjcHN3RVAwYWpwa3hFZ2I3R0R0dWUwZzc3WGlhbm1Va1FET0FpQkFHOSUyQnU3V0FJc1NCcTNCOGVleVFucHNWcHAzOXNuQmdldnMlMkJhekpFWHlWVkNXT21oR0d3YyUyRk9BaTVNN3lBUjRzY05ESVBsaHFJSmFjbWFBQzIlMkZEZnJWaHEwNHBTVlZxQVNJbFc4c01GUTVEa0xsWVVSS1VWdGgwVWl0WGN0U013bXdEWWs2UlQ5eGFsS05McEF3WUIlMkZZVHhPdXAxZDM5U1hrUzdZVkZJbWhJcjZCTUliQjYlMkJsRUVxUHNtYk4wcGE4amhlOTd0TXJiJTJGdURTWmFyY3haOGUxS2JIWThFeVg2NlA1TEhNRXFlMW5jbXk1NmtsU25ZUVg0SyUyQlZabFFmTDIxT3BncVBDZnElMkZhb3Ewams2cTQ4Q25VUEFXaFJnTmlyNFQyTVl2TThKdHAxd0t4RDRJeTdjUlJnZXNjT1J0Ym1DR29CeVdHeXFoT3UyTFlnWWZ1bWhxNERMRkZaQ2pNWGhxUXNkQjlFdkdHMFQ3Vm5VckhtVmVy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" width="321" height="161" class="img_ev3q"></p><blockquote><p>输入：edges = <!-- -->[2,2,3,-1]<!-- -->, node1 = 0, node2 = 1
输出：2
解释：从节点 0 到节点 2 的距离为 1 ，从节点 1 到节点 2 的距离为 1 。
两个距离的较大值为 1 。我们无法得到一个比 1 更小的较大值，所以我们返回节点 2 。</p></blockquote><p>示例 2：</p><p><img loading="lazy" alt="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMMAAAChCAYAAAB6Qwv7AAAAAXNSR0IArs4c6QAABKp0RVh0bXhmaWxlACUzQ214ZmlsZSUyMGhvc3QlM0QlMjJhcHAuZGlhZ3JhbXMubmV0JTIyJTIwbW9kaWZpZWQlM0QlMjIyMDIyLTA2LTA4VDAwJTNBMDclM0EyMi45MzJaJTIyJTIwYWdlbnQlM0QlMjI1LjAlMjAoV2luZG93cyUyME5UJTIwMTAuMCUzQiUyMFdpbjY0JTNCJTIweDY0KSUyMEFwcGxlV2ViS2l0JTJGNTM3LjM2JTIwKEtIVE1MJTJDJTIwbGlrZSUyMEdlY2tvKSUyMENocm9tZSUyRjEwMi4wLjUwMDUuNjMlMjBTYWZhcmklMkY1MzcuMzYlMjIlMjBldGFnJTNEJTIyWkRjZDl2aW5rSldwaVo1SnZxdFclMjIlMjB2ZXJzaW9uJTNEJTIyMTkuMC4yJTIyJTIwdHlwZSUzRCUyMmRldmljZSUyMiUzRSUzQ2RpYWdyYW0lMjBpZCUzRCUyMm5WeHl1d2g2U1F2bkc4dDdaWE1UJTIyJTIwbmFtZSUzRCUyMlBhZ2UtMSUyMiUzRTFWWmRjNk1nRlAwMVBuWW1valhKWTVObXV3JTJGYlRqdVo3VDRUUVdVR3hVV01abiUyRjlYZ09vbUhhYm5YYjY4U1FjTGhmdU9RZlFDOVo1ZXlOeG1kMEtRcm1IWnFUMWdtc1BJWDhXTE9EVElRZU5YTTZYR2tnbEl5Wm9BTGJzRDdVekRWb3pRaXNuVUFuQkZTdGRNQlpGUVdQbFlGaEswYmhoaWVEdXFpVk82UW13alRFJTJGUlg4eG9qS05MdEI4d0w5VGxtWjJaVDh5OWVYWUJwdEtxZ3dUMFl5Z1lPTUZheW1FMHEyOFhWUGVrV2Q1MGZPJTJCUFRQYWIwelNRcDB6NGU1UmJYWXNFVGolMkY2VDlrUCUyQklrZTF4ZkdIWDJtTmVtWUE5RkhQS3RxaElYM2E3VndWQVIlMkZhNjdyYTRTVWFpTDZpalVGUVNnUlFsaXI0WnhhS1htZTB5MHM4RE1JckRIM1RRS01MMmloWkd6T0lKYVFITG9ySnFNS2JvdGNkeU5OT0E2d0RLVmMlMkJqNTBNUlZxWDJRc0phU1B0V1lKMFBkbmtwRjJ4Rmtl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" width="195" height="161" class="img_ev3q"></p><blockquote><p>输入：edges = <!-- -->[1,2,-1]<!-- -->, node1 = 0, node2 = 2
输出：2
解释：节点 0 到节点 2 的距离为 2 ，节点 2 到它自己的距离为 0 。
两个距离的较大值为 2 。我们无法得到一个比 2 更小的较大值，所以我们返回节点 2 。</p></blockquote><p>提示：</p><ul><li>n == edges.length</li><li>2 &lt;= n &lt;= 105</li><li>-1 &lt;= edges<!-- -->[i]<!-- --> &lt; n</li><li>edges<!-- -->[i]<!-- --> != i</li><li>0 &lt;= node1, node2 &lt; n</li></ul><hr><p>复杂度分析</p><ul><li>时间复杂度：O(n)</li><li>空间复杂度：O(n)</li></ul><div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">Solution</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 【重点】求一个点到基环树上任意点的距离</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calc_dis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> INT_MAX</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> d </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 距离</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">while</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cur </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> dis</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> INT_MAX</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 当前点可到达，且没来过（因为有环）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            dis</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            d</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cur </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> dis</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">closestMeetingNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> node1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> node2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> n </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> min_dis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> INT_MAX</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> dis1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calc_dis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">int</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> dis2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">calc_dis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> edges</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> n</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> d </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dis1</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dis2</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> min_dis</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                min_dis </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> d</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                ans </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ans</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Algorithm/图论/二分图"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">二分图</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Algorithm/图论/例题-BFS/&lt;双向bfs&gt;-单词接龙"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">&lt;双向bfs&gt;-单词接龙</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#概述" class="table-of-contents__link toc-highlight">概述</a><ul><li><a href="#通用处理方法" class="table-of-contents__link toc-highlight">通用处理方法</a></li></ul></li><li><a href="#例题1图中的最长环求基环的大小" class="table-of-contents__link toc-highlight">例题1：图中的最长环（求基环的大小）</a><ul><li><a href="#1拓扑排序法" class="table-of-contents__link toc-highlight">1、拓扑排序法</a></li><li><a href="#2时间戳法" class="table-of-contents__link toc-highlight">2、时间戳法</a></li><li><a href="#3返回最长环上的所有节点" class="table-of-contents__link toc-highlight">3、返回最长环上的所有节点</a></li></ul></li><li><a href="#例题2求基环的大小变形题" class="table-of-contents__link toc-highlight">例题2：求基环的大小变形题</a></li><li><a href="#例题3求一个点到基环树上任意点的距离" class="table-of-contents__link toc-highlight">例题3：求一个点到基环树上任意点的距离</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Doongz Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.958a4673.js"></script>
<script src="/assets/js/main.715bfe53.js"></script>
</body>
</html>