# 博弈论

一般题目中都会有一句话，**假设两个玩家每步都使用最优解**

## 基本分析

这是一道「博弈论」题。

如果没接触过博弈论，其实很难想到，特别是数据范围为 10^3，很具有迷惑性。

如果接触过博弈论，对于这种「判断先手后手的必胜必败」的题目，博弈论方向是一个优先考虑的方向。

根据题意，如果某位玩家在操作前所有数值异或和为 0，那么该玩家胜利。要我们判断给定序列时，先手是处于「必胜态」还是「必败态」，如果处于「必胜态」返回 `True`，否则返回 `False`。

对于博弈论的题目，通常有两类的思考方式：

1. 经验分析：见过类似的题目，猜一个性质，然后去证明该性质是否可推广。
2. 状态分析：根据题目给定的规则是判断「胜利」还是「失败」来决定优先分析「必胜态」还是「必败态」时具有何种性质，然后证明性质是否可推广。

## ICG博弈

指个路: 百度搜索ICG博弈, ICG博弈是这类博弈的总括性理论. 这类博弈的核心特征在于, 只根据初始状态就可以判断双方的输赢情况

看对一些同学有帮助, 顺便把我自己的总结放在这里.

经典的Bash, Wythoff 以及Nim博弈问题, 都属于所谓的公平组合博弈(Impartial Combinatorial Games, ICG), ICG具有的的特征/性质如下(用局势(position)描述游戏中的一个状态):

1. 两人参与, 轮流进行, 有限步内结束.
2. position空间只能划分为两个部分: 奇异局势(P-position)空间和非奇异局势(N-position)空间.
3. 面对同一position, 两人具有相同的合法操作集合; 即选手的操作只与position有关而与选手无关.
4. 对于任一P-position, 任意的合法操作都会使其变成N-position; 对于任一N-position至少存在一种合法操作使其变为P-position. (position空间的划分要满足此性质)
5. 结束局势(E-position)定义为N-position空间中的一些, 面对它的选手赢; 或者定义为P-position空间中的一些, 面对它的选手输. (面对是指上一位选手操作完毕, 轮到当前选手, 而当前选手还未操作)

如果一个游戏满足上述性质, 即为ICG游戏. 那么由于P-position/N-position之间的这种转换关系(性质4), 我们就能, **只根据初始局势就可以判断双方的输赢情况**. 通常判断先手是否赢, 先手赢的条件是**初始局势为N-position**.

启示: 面对一个博弈论(Game theory)问题, 我们可以大胆猜测它是一个ICG问题. 然后通过输赢关系找出一些N-position和P-position, 并尝试划分出各自的空间. 最后, 证明第4个性质. 当然在比赛中, 如果比较难证明, 我们可以直接通过提交代码来测试.

## 巴什博弈 

只有一堆 n 个物品，两个人轮流从这堆物品中取物， 规定每次至少取一个，最多取 m 个。最后取光者得胜。 

只要 n 不能整除 m+1 , 那么必然是先手取胜，否则后手取胜

```python
if n % (m+1) != 0:
	return True
```

[292. Nim 游戏](https://leetcode.cn/problems/nim-game/)

## 控制对手只选奇数堆或偶数堆

[877. 石子游戏](https://leetcode.cn/problems/stone-game/)

```python
return True
```

