# 专题 二分答案

来源：[【C++/Java】浅说一下我理解的二分答案解题方法](https://leetcode.cn/problems/maximum-candies-allocated-to-k-children/solution/by-relll-1037-dhhf/)

二分查找类的题目更多类似于板子题，其核心是**区间的左右移动**及**如何决定区间的移动**

## 通用做法

**二分答案**类型的题目的通用做法:

**1.确定查找区间**

- 根据题意，我们需要搜寻的目标是小孩子最多可以拿走多少个糖果；小孩一次最少也得拿一个糖果，最多一次拿走全部
- 由此，我们首先对糖果总数进行统计；同时可知，若糖果总数小于小孩子的总数，无论如何不会有符合条件的答案，直接返回0
- 最终，区间确定为`left = 1, right = sum(nums)`

**2.二分答案进行查找**

- 利用二分查找缩小查找答案的区间，每次对取得的`mid`进行`check`
- 在本题条件下，我们会发现，若某个`mid`符合条件时，我们会希望得到更大的答案，此时查找区间从`[left, right]`变为`[mid + 1, right]`，同时对`ans`进行更新
- 若`mid`不符合条件，则答案过大，我们希望得到符合条件的答案，因此要对右区间进行缩小，此时查找区间从`[left, right]`变为`[left, right - 1]`

**3.确定`check`方法**

- 这一步算是**二分答案**的核心内容，我们需要根据题目的要求来确定，我们所得的`mid`是否符合条件，从而确定区间的移动
- 在本题条件下我们只需要统计一个数中，最多可以分出多少个`mid`
    - 例：[2,5,3,7] `mid` = 3, k = 4，一次拿取`mid`个糖果
    - 其中：2无法满足一次拿取，k值不变；
    - 5可以分为3和2，来满足一次拿去， k -= 1；
    - 3本身正好可以满足一次拿取，k -= 1；
    - 7可以分为3和4，来满足一次拿取，而4又可以分为3和1，再一次满足一次拿取
- 根据这个思路，对数组中的糖果进行拿取；最终若可满足K个孩子，则返回true，否则返回false；返回的布尔值会决定上一步中的区间的左右移动

**4.本题采用的时`while (left <= right)`最终返回`ans`；**

**5.若采用`while (left < right)`则最终返回`left`或`right`都可以(二者最终汇聚到一点)**

## 例题

### 题型一：二分答案

在一个有范围的区间里搜索一个整数

如果题目要我们找一个整数，这个整数有确定的范围，可以通过二分查找逐渐缩小范围，最后逼近到一个数。

定位一个有范围的整数，这件事情也叫「二分答案」或者叫「二分结果」。如果题目要求的是一个整数，这个整数有明确的范围，可以考虑使用二分查找。

事实上，二分答案是我们最早接触的二分查找的场景。「幸运 52」里猜价格游戏，就是「二分查找」算法的典型应用：先随便猜一个数，如果猜中，游戏结束。如果猜大了，往小猜；如果猜小了，往大猜。

| 题目                                                         | 说明                                                   |
| ------------------------------------------------------------ | ------------------------------------------------------ |
| [69. x 的平方根 ](https://leetcode-cn.com/problems/sqrtx/)   | 在一个整数范围里查找一个整数，也是二分查找法的应用场景 |
| [287. 寻找重复数](https://leetcode-cn.com/problems/find-the-duplicate-number/) |                                                        |
| [374. 猜数字大小](https://leetcode-cn.com/problems/guess-number-higher-or-lower/) |                                                        |
| [275. H 指数 II](https://leetcode-cn.com/problems/h-index-ii/) | 这个问题题解题意得花很多时间，可以跳过不做             |
| [1283. 使结果不超过阈值的最小除数](https://leetcode-cn.com/problems/find-the-smallest-divisor-given-a-threshold/) |                                                        |
| [1292. 元素和小于等于阈值的正方形的最大边长](https://leetcode-cn.com/problems/maximum-side-length-of-a-square-with-sum-less-than-or-equal-to-threshold/) |                                                        |

### 题型二：二分答案的升级版

每一次缩小区间的时候都需要遍历数组

说明：这一类问题本质上还是「题型二」（二分答案），但是初学的时候会觉得有一些绕。这一类问题的问法都差不多，关键字是「连续」、「正整数」，请大家注意捕捉题目中这样的关键信息。

这里给出的问题解法都一样，会一题等于会其它题。问题的场景会告诉我们：目标变量和另一个变量有相关关系（一般是线性关系），目标变量的性质不好推测，但是另一个变量的性质相对容易推测（满足某种意义上的单调性）。这样的问题的判别函数通常会写成一个函数的形式。

这一类问题可以统称为「 最大值极小化 」问题，最原始的问题场景是木棍切割问题，这道题的原始问题是「力扣」第 410 题（分割数组的最大值（困难））。

思路是这样的：

- 分析出题目要我们找一个整数，这个整数有范围，所以可以用二分查找；

- 分析出 单调性，一般来说是一个变量 a 的值大了，另一个变量 b 的值就变小，而「另一个变量的值」 b 有限制，因此可以通过调整 a 的值达到控制 b 的效果；

- 这一类问题的题目条件一定会给出 连续、正整数 这样的关键字。如果没有，问题场景也一定蕴含了这两个关键信息。


参考资料：

- [二分查找之「最大值极小化」相关问题及解题步骤](https://juejin.im/post/6862249637161091085)
- [二分查找之「最大值极小化」例题选讲](https://juejin.im/post/6864407058662457358/)

以下给出的问题无一例外。

| 题目                                                         | 说明 |
| ------------------------------------------------------------ | ---- |
| [875. 爱吃香蕉的珂珂](https://leetcode-cn.com/problems/koko-eating-bananas/) |      |
| [410. 分割数组的最大值](https://leetcode-cn.com/problems/split-array-largest-sum/) |      |
| [LCP 12. 小张刷题计划](https://leetcode-cn.com/problems/xiao-zhang-shua-ti-ji-hua/) |      |
| [1011. 在 D 天内送达包裹的能力](https://leetcode-cn.com/problems/capacity-to-ship-packages-within-d-days/) |      |
| [1482. 制作 m 束花所需的最少天数](https://leetcode-cn.com/problems/minimum-number-of-days-to-make-m-bouquets/) |      |
| [1552. 两球之间的磁力](https://leetcode-cn.com/problems/magnetic-force-between-two-balls/) |      |

