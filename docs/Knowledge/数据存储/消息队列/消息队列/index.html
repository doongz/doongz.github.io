<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Knowledge/数据存储/消息队列/消息队列">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">消息队列 Message queue | Doongz&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doongz.github.io/docs/Knowledge/数据存储/消息队列/消息队列"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="消息队列 Message queue | Doongz&#x27;s Site"><meta data-rh="true" name="description" content="参考 1：消息队列（mq）是什么？"><meta data-rh="true" property="og:description" content="参考 1：消息队列（mq）是什么？"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doongz.github.io/docs/Knowledge/数据存储/消息队列/消息队列"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Knowledge/数据存储/消息队列/消息队列" hreflang="en"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Knowledge/数据存储/消息队列/消息队列" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Doongz&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Doongz&#39;s Site Atom Feed">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bbae31c2.css">
<link rel="preload" href="/assets/js/runtime~main.a61035f3.js" as="script">
<link rel="preload" href="/assets/js/main.7aad8990.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home page</b></a><a class="navbar__item navbar__link" href="/docs/catalogue-algo">Algorithm</a><a class="navbar__item navbar__link" href="/docs/catalogue-skill">Skill</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/catalogue-knowledge">Knowledge</a><a class="navbar__item navbar__link" href="/community/support">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Courses</a><ul class="dropdown__menu"><li><a href="https://github.com/doongz/mlc-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Machine Learning Compilation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs229" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stanford CS229: Machine Learning<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/aics" target="_blank" rel="noopener noreferrer" class="dropdown__link">中国科学院 智能计算系统<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs50-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Harvard CS50’s Introduction to AI with Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.824" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.824 Distributed Systems<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/os-workbench" target="_blank" rel="noopener noreferrer" class="dropdown__link">南京大学 操作系统：设计与实现<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.s081" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.S081 Operating Systems Engineering<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/doongz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/catalogue-knowledge">Catalogue</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Knowledge/IC/IC">IC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Knowledge/计算机组成/">计算机组成-序</a><button aria-label="Toggle the collapsible sidebar category &#x27;计算机组成-序&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Knowledge/操作系统/计算机系统概述">操作系统</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Knowledge/计算机网络/计算机网络体系结构">计算机网络</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Knowledge/容器技术/docker原理">容器技术</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Knowledge/数据存储/设计数据密集型应用/序">数据存储</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/数据存储/设计数据密集型应用/序">设计数据密集型应用</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/数据存储/数据库/关系型数据库">数据库</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Knowledge/数据存储/消息队列/消息队列">消息队列</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Knowledge/数据存储/消息队列/消息队列">消息队列 Message queue</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Knowledge/数据存储/消息队列/Kafka">kafka</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/数据存储/分布式存储/Ceph是如何使用RBD的">分布式存储</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Knowledge/AI/Tensor">AI</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">数据存储</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">消息队列</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">消息队列 Message queue</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>消息队列 Message queue</h1><p>参考 1：<a href="https://www.zhihu.com/question/54152397?sort=created" target="_blank" rel="noopener noreferrer">消息队列（mq）是什么？</a></p><p>参考 2：<a href="https://www.jianshu.com/p/689ce4205021" target="_blank" rel="noopener noreferrer">消息队列技术介绍</a></p><p>参考 3：<a href="https://mp.weixin.qq.com/s/Gb9k_LxQhOPDcMGxDJ9Jvw" target="_blank" rel="noopener noreferrer">消息队列：从选型到原理，一文带你全部掌握</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一为什么开始用消息队列">一、为什么开始用消息队列<a class="hash-link" href="#一为什么开始用消息队列" title="Direct link to heading">​</a></h2><p>面试官你好：我们公司本身的业务体量很小，所以直接<strong>单机一把梭</strong>啥都能搞定了，但是后面业务体量不断扩大，采用<strong>微服务的设计思想</strong>，<strong>分布式的部署方式</strong>，所以拆分了很多的服务，随着体量的增加以及业务场景越来越复杂了，很多场景单机的技术栈和中间件以及不够用了，而且对系统的友好性也下降了，最后做了很多技术选型的工作，我们决定引入<strong>消息队列中间件</strong>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="二消息队列应用场景">二、消息队列应用场景<a class="hash-link" href="#二消息队列应用场景" title="Direct link to heading">​</a></h2><p><strong>异步、削峰、解耦</strong>，这三个场景是消息队列的最经典场景，要烂熟于心</p><p>除此之外还有，<strong>日志处理、消息通讯</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1异步处理">1、异步处理<a class="hash-link" href="#1异步处理" title="Direct link to heading">​</a></h3><p>场景说明：用户注册后，需要发送注册邮件和发送注册信息，传统的做法有两种：串行方式、并行方式</p><p><strong>做法一：串行方式</strong></p><p>将注册信息写入数据库成功后，发送注册邮件，然后发送注册短信，而所有任务执行完成后，返回信息给客户端</p><p><img loading="lazy" alt="mq-1" src="data:image/png;base64,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" width="519" height="132" class="img_ev3q"></p><p><strong>做法二：并行方式</strong></p><p>将注册信息写入数据库成功后，同时进行发送注册邮件和发送注册短信的操作。而所有任务执行完成后，返回信息给客户端。同串行方式相比，并行方式可以提高执行效率，减少执行时间。</p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="399" height="212" class="img_ev3q"></p><p>上面的比较可以发现，假设三个操作均需要50ms的执行时间，排除网络因素，则最终执行完成，串行方式需要150ms，而并行方式需要100ms。</p><p>因为cpu在单位时间内处理的请求数量是一致的，假设：CPU每1秒吞吐量是100此，则串行方式1秒内可执行的请求量为1000/150，不到7次；并行方式1秒内可执行的请求量为1000/100，为10次。</p><p><strong>做法三：异步处理</strong></p><p>由上可以看出，传统串行和并行的方式会受到系统性能的局限，那么如何解决这个问题？</p><p>我们需要引入消息队列，将不是必须的业务逻辑，异步进行处理，由此改造出来的流程为</p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="570" height="189" class="img_ev3q"></p><p>根据上述的流程，用户的响应时间基本相当于将用户数据写入数据库的时间，发送注册邮件、发送注册短信的消息在写入消息队列后，即可返回执行结果，写入消息队列的时间很快，几乎可以忽略，也有此可以将系统吞吐量提升至20QPS，比串行方式提升近3倍，比并行方式提升2倍。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2应用解耦">2、应用解耦<a class="hash-link" href="#2应用解耦" title="Direct link to heading">​</a></h3><p>场景说明：用户下单后，订单系统需要通知库存系统。</p><p>传统的做法为：订单系统调用库存系统的接口。如下图所示：</p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="286" height="109" class="img_ev3q"></p><p>传统方式：调用库存接口</p><p>传统方式具有如下缺点：</p><ol><li>假设库存系统访问失败，则订单减少库存失败，导致订单创建失败</li><li>订单系统同库存系统过度耦合</li></ol><p>如何解决上述的缺点呢？需要引入消息队列，引入消息队列后的架构如下图所示：</p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="346" height="179" class="img_ev3q"></p><ul><li>订单系统：用户下单后，订单系统进行数据持久化处理，然后将消息写入消息队列，返回订单创建成功</li><li>库存系统：使用拉/推的方式，获取下单信息，库存系统根据订单信息，进行库存操作。</li></ul><p>假如在下单时库存系统不能正常使用。也不影响正常下单，因为下单后，订单系统写入消息队列就不再关心其后续操作了。由此实现了订单系统与库存系统的应用解耦。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3流量削锋">3、流量削锋<a class="hash-link" href="#3流量削锋" title="Direct link to heading">​</a></h3><p>应用场景：秒杀活动，一般会因为流量过大，导致流量暴增，应用挂掉。为解决这个问题，一般需要在应用前端加入消息队列。</p><ol><li>可以控制参与活动的人数；</li><li>可以缓解短时间内高流量对应用的巨大压力；</li></ol><p>流量削锋处理方式系统图如下：</p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="436" height="113" class="img_ev3q"></p><ol><li>服务器在接收到用户请求后，首先写入消息队列。这时如果消息队列中消息数量超过最大数量，则直接拒绝用户请求或返回跳转到错误页面；</li><li>秒杀业务根据秒杀规则读取消息队列中的请求信息，进行后续处理。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4日志处理">4、日志处理<a class="hash-link" href="#4日志处理" title="Direct link to heading">​</a></h3><p>日志处理是指将消息队列用在日志处理中，比如Kafka的应用，解决大量日志传输的问题。架构简化如下：</p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="456" height="109" class="img_ev3q"></p><p>消息队列应用于日志处理的架构</p><ul><li>日志采集客户端：负责日志数据采集，定时写受写入Kafka队列；</li><li>Kafka消息队列：负责日志数据的接收，存储和转发；</li><li>日志处理应用：订阅并消费kafka队列中的日志数据；</li></ul><p>这种架构在实际开发中的应用，可以参照案例：<a href="https://link.jianshu.com?t=http://cloud.51cto.com/art/201507/484338.htm" target="_blank" rel="noopener noreferrer">新浪技术分享：我们如何扛下32亿条实时日志的分析处理</a></p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="651" height="253" class="img_ev3q"></p><ol><li>Kafka：接收用户日志的消息队列。</li><li>Logstash：做日志解析，统一成JSON输出给Elasticsearch。</li><li>Elasticsearch：实时日志分析服务的核心技术，一个schemaless，实时的数据存储服务，通过index组织数据，兼具强大的搜索和统计功能。</li><li>Kibana：基于Elasticsearch的数据可视化组件，超强的数据可视化能力是众多公司选择ELK stack的重要原因。</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5消息通讯">5、消息通讯<a class="hash-link" href="#5消息通讯" title="Direct link to heading">​</a></h3><p>消息通讯是指，消息队列一般都内置了高效的通信机制，因此也可以用在纯的消息通讯。比如实现点对点消息队列、聊天室等。</p><p><strong>点对点通讯架构设计</strong></p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="406" height="109" class="img_ev3q"></p><p>在点对点通讯架构设计中，客户端A和客户端B共用一个消息队列，即可实现消息通讯功能。</p><p><strong>聊天室通讯架构设计</strong></p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="406" height="117" class="img_ev3q"></p><p>客户端A、客户端B、直至客户端N订阅同一消息队列，进行消息的发布与接收，即可实现聊天通讯方案架构设计。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="三消息队列的缺点">三、消息队列的缺点<a class="hash-link" href="#三消息队列的缺点" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1系统复杂性及可用性">1、系统复杂性及可用性<a class="hash-link" href="#1系统复杂性及可用性" title="Direct link to heading">​</a></h3><p>本来蛮简单的一个系统，我代码随便写都没事，现在你凭空接入一个中间件在那，需要考虑去维护他，而且使用的过程中也需要考虑各种问题，比如消息<strong>重复消费</strong>、<strong>消息丢失</strong>、<strong>消息的顺序消费</strong>等等</p><p>同时，各个系统之间强依赖MQ，MQ的可用性就变得非常的关键，还要额外的去保证MQ的高可用，担心他会挂了</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2数据一致性">2、数据一致性<a class="hash-link" href="#2数据一致性" title="Direct link to heading">​</a></h3><p>这个其实是分布式服务本身就存在的一个问题，<strong>不仅仅是消息队列的问题</strong>，但是放在这里说是因为用了消息队列这个问题会暴露得比较严重一点。</p><p>就像我开头说的，你下单的服务自己保证自己的逻辑成功处理了，你成功发了消息，但是优惠券系统，积分系统等等这么多系统，<strong>他们成功还是失败你就不管了？</strong></p><p>我说了保证自己的业务数据对的就好了，其实还是比较不负责任的一种说法，这样就<strong>像个渣男，没有格局</strong>，<strong>这样呀你的路会越走越窄的</strong>。</p><p><strong>所有的服务都成功才能算这一次下单是成功的</strong>，那怎么才能保证数据一致性呢？</p><p><strong>分布式事务</strong>：把下单，优惠券，积分。。。都放在一个事务里面一样，要成功一起成功，要失败一起失败。</p><p>Tip:<strong>分布式事务</strong>在互联网公司里面实在常见，我也不在这里大篇幅介绍了，后面都会专门说的。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="四消息中间件示例">四、消息中间件示例<a class="hash-link" href="#四消息中间件示例" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1电商系统">1、电商系统<a class="hash-link" href="#1电商系统" title="Direct link to heading">​</a></h3><p>电商系统架构示意图</p><p><img loading="lazy" alt="img" src="data:image/png;base64,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" width="403" height="172" class="img_ev3q"></p><p>消息队列采用高可用、可持久化的消息中间件。比如Active MQ，Rabbit MQ，Rocket MQ。</p><ul><li>应用将主干逻辑处理完成后，写入消息队列。消息发送是否成功可以开启消息的确认模式。（消息队列返回消息接收成功状态后，应用再返回，这样保障消息的完整性）</li><li>扩展流程（发短信、配送处理）订阅队列消息。采用推或拉的方式获取消息并处理。</li><li>消息将应用解耦的同时，带来了数据一致性问题，可以采用最终一致性方式解决。比如主数据写入数据库，扩展应用根据消息队列，并结合数据库方式实现基于消息队列的后续处理。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2日志收集系统">2、日志收集系统<a class="hash-link" href="#2日志收集系统" title="Direct link to heading">​</a></h3><p>日志收集系统架构示意图</p><p><img loading="lazy" alt="img" src="/assets/images/mq-12-83147dd5e929d924016788615f2f09f5.png" width="545" height="200" class="img_ev3q"></p><p>分为Zookeeper注册中心，日志收集客户端，Kafka集群和Storm集群（OtherApp）四部分组成。</p><ul><li>Zookeeper注册中心，提出负载均衡和地址查找服务；</li><li>日志收集客户端，用于采集应用系统的日志，并将数据推送到kafka队列；</li><li>Kafka集群：接收，路由，存储，转发等消息处理；</li><li>Storm集群：与OtherApp处于同一级别，采用拉的方式消费队列中的数据；</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="五技术选型">五、技术选型<a class="hash-link" href="#五技术选型" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1消息队列模式">1、消息队列模式<a class="hash-link" href="#1消息队列模式" title="Direct link to heading">​</a></h3><p>消息队列目前主要2种模式，分别为“点对点模式”和“发布/订阅模式”。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1点对点模式">1）点对点模式<a class="hash-link" href="#1点对点模式" title="Direct link to heading">​</a></h4><p><strong>一个具体的消息只能由一个消费者消费</strong>。多个生产者可以向同一个消息队列发送消息；但是，一个消息在被一个消息者处理的时候，这个消息在队列上会被锁住或者被移除并且其他消费者无法处理该消息。需要额外注意的是，如果消费者处理一个消息失败了，消息系统一般会把这个消息放回队列，这样其他消费者可以继续处理。</p><p><img loading="lazy" alt="图片" src="/assets/images/mq-13-f20ea721bfab215f7a3c1ce81e7c06cf.png" width="757" height="229" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2发布订阅模式">2）发布/订阅模式<a class="hash-link" href="#2发布订阅模式" title="Direct link to heading">​</a></h4><p>单个消息可以被多个订阅者并发的获取和处理。一般来说，订阅有两种类型：</p><ul><li>临时（ephemeral）订阅，这种订阅只有在消费者启动并且运行的时候才存在。一旦消费者退出，相应的订阅以及尚未处理的消息就会丢失。</li><li>持久（durable）订阅，这种订阅会一直存在，除非主动去删除。消费者退出后，消息系统会继续维护该订阅，并且后续消息可以被继续处理。</li></ul><p><img loading="lazy" alt="图片" src="/assets/images/mq-14-ed72ee440333a175213577bc31340954.png" width="725" height="218" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2衡量标准">2、衡量标准<a class="hash-link" href="#2衡量标准" title="Direct link to heading">​</a></h3><p>对消息队列进行技术选型时，需要通过以下指标衡量你所选择的消息队列，是否可以满足你的需求：</p><ul><li>消息顺序：发送到队列的消息，消费时是否可以保证消费的顺序，比如A先下单，B后下单，应该是A先去扣库存，B再去扣，顺序不能反。</li><li>消息路由：根据路由规则，只订阅匹配路由规则的消息，比如有A/B两者规则的消息，消费者可以只订阅A消息，B消息不会消费。</li><li>消息可靠性：是否会存在丢消息的情况，比如有A/B两个消息，最后只有B消息能消费，A消息丢失。</li><li>消息时序：主要包括“消息存活时间”和“延迟/预定的消息”，“消息存活时间”表示生产者可以对消息设置TTL，如果超过该TTL，消息会自动消失；“延迟/预定的消息”指的是可以延迟或者预订消费消息，比如延时5分钟，那么消息会5分钟后才能让消费者消费，时间未到的话，是不能消费的。</li><li>消息留存：消息消费成功后，是否还会继续保留在消息队列。</li><li>容错性：当一条消息消费失败后，是否有一些机制，保证这条消息是一种能成功，比如异步第三方退款消息，需要保证这条消息消费掉，才能确定给用户退款成功，所以必须保证这条消息消费成功的准确性。</li><li>伸缩：当消息队列性能有问题，比如消费太慢，是否可以快速支持库容；当消费队列过多，浪费系统资源，是否可以支持缩容。</li><li>吞吐量：支持的最高并发数。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3消息队列比较">3、消息队列比较<a class="hash-link" href="#3消息队列比较" title="Direct link to heading">​</a></h3><p>目前在市面上比较主流的消息队列中间件主要有，<strong>Kafka、ActiveMQ、RabbitMQ、RocketMQ</strong> 等这几种。</p><p><strong>ActiveMQ</strong>和<strong>RabbitMQ</strong>这两着因为吞吐量还有<strong>GitHub</strong>的社区活跃度的原因，在各大互联网公司都已经基本上绝迹了，业务体量一般的公司会是有在用的，但是越来越多的公司更青睐<strong>RocketMQ</strong>这样的消息中间件了。</p><p><strong>Kafka</strong>和<strong>RocketMQ</strong>一直在各自擅长的领域发光发亮，不过写这篇文章的时候我问了蚂蚁金服，字节跳动和美团的朋友，好像大家用的都有点不一样，应该都是各自的中间件，可能做过修改，也可能是<strong>自研</strong>的，大多<strong>没有开源</strong>。</p><p>对比图：</p><p><img loading="lazy" alt="img" src="/assets/images/mq-15-43788fa6b4188892da14a2a088ae7580.png" width="720" height="819" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1kafka">1）Kafka<a class="hash-link" href="#1kafka" title="Direct link to heading">​</a></h4><p>优点：</p><ul><li><strong>高吞吐、低延迟</strong>：kakfa 最大的特点就是收发消息非常快，kafka 每秒可以处理几十万条消息，它的最低延迟只有几毫秒；</li><li>高伸缩性：每个主题(topic) 包含多个分区(partition)，主题中的分区可以分布在不同的主机(broker)中；</li><li>持久性、可靠性：Kafka 能够允许数据的持久化存储，消息被持久化到磁盘，并支持数据备份防止数据丢失，Kafka 底层的数据存储是基于 Zookeeper 存储的，Zookeeper 我们知道它的数据能够持久存储；</li><li>容错性：非常高，kafka是分布式的，一个数据多个副本，某个节点宕机，Kafka 集群能够正常工作；</li><li>消息有序：消费者采用Pull方式获取消息，消息有序，通过控制能够保证所有消息被消费且仅被消费一次；</li><li>有优秀的第三方Kafka Web管理界面Kafka-Manager，在日志领域比较成熟，被多家公司和多个开源项目使用；</li><li>功能支持：功能较为简单，主要支持简单的MQ功能，在大数据领域的实时计算以及日志采集被大规模使用。</li></ul><p>缺点：</p><ul><li>Kafka单机超过64个队列/分区，Load会发生明显的飙高现象，队列越多，load越高，发送消息响应时间变长；</li><li>使用短轮询方式，实时性取决于轮询间隔时间；</li><li>消费失败不支持重试；</li><li>支持消息顺序，但是一台代理宕机后，就会产生消息乱序；</li><li>社区更新较慢。</li></ul><p>总结：</p><ul><li>Kafka主要特点是基于Pull的模式来处理消息消费，追求高吞吐量，一开始的目的就是用于日志收集和传输，适合产生大量数据的互联网服务的数据收集业务。</li><li>大型公司建议可以选用，如果有日志采集功能，肯定是首选kafka。</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2rabbitmq">2）RabbitMQ<a class="hash-link" href="#2rabbitmq" title="Direct link to heading">​</a></h4><p>优点：</p><ul><li>异步消息传递：支持多种消息协议，消息队列，传送确认，灵活的路由到队列，多种交换类型；</li><li>支持几乎所有最受欢迎的编程语言：Java，C，C ++，C＃，Ruby，Perl，Python，PHP等等；</li><li>可以部署为高可用性和吞吐量的集群;，跨多个可用区域和区域进行联合；</li><li>可插入的身份验证，授权，支持TLS和LDAP；</li><li>提供了许多插件，来从多方面进行扩展，也可以编写自己的插件；</li><li>提供了一个易用的用户界面，使得用户可以监控和管理消息Broker，社区活跃度高。</li></ul><p>缺点：</p><ul><li>erlang开发，很难去看懂源码，基本职能依赖于开源社区的快速维护和修复bug，不利于做二次开发和维护；</li><li>RabbitMQ确实吞吐量会低一些，这是因为他做的实现机制比较重；</li><li>需要学习比较复杂的接口和协议，学习和维护成本较高。</li></ul><p>总结：</p><ul><li>结合erlang语言本身的并发优势，性能较好，社区活跃度也比较高，但是不利于做二次开发和维护。不过RabbitMQ的社区十分活跃，可以解决开发过程中遇到的bug。</li><li>如果你的数据量没有那么大，小公司优先选择功能比较完备的RabbitMQ。</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3rocketmq">3）RocketMQ<a class="hash-link" href="#3rocketmq" title="Direct link to heading">​</a></h4><p>优点：</p><ul><li>支持发布/订阅（Pub/Sub）和点对点（P2P）消息模型；</li><li>在一个队列中可靠的先进先出（FIFO）和严格的顺序传递；</li><li>支持拉（pull）和推（push）两种消息模式；</li><li>单一队列百万消息的堆积能力；</li><li>支持多种消息协议，如 JMS、MQTT 等；</li><li>可靠的FIFO和严格的有序消息传递在同一队列中；</li><li>灵活的分布式横向扩展部署架构，满足至少一次消息传递语义；</li><li>提供 docker 镜像用于隔离测试和云集群部署；</li><li>提供配置、指标和监控等功能丰富的 Dashboard。</li></ul><p>缺点：</p><ul><li>支持的客户端语言不多，目前是java及c++，其中c++不成熟</li><li>社区活跃度一般</li><li>没有在 mq 核心中去实现JMS等接口，有些系统要迁移需要修改大量代码</li></ul><p>总结：</p><ul><li>天生为<strong>金融互联网领域</strong>而生，对于可靠性要求很高的场景，尤其是电商里面的订单扣款，以及业务削峰，在大量交易涌入时，后端可能无法及时处理的情况。</li><li>RoketMQ在稳定性上可能更值得信赖，这些业务场景在阿里双11已经经历了多次考验，如果你的业务有上述并发场景，建议可以选择RocketMQ。</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4activemq">4）ActiveMQ<a class="hash-link" href="#4activemq" title="Direct link to heading">​</a></h4><p>优点</p><ul><li>支持来自Java，C，C ++，C＃，Ruby，Perl，Python，PHP的各种跨语言客户端和协议；</li><li>完全支持JMS客户端和Message Broker中的企业集成模式；</li><li>支持许多高级功能，如消息组，虚拟目标，通配符和复合目标；</li><li>完全支持JMS 1.1和J2EE 1.4，支持瞬态，持久，事务和XA消息；</li><li>Spring支持，以便ActiveMQ可以轻松嵌入到Spring应用程序中，并使用Spring的XML配置机制进行配置；</li><li>专为高性能集群，客户端 - 服务器，基于对等的通信而设计；</li><li>CXF和Axis支持，以便ActiveMQ可以轻松地放入这些Web服务堆栈中以提供可靠的消息传递；</li><li>可以用作内存JMS提供程序，非常适合单元测试JMS；</li><li>支持可插拔传输协议，例如in-VM，TCP，SSL，NIO，UDP，多播，JGroups和JXTA传输；</li><li>使用JDBC和高性能日志支持非常快速的持久性。</li></ul><p>缺点:</p><ul><li>官方社区现在对ActiveMQ 5.x维护越来越少，较少在大规模吞吐的场景中使用。</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Knowledge/数据存储/数据库/Redis"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Redis</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Knowledge/数据存储/消息队列/Kafka"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">kafka</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#一为什么开始用消息队列" class="table-of-contents__link toc-highlight">一、为什么开始用消息队列</a></li><li><a href="#二消息队列应用场景" class="table-of-contents__link toc-highlight">二、消息队列应用场景</a><ul><li><a href="#1异步处理" class="table-of-contents__link toc-highlight">1、异步处理</a></li><li><a href="#2应用解耦" class="table-of-contents__link toc-highlight">2、应用解耦</a></li><li><a href="#3流量削锋" class="table-of-contents__link toc-highlight">3、流量削锋</a></li><li><a href="#4日志处理" class="table-of-contents__link toc-highlight">4、日志处理</a></li><li><a href="#5消息通讯" class="table-of-contents__link toc-highlight">5、消息通讯</a></li></ul></li><li><a href="#三消息队列的缺点" class="table-of-contents__link toc-highlight">三、消息队列的缺点</a><ul><li><a href="#1系统复杂性及可用性" class="table-of-contents__link toc-highlight">1、系统复杂性及可用性</a></li><li><a href="#2数据一致性" class="table-of-contents__link toc-highlight">2、数据一致性</a></li></ul></li><li><a href="#四消息中间件示例" class="table-of-contents__link toc-highlight">四、消息中间件示例</a><ul><li><a href="#1电商系统" class="table-of-contents__link toc-highlight">1、电商系统</a></li><li><a href="#2日志收集系统" class="table-of-contents__link toc-highlight">2、日志收集系统</a></li></ul></li><li><a href="#五技术选型" class="table-of-contents__link toc-highlight">五、技术选型</a><ul><li><a href="#1消息队列模式" class="table-of-contents__link toc-highlight">1、消息队列模式</a></li><li><a href="#2衡量标准" class="table-of-contents__link toc-highlight">2、衡量标准</a></li><li><a href="#3消息队列比较" class="table-of-contents__link toc-highlight">3、消息队列比较</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Doongz Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a61035f3.js"></script>
<script src="/assets/js/main.7aad8990.js"></script>
</body>
</html>