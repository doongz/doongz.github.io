<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Knowledge/操作系统/虚拟化">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">虚拟化 | Doongz&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doongz.github.io/docs/Knowledge/操作系统/虚拟化"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="虚拟化 | Doongz&#x27;s Site"><meta data-rh="true" name="description" content="深入理解虚拟化"><meta data-rh="true" property="og:description" content="深入理解虚拟化"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doongz.github.io/docs/Knowledge/操作系统/虚拟化"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Knowledge/操作系统/虚拟化" hreflang="en"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Knowledge/操作系统/虚拟化" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Doongz&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Doongz&#39;s Site Atom Feed"><link rel="stylesheet" href="/assets/css/styles.99c6e2a1.css">
<link rel="preload" href="/assets/js/runtime~main.f9aa80d1.js" as="script">
<link rel="preload" href="/assets/js/main.0ded408c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home page</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/community/support">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Courses</a><ul class="dropdown__menu"><li><a href="https://github.com/doongz/mlc-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Machine Learning Compilation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs229" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stanford CS229: Machine Learning<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/aics" target="_blank" rel="noopener noreferrer" class="dropdown__link">中国科学院 智能计算系统<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs50-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Harvard CS50’s Introduction to AI with Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.824" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.824 Distributed Systems<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/os-workbench" target="_blank" rel="noopener noreferrer" class="dropdown__link">南京大学 操作系统：设计与实现<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.s081" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.S081 Operating Systems Engineering<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/doongz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/前述/面试时做题技巧">Algorithm</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Competition/比赛">Competition</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Course/CMU-15-213">Course</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Knowledge/IC/IC">Knowledge</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/IC/IC">IC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/Knowledge/计算机组成/">计算机组成-序</a><button aria-label="Toggle the collapsible sidebar category &#x27;计算机组成-序&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Knowledge/操作系统/计算机系统概述">操作系统</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Knowledge/操作系统/计算机系统概述">计算机系统概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Knowledge/操作系统/进程管理">进程管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Knowledge/操作系统/内存管理">内存管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Knowledge/操作系统/文件管理">文件管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Knowledge/操作系统/输入输出管理">输入输出管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Knowledge/操作系统/虚拟化">虚拟化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Knowledge/操作系统/进程&amp;线程&amp;协程">进程、线程、协程</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/计算机网络/计算机网络体系结构">计算机网络</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/容器技术/docker原理">容器技术</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/数据存储/设计数据密集型应用/序">数据存储</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Knowledge/AI/Tensor">AI</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Math/微积分/极限">Math</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">Skill</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Knowledge</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">操作系统</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">虚拟化</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>虚拟化</h1><p><a href="https://zhuanlan.zhihu.com/p/441287815" target="_blank" rel="noopener noreferrer">深入理解虚拟化</a></p><p><a href="https://www.zhihu.com/question/307537564" target="_blank" rel="noopener noreferrer">Docker，K8s，KVM，Hypervisor和微服务有什么区别联系吗？</a></p><p><a href="https://blog.csdn.net/mumuriyue/article/details/85714900" target="_blank" rel="noopener noreferrer">虚拟化技术的分类及介绍</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docker和虚拟化的区别">docker和虚拟化的区别<a class="hash-link" href="#docker和虚拟化的区别" title="Direct link to heading">​</a></h2><p>首先要说的是题目隐含的一个概念：<strong>硬件虚拟化。</strong>硬件虚拟化主要来源于两个前提条件：</p><ul><li>硬件性能过剩。这个就不详细解释了，消费级电脑的主流配置已经6核的今天，除了3A游戏以及例如视频制作、3D渲染、高性能计算之类的专业应用，大部分电脑的CPU性能闲置率超过90%。</li><li>业务需要多台主机——这个需求一部分来源于软件冲突，或者版本冲突；另一部分来源于需要不同的操作系统（如果把操作系统看做一个独立的软件，也可以归类为软件冲突）。服务器上的先不说，如果是做web前端的，现在好一点，以前经常要测试网页在不同版本的IE上是否能够正常浏览，然而一台电脑又只能装一个版本的IE，这就是软件版本冲突。</li></ul><p>配备多台电脑固然是一个解决方案，但显然成本过高。因此就有硬件虚拟化的提出——用软件仿真一台电脑出来，在这台虚拟出来的电脑上安装操作系统，配置网络，安装运行软件等等。很多人听说过用过的VMware就这么一个软件。这个能够虚拟出一台或者多台电脑，并对这些虚拟机进行管理的软件，就是Hypervisor。</p><p>知道VMware的大部分人都听说过两个版本：一个是VMware Workstation，一个是VMware ESXi。这两个版本最大的区别，就是Workstation是运行在某个已有操作系统上的软件，例如Windows或者Linux，由操作系统实现对硬件资源的访问。而ESXi则本身就是一个操作系统，直接运行在硬件之上，省去了Host OS的开销。这就是两种不同的Hypervisor。</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">                                        +-----+-----+-----+-----+-----+          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                        |App A|App B|App C|App D|App E|          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----+-----+-----+-----+-----+         +-----+-----+-----+-----+-----+           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|App A|App B|App C|App D|App E|         |Guest|Guest|Guest|Guest|Guest|           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----+-----+-----+-----+-----+         |OS A |OS B |OS C |OS D |OS E |           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|Guest|Guest|Guest|Guest|Guest|         +-----+-----+-----+-----+-----+           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|OS A |OS B |OS C |OS D |OS E |         |         Hypervisor          |           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----+-----+-----+-----+-----+         +-----------------------------+           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|         Hypervisor          |         |          Host OS            |           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------+         +-----------------------------+           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          Hardware           |         |          Hardware           |           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------+         +-----------------------------+            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Type I                                  Type Ⅱ</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ESXi属于Type I，Workstation属于Type II。Windows自带的Hyper-V，Linux上的Xen也属于Type I，Virtual Box之类的属于Type II。</p><p>而Linux从2.6.20开始，就从内核支持虚拟化，可以理解为内核就是Hypervisor的一部分，配合Qemu实现完整的Hypervisor功能。所以叫“<strong>基于内核的虚拟机</strong>（英语：<strong>K</strong>ernel-based <strong>V</strong>irtual <strong>M</strong>achine，缩写为<strong>KVM</strong>）”<!-- -->[1]<!-- -->，不过因为内核部分跟近似于Type I但又不是完整的Hypervisor，Qemu部分则更接近于Type II，所以在维基的Hyperviso词条的Talk页面中，不少人为KVM属于Type I还是Type II而激烈争论。</p><p>虚拟机有一个问题，就是虚拟机里面的操作系统本身会占用相当一部分资源。例如最新版的Windows 10，安装完毕什么都不干，就占用20~30G的硬盘空间，2~3G的内存。即使是只有字符终端没有图形界面的Linux，根据发行版和安装软件的不同，往往也需要100M~1G的内存，1~10G的硬盘空间。如果说同时运行2~3台还能接受这个开销的话，同时运行数十台，这个开销就不是少数了。事实上，往往这数十台虚拟机运行的都是相同的操作系统，只是根据业务需求的不同，安装的软件，或者软件版本不同而已。因此，业界提出了操作系统虚拟化（也叫容器，Containerization）的概念——所有的虚拟机使用同一个操作系统内核。容器和Type II的Hypervisor相比，最大的区别就是省去了客户机操作系统的开销，如下图：</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----+-----+-----+-----+-----+           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|App A|App B|App C|App D|App E|           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----+-----+-----+-----+-----+           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|Guest|Guest|Guest|Guest|Guest|           +-----+-----+-----+-----+-----+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|OS A |OS B |OS C |OS D |OS E |           |App A|App B|App C|App D|App E|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----+-----+-----+-----+-----+           +-----+-----+-----+-----+-----+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|         Hypervisor          |           |      Container Engine       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------+           +-----------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          Host OS            |           |          Host OS            |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------+           +-----------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|          Hardware           |           |          Hardware           |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------------------+           +-----------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Type II Hypervisor                          Containerization</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>容器技术有很多种，最常见的就是题目所说的Docker，此外还有Linux的LXC、OpenVZ，FreeBSD的Jails，Solaris的Zones等等。值得一提的是各种Unix的chroot命令，也可以看做是一种特殊的容器。</p><p>当然，Docker除了实现容器以外，还有相关的一系列概念和组件，例如镜像、仓库等等，大大简化了应用的分发、部署等工作，这些是Docker得以流行的很重要的因素，但这里就不展开了。有兴趣再了解这方面的请参考我的另外一个回答：<a href="https://www.zhihu.com/question/28300645/answer/585166942" target="_blank" rel="noopener noreferrer">如何通俗解释Docker是什么？</a></p><p>我们知道，因为性能、安全、容错等等原因，有时候我们需要把若干台物理机组成一个集群来提供服务。同样的，虚拟机和容器也有这样的需求，而容器的集群管理，目前比较流行的就是Kubernetes（简称K8s）。K8s把一个或者多个实现某种业务的容器，组成一个Pod，然后对这些Pods进行监控和管理。</p><p>最后，微服务应该算是业务层面的。一般来说，每个完整的业务系统，都可以分为若干个组件，举例来说，我们做一个学校的选课系统，通常可以划分为课程管理、教师管理、学生管理、教室管理以及选课系统这几个耦合比较松散的组件。如果我们把每个组件作为一个独立的系统进行开发，并且对其它系统提供业务接口（服务），那么每个这样的独立系统，就是一个微服务。将来进行业务扩展的时候这些微服务就可以方便的得以复用，例如学生管理服务可以为学籍管理系统提供学生信息服务，教师管理服务可以向学校的OA、财务系统提供教职工信息服务，……，等等。另外，也可以根据业务的不同特点，或者开发小组/团队的技术实力，使用不同的开发技术、架构进行开发。</p><p>这些一个个的微服务，可能相当大部分只需要使用很少的硬件资源，但微服务的数量又很多，把一个微服务部署在一个或者多个容器的组合里面就最适合不过了。而每一个微服务，作为K8s的一个Pod，统一进行管理自然也是水到渠成的方案。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一什么是虚拟化">一、什么是虚拟化<a class="hash-link" href="#一什么是虚拟化" title="Direct link to heading">​</a></h2><p>虚拟化技术是云计算的根基，在计算机技术中，<strong>虚拟化（技术）</strong>或<strong>虚拟技术</strong>（英语：Virtualization）是一种资源管理技术，是将计算机的各种实体资源（<strong>CPU、内存、磁盘空间、网络适配器</strong>等），予以抽象、转换后呈现出来并可供分割、组合为一个或多个电脑配置环境。由此，打破实体结构间的不可切割的障碍，使用户可以比原本的配置更好的方式来应用这些电脑硬件资源。这些资源的新虚拟部分是不受现有资源的架设方式，地域或物理配置所限制。一般所指的虚拟化资源包括<strong>计算(CPU+内存），网络，存储</strong>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="虚拟化的本质">虚拟化的本质<a class="hash-link" href="#虚拟化的本质" title="Direct link to heading">​</a></h3><p><strong>虚拟化</strong>本质是指资源的抽象化，要想资源充分利用，必须把资源最小单位化(池化)，这样上层才能按需使用资源，虚拟化不但解放了操作系统，也解放了物理硬件，大大提高了<strong>资源的利用率</strong>。</p><p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-59292842f1143627a510b77822900bb8_720w.jpg" alt="img" class="img_ev3q"></p><ul><li>虚拟化管理程序<strong>Hypervisor</strong>（VMM），位于虚拟机与底层硬件设备之间的虚拟层，直接运行于硬件设备之上，负责对硬件资源进行抽象，为上层虚拟机提供运行环境所需资源，并使每个虚拟机都能够互不干扰、相互独立地运行于同一个系统中。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="二虚拟化分类">二、虚拟化分类<a class="hash-link" href="#二虚拟化分类" title="Direct link to heading">​</a></h2><p>虚拟化主要分为几大类：</p><ul><li><strong>计算虚拟化</strong>，针对CPU和内存资源虚拟化技术。</li><li><strong>IO虚拟化</strong>，针对IO资源虚拟化技术。</li><li><strong>网络虚拟化</strong>，针对网络链路资源虚拟化技术。</li><li><strong>存储虚拟化</strong>，针对磁盘存储资源虚拟化技术。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1计算虚拟化">1、计算虚拟化<a class="hash-link" href="#1计算虚拟化" title="Direct link to heading">​</a></h3><p><strong>计算虚拟化</strong>通过虚拟化管理程序（Hypervisor或VMM）将物理服务器的硬件资源与上层应用进行解耦，形成统一的计算资源池，然后可弹性分配给逻辑上隔离的虚拟机共享使用。如图2、基于VMM所在位置与虚拟化范围可以分三种类型。</p><p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-38396e1fad68c53c211cb2382642e1fc_720w.jpg" alt="img" class="img_ev3q"></p><p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-201f2233e1682b6bbeb75e4fc56a13e9_720w.jpg" alt="img" class="img_ev3q"></p><p><strong>容器（应用级）</strong>：容器是一种更加轻量的应用级虚拟化技术，将应用的可执行文件及其所需的运行时环境与依赖库打包，实现一次构建，到处运行的目标。相比虚拟化，容器技术多了容器引擎层（如Docker），但上层应用无需与Guest OS绑定，可以实现秒级部署、跨平台迁移，灵活的资源分配，弹性调度管理等优势。容器、微服务与DevOps为云原生的三大要素，是推动企业技术中台建设与微服务化转型不可或缺的组件。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实现-kvm">实现-KVM<a class="hash-link" href="#实现-kvm" title="Direct link to heading">​</a></h4><p><strong>KVM</strong>是基于虚拟化扩展（Intel VT 或者 AMD-V）的 X86 硬件的开源的 Linux 原生的全虚拟化解决方案。KVM 中，虚拟机被实现为常规的 Linux 进程，由标准 Linux 调度程序进行调度；虚机的每个虚拟 CPU 被实现为一个常规的 Linux 进程。这使得 KMV 能够使用 Linux 内核的已有功能。</p><p>但是，KVM 本身不执行任何硬件模拟，需要客户空间程序通过 /dev/kvm 接口设置一个客户机虚拟服务器的地址空间，向它提供模拟的 I/O，并将它的视频显示映射回宿主的显示屏。目前这个应用程序是 QEMU。</p><p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-17a4f6eae217bc6a5c79c1fabcd33f3a_720w.jpg" alt="img" class="img_ev3q"></p><ul><li><strong>Guest</strong>：客户机系统，包括CPU（vCPU）、内存、驱动（Console、网卡、I/O 设备驱动等），被 KVM 置于一种受限制的 CPU 模式下运行。</li><li><strong>KVM</strong>：运行在内核空间，提供CPU 和内存的虚级化，以及客户机的 I/O 拦截。Guest 的 I/O 被 KVM 拦截后，交给 QEMU 处理。</li><li><strong>QEMU</strong>：修改过的为 KVM 虚机使用的 QEMU 代码，运行在用户空间，提供硬件 I/O 虚拟化，通过 IOCTL /dev/kvm 设备和 KVM 交互。</li></ul><p><strong>KVM</strong>依赖的Intel/AMD 处理器的各种<strong>虚拟化扩展</strong>：</p><table><thead><tr><th>处理器</th><th>CPU 虚拟化</th><th>内存虚拟化</th><th>PCI Pass-through</th></tr></thead><tbody><tr><td>Intel</td><td>VT-x</td><td>VPID，EPT</td><td>VT-d</td></tr><tr><td>AMD</td><td>AMD-V</td><td>ASID，NPT</td><td>IOMMU</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="内存虚拟化">内存虚拟化<a class="hash-link" href="#内存虚拟化" title="Direct link to heading">​</a></h4><p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-bbe049da6dc1e6cc0025588780440134_720w.jpg" alt="img" class="img_ev3q"></p><p>除了CPU虚拟化，另一个关键是<strong>内存虚拟化</strong>，通过内存虚拟化共享物理系统内存，动态分配给虚拟机。虚拟机的内存虚拟化很象现在的操作系统支持的虚拟内存方式，应用程序看到邻近的内存地址空间，这个地址空间无需和下面的物理机器内存直接对应，操作系统保持着虚拟页到物理页的映射。</p><p><strong>实现</strong></p><p>现在所有的 x86 CPU 都包括了一个称为内存管理的模块<strong>MMU</strong>（Memory Management Unit）和 <strong>TLB</strong>(Translation Lookaside Buffer)，通过MMU和TLB来优化虚拟内存的性能。</p><p><strong>KVM</strong>中，虚机的物理内存即为 qemu-kvm 进程所占用的内存空间。KVM 使用 CPU 辅助的内存虚拟化方式。在 Intel 和 AMD 平台，其内存虚拟化的实现方式分别为：</p><ul><li>AMD 平台上的 <strong>NPT</strong> （Nested Page Tables） 技术</li><li>Intel 平台上的 <strong>EPT</strong> （Extended Page Tables）技术</li></ul><p><strong>EPT 和 NPT</strong>采用类似的原理，都是作为 CPU 中新的一层，用来将客户机的物理地址翻译为主机的物理地址。关于 EPT， Intel 官方文档中的技术如下:</p><p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-580d74d4ebb546a2548d947cd99057d9_720w.jpg" alt="img" class="img_ev3q"></p><p>EPT的好处是，它的两阶段记忆体转换，特点就是将 Guest Physical Address → System Physical Address，VMM不用再保留一份 SPT (Shadow Page Table)，以及以往还得经过 SPT 这个转换过程。除了降低各部虚拟机器在切换时所造成的效能损耗外，硬体指令集也比虚拟化软体处理来得可靠与稳定。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2io虚拟化">2、I/O虚拟化<a class="hash-link" href="#2io虚拟化" title="Direct link to heading">​</a></h3><p>I/O虚拟化（Input/output virtualization，简称IOV）是虚拟化的一种新形式，是来自物理连接或物理运输上层协议的抽象，让物理服务器和虚拟机可以共享I/O资源。</p><p><strong>I/O虚拟化实现</strong></p><p><img loading="lazy" src="https://pic4.zhimg.com/80/v2-92f2704b8fc6a9a93655ec2d2032e8f7_720w.jpg" alt="img" class="img_ev3q"></p><p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-d2f74059c1416a11ed248af7cc141189_720w.jpg" alt="img" class="img_ev3q"></p><p><strong>I/O 虚拟化</strong>方案的选择：</p><ul><li>I/O设备尽量使用准虚拟化（virtio 和 vhost_net）</li><li>如果需要实时迁移，不能使用 SR-IOV</li><li>对更高I/O要求又不需要实时迁移的，可以使用 SR-IOV</li><li>每种方案都有优势和不足，在特定环境下其性能有可能反而下降，因此在生产环境中使用各种虚拟化方式前需要经过完整测试</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3网络虚拟化">3、网络虚拟化<a class="hash-link" href="#3网络虚拟化" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-844d3a638326785c5d3d1a72275c2fdd_720w.jpg" alt="img" class="img_ev3q"></p><p>网络虚拟化 (NV) 是指将传统上在硬件中交付的网络资源抽象化到软件中。NV 可以将多个物理网络整合为一个基于软件的虚拟网络，或者可以将一个物理网络划分为多个隔离和独立的虚拟网络。</p><p><img loading="lazy" src="https://pic4.zhimg.com/80/v2-5cc5a276b830ef22d7f5d2fe329d4613_720w.jpg" alt="img" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="传统网络">传统网络<a class="hash-link" href="#传统网络" title="Direct link to heading">​</a></h4><ul><li>在传统网络环境中，一台物理主机包含一个或多个网卡（NIC），要实现与其他物理主机之间的通信，需要通过自身的 NIC 连接到外部的网络设施，如交换机上。</li><li>这种架构下，为了对应用进行隔离，往往是将一个应用部署在一台物理设备上，这样会存在两个问题，
1）是某些应用大部分情况可能处于空闲状态，
2）是当应用增多的时候，只能通过增加物理设备来解决扩展性问题。不管怎么样，这种架构都会对物理资源造成极大的浪费。</li></ul><p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-8d71a5b9f8e86d8ee0f9d69cc9b11dc4_720w.jpg" alt="img" class="img_ev3q"></p><p>其中虚拟机与虚拟机之间的通信，由虚拟交换机完成，虚拟网卡和虚拟交换机之间的链路也是虚拟的链路，整个主机内部构成了一个虚拟的网络，如果虚拟机之间涉及到三层的网络包转发，则又由另外一个角色——虚拟路由器来完成。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="虚拟化网络实现">虚拟化网络实现<a class="hash-link" href="#虚拟化网络实现" title="Direct link to heading">​</a></h4><p><strong>虚拟交换机-OVS</strong></p><p><strong>Open vSwitch</strong> 是在开源 Apache 2 许可下获得许可的多层软件交换机。我们的目标是实现一个生产质量交换平台，该平台支持标准管理接口，并将转发功能开放给程序化扩展和控制。非常适合用作 VM 环境中的虚拟交换机。除了向虚拟网络层公开标准控制和可见性接口外，它还旨在支持跨多个物理服务器的分布。支持多种基于 Linux 的虚拟化技术，包括 Xen/XenServer、KVM 和 VirtualBox.</p><p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-fdac12ab32a02b00ff00b55cf450e7b9_720w.jpg" alt="img" class="img_ev3q"></p><ul><li><code>datapath</code>是负责数据交换的内核模块，其从网口读取数据，并快速匹配Flowtable中的流表项，成功的直接转发，失败的上交<code>vswitchd</code>处理。它在初始化和<code>port binding</code>的时候注册钩子函数，把端口的报文处理接管到内核模块。</li><li><code>vswitchd</code>是一个守护进程，是ovs的管理和控制服务，通过unix socket将配置信息保存到<code>ovsdb</code>，并通过<code>netlink</code>和内核模块交互。</li><li><code>ovsdb</code>则是<code>ovs</code>的数据库，保存了<code>ovs</code>配置信息。</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="虚拟网络实现技术-overlay">虚拟网络实现技术-Overlay<a class="hash-link" href="#虚拟网络实现技术-overlay" title="Direct link to heading">​</a></h4><p>当前主流overlay技术是 GRE 和 VXLAN技术. 通过增加扩展报文头来实现虚拟网络在物理网络之上传输报文。</p><p><strong>GRE</strong></p><p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-3402328fe1d33c13ab11228351b884aa_720w.jpg" alt="img" class="img_ev3q"></p><p>网络虚拟化使用通用路由封装 (NVGRE) 作为虚拟化 IP 地址的机制。在 NVGRE 中，虚拟机的数据包封装在另一个数据包中。此新 NVGRE 格式数据包的标头具有相应的源和目标提供程序区域 (PA) IP 地址。此外，它还具有 VSID (24 位虚拟子网 ID) ，该 ID 存储在新数据包的 GRE 标头中。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="vxlan">VXLAN<a class="hash-link" href="#vxlan" title="Direct link to heading">​</a></h4><p><img loading="lazy" src="https://pic1.zhimg.com/80/v2-36a25fc5d022c345781721f3303fe250_720w.jpg" alt="img" class="img_ev3q"></p><p>Virtual eXtensible Local Area Network (VXLAN) 是一种将2层报文封装到UDP包(Mac in UDP)中进行传输的一种封装协议。VXLAN主要是由Cisco推出的，VXLAN的包头有一个24bit的ID段，即意味着1600万个独一无二的虚拟网段，这个ID通常是对UDP端口采取伪随机算法而生成的（UDP端口是由该帧中的原始MAC Hash生成的）。这样做的好处是可以保证基于5元组的负载均衡，保存VM之间数据包的顺序。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="容器网络实现">容器网络实现<a class="hash-link" href="#容器网络实现" title="Direct link to heading">​</a></h4><p><img loading="lazy" src="https://pic4.zhimg.com/80/v2-cee5dd08d160d231963390147116992b_720w.jpg" alt="img" class="img_ev3q"></p><p>CNI(Container Network Interface) 是 google 和 CoreOS 主导制定的容器网络标准，它 是在 RKT 网络提议 的基础上发展起来的，综合考虑了灵活性、扩展性、IP分配、多网卡等因素。CNI旨在为容器平台提供网络的标准化。不同的容器平台（比如目前的 Kubernetes、Mesos 和 RKT）能够通过相同的接口调用不同的网络组件。这个协议连接了两个组件：容器管理系统和网络插件，具体的事情都是插件来实现的，包括：创建容器网络空间（network namespace）、把网络接口（interface）放到对应的网络空间、给网络接口分配 IP 等。</p><p>Kubernetes本身并不负责网络通信，Kubernetes提供了容器网络接口CNI（Container Network Interface），具体的网络通信交给CNI插件来负责，开源的CNI插件非常多，像Flannel、Calico等</p><p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-be1e57af14dbaa20d61864d97ad7e941_720w.jpg" alt="img" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4存储虚拟化">4、存储虚拟化<a class="hash-link" href="#4存储虚拟化" title="Direct link to heading">​</a></h3><p>存储虚拟化(Storage Virtualization)最通俗的理解就是对存储硬件资源进行抽象化表现。构建具有统一逻辑视图的存储资源池供用户按需使用。存储虚拟化将各个分散的存储系统 进行整合和统一管理，并提供了方便用户调用资源的接口。另外，存储虚拟化能够为后续的系统扩容提供便 利，使资源规模动态扩大时无需考虑新增的物理存储资源（如不同型号的存储设备）之间可能存在的差异。</p><p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-bcb99322aa9d827612ea94d87bd75ef2_720w.jpg" alt="img" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="实现">实现<a class="hash-link" href="#实现" title="Direct link to heading">​</a></h4><p><img loading="lazy" src="https://pic4.zhimg.com/80/v2-6474dbf08da427b311ef14261d200bc7_720w.jpg" alt="img" class="img_ev3q"></p><p>存储虚拟化的实现方式：
（1） 裸金属+逻辑卷
（2） 存储设备虚拟化
（3） 主机存储虚拟化+文件系统</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="存储虚拟化分类">存储虚拟化分类<a class="hash-link" href="#存储虚拟化分类" title="Direct link to heading">​</a></h4><p><strong>文件、块和对象</strong>是三种以不同的方式来保存、整理和呈现数据的存储格式。这些格式各有各的功能和限制。</p><ul><li>文件存储会以文件和文件夹的层次结构来整理和呈现数据；</li><li>块存储会将数据拆分到任意划分且大小相同的卷中;</li><li>对象存储会管理数据并将其链接至关联的元数据。</li></ul><p><img loading="lazy" src="https://pic2.zhimg.com/80/v2-fbfeb29f939fb169a67a6f179836d2f1_720w.jpg" alt="img" class="img_ev3q"></p><ul><li><strong>块存储</strong>：即提供裸的块设备服务，裸设备什么都没有，需要用户自己创建分区、创建文件系统、挂载到操作系统才能用，挂一个块存储设备到操作系统，相当于插一个新U盘。只实现了read、write、ioctl等接口。SAN、LVM、Ceph RBD、OpenStack Cinder等都属于块存储服务。</li><li><strong>文件存储</strong>：可以简单理解为分布式文件系统，通常实现了POSIX接口，不需要安装文件系统，直接像NFS一样挂载到操作系统就能用。典型的文件存储如NAS、HDFS、CephFS、GlusterFS、OpenStack Manila等。</li><li><strong>对象存储</strong>：提供Web存储服务，通过HTTP协议访问，只需要Web浏览器即可使用，不需要挂载到本地操作系统，实现的接口如GET、POST、DELETE等，典型的对象存储如百度网盘、S3、OpenStack Swift、Ceph RGW等。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="虚拟化管理工具">虚拟化管理工具<a class="hash-link" href="#虚拟化管理工具" title="Direct link to heading">​</a></h2><p><strong>虚拟化管理工具</strong>是指与虚拟化环境及背后的实体硬件对接的软件，它的作用是简化资源管理、分析数据并简化运维。每个虚拟化管理系统都各不相同，但大多数系统都会提供简单的用户界面，还能简化虚拟机（VM）创建流程、监控虚拟环境、分配资源、编译报告，以及自动执行规则。</p><p><img loading="lazy" src="https://pic3.zhimg.com/80/v2-8748101e110adad4e009a44c9b43a35e_720w.jpg" alt="img" class="img_ev3q"></p><p><strong>libvirt</strong>是一套用于管理硬件虚拟化的开源API、守护进程与管理工具。此套组可用于管理KVM、Xen、VMware ESXi、QEMU及其他虚拟化技术。libvirt内置的API广泛用于云解决方案开发中的虚拟机监视器编排层（Orchestration Layer）。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Knowledge/操作系统/输入输出管理"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">输入输出管理</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Knowledge/操作系统/进程&amp;线程&amp;协程"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">进程、线程、协程</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#docker和虚拟化的区别" class="table-of-contents__link toc-highlight">docker和虚拟化的区别</a></li><li><a href="#一什么是虚拟化" class="table-of-contents__link toc-highlight">一、什么是虚拟化</a><ul><li><a href="#虚拟化的本质" class="table-of-contents__link toc-highlight">虚拟化的本质</a></li></ul></li><li><a href="#二虚拟化分类" class="table-of-contents__link toc-highlight">二、虚拟化分类</a><ul><li><a href="#1计算虚拟化" class="table-of-contents__link toc-highlight">1、计算虚拟化</a></li><li><a href="#2io虚拟化" class="table-of-contents__link toc-highlight">2、I/O虚拟化</a></li><li><a href="#3网络虚拟化" class="table-of-contents__link toc-highlight">3、网络虚拟化</a></li><li><a href="#4存储虚拟化" class="table-of-contents__link toc-highlight">4、存储虚拟化</a></li></ul></li><li><a href="#虚拟化管理工具" class="table-of-contents__link toc-highlight">虚拟化管理工具</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Doongz Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f9aa80d1.js"></script>
<script src="/assets/js/main.0ded408c.js"></script>
</body>
</html>