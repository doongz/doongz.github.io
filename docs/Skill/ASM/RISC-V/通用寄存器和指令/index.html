<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Skill/ASM/RISC-V/通用寄存器和指令">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">RISC-V 通用寄存器和指令 | Doongz&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doongz.github.io/docs/Skill/ASM/RISC-V/通用寄存器和指令"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RISC-V 通用寄存器和指令 | Doongz&#x27;s Site"><meta data-rh="true" name="description" content="来源 1：https://www.icfedu.cn/"><meta data-rh="true" property="og:description" content="来源 1：https://www.icfedu.cn/"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doongz.github.io/docs/Skill/ASM/RISC-V/通用寄存器和指令"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Skill/ASM/RISC-V/通用寄存器和指令" hreflang="en"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Skill/ASM/RISC-V/通用寄存器和指令" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Doongz&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Doongz&#39;s Site Atom Feed">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bbae31c2.css">
<link rel="preload" href="/assets/js/runtime~main.a61035f3.js" as="script">
<link rel="preload" href="/assets/js/main.7aad8990.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home page</b></a><a class="navbar__item navbar__link" href="/docs/catalogue-algo">Algorithm</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/catalogue-skill">Skill</a><a class="navbar__item navbar__link" href="/docs/catalogue-knowledge">Knowledge</a><a class="navbar__item navbar__link" href="/community/support">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Courses</a><ul class="dropdown__menu"><li><a href="https://github.com/doongz/mlc-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Machine Learning Compilation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs229" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stanford CS229: Machine Learning<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/aics" target="_blank" rel="noopener noreferrer" class="dropdown__link">中国科学院 智能计算系统<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs50-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Harvard CS50’s Introduction to AI with Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.824" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.824 Distributed Systems<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/os-workbench" target="_blank" rel="noopener noreferrer" class="dropdown__link">南京大学 操作系统：设计与实现<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.s081" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.S081 Operating Systems Engineering<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/doongz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/catalogue-skill">Catalogue</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">ASM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">RISC-V</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">汇编语言格式及ABI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/RISC-V简介">RISC-V 简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Skill/ASM/RISC-V/通用寄存器和指令">RISC-V 通用寄存器和指令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/扩展寄存器和指令">RISC-V 扩展寄存器和指令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/流水线&amp;硬件模块&amp;译码模块">流水线 &amp; 硬件模块 &amp; 译码模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/ALU模块&amp;branch模块">ALU 模块和 branch 模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/LOAD&amp;STORE-UNIT">LSU &amp; SRAM &amp; GPIO模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/CSR读写控制">CSR读写控制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/EXU模块和CPU运行">EXU模块和CPU运行</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/RISC-V总线和流水线">RISC-V 总线和流水线</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/RISC-V定时器及中断">RISC-V 定时器及中断</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/riscv-asm-manual">RISC-V Assembly Programmer&#x27;s Manual</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/ASM/x86/X86-64汇编">x86</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Android/Android概述">Android</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/C/基础知识/数据类型">C</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/C++/基础知识/基本数据类型">C++</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Golang/基础知识/条件判断">Golang</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Skill/LaTeX/">LaTex</a><button aria-label="Toggle the collapsible sidebar category &#x27;LaTex&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Linux/POSIX">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Skill/Markdown/">README</a><button aria-label="Toggle the collapsible sidebar category &#x27;README&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Skill/Mermaid/">mermaid</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Python/运算符">Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/SQL/数据库理论">SQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/工具链/工具&amp;网站">工具链</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/常用CLI/docker-CLI">常用CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/设计模式/多态和多态性">设计模式</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ASM</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">RISC-V</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RISC-V 通用寄存器和指令</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>RISC-V 通用寄存器和指令</h1><p>来源 1：<a href="https://www.icfedu.cn/" target="_blank" rel="noopener noreferrer">https://www.icfedu.cn/</a></p><p>来源 2：<a href="https://ica123.com" target="_blank" rel="noopener noreferrer">https://ica123.com</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="一通用寄存器和汇编指令分类">一、通用寄存器和汇编指令分类<a class="hash-link" href="#一通用寄存器和汇编指令分类" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1risc-v通用寄存器和程序计数器">1、RISC-V通用寄存器和程序计数器<a class="hash-link" href="#1risc-v通用寄存器和程序计数器" title="Direct link to heading">​</a></h3><p><strong>CPU中包含32个通用寄存器，有时候也会被称为通用寄存器文件，如图1所示。通用寄存器的命名方式为X0-X31</strong>。其中第一个寄存器X0的值，被硬连线到0，因此值永远是0。其他寄存器X1-X31都是可读可写的。0-31也叫做索引号，索引号也可以理解为寄存器的地址，当指令需要调用通用寄存器时可以通过索引号查找。之后将会在介绍FPGA程序时讲解如何设计读写寄存器文件。对于32位系统，所有通用寄存器的宽度都是32bit，寄存器总个数也是32个。</p><p><strong>PC(program counter)是程序计数器，也是一个寄存器</strong>。在CPU中PC寄存器并不和上述32个通用寄存器在一起，寄存器文件中不包含PC。PC的宽度和通用寄存器的宽度一样。XLEN的值一般跟RISC-V CPU架构有关系。 如果是32位架构的CPU，那么XLEN的值就是32。图1中XLEN-1 = 32-1 =31，即在一个通用寄存器中的最高位为31。在64位CPU中通用寄存器的宽度是64，同时PC宽度也是64位，最高位为64-1 =63。</p><p><img loading="lazy" alt="4" src="/assets/images/4-f259c3d42583e8c1da805c36f69d39bc.jpeg" width="376" height="784" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2risc-v汇编指令类型">2、RISC-V汇编指令类型<a class="hash-link" href="#2risc-v汇编指令类型" title="Direct link to heading">​</a></h3><p>RV32I 可被分为六种基本指令格式：</p><ol><li>用于寄存器-寄存器操作的<strong>R</strong>类型指令</li><li>用于立即数和访存load操作的<strong>I</strong> 型指令</li><li>用于访存store操作的<strong>S</strong>型指令</li><li>用于条件跳转操作的<strong>B</strong>类型指令</li><li>用于长立即数的<strong>U</strong>型指令</li><li>用于无条件跳转的<strong>J</strong>型指令</li></ol><p>图2列出来6种基本指令的机器码格式。</p><p><img loading="lazy" alt="5" src="/assets/images/5-e79f266be4cd26c4f221b9a7261d320e.jpeg" width="877" height="311" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="r-type">R-Type<a class="hash-link" href="#r-type" title="Direct link to heading">​</a></h4><p><strong>R-type是无立即数(immediate number，imm，无须从寄存器中取值，就能立即得到的数)的操作</strong>。R-type汇编指令机器码的二进制格式如图2所示。一条二进制指令长度是32-bit。bit 0-6(7个bit)是opcode (operation code) 操作码，用来标识出指令的类型，图3是部分R-type 汇编指令的opcode，可以看到R-type指令所有的opcode都是相同的，为011_0011。但是在bit 12-14的funct3和bit 25-31的funct7是不一样的，并以此来区分不同的R-type汇编指令。也就是说，opcode决定指令的大致分类，funct3和funct7决定指令更细致的分类。R-type指令的Bit 7-11是rd(destination register，目的寄存器)的索引号。rd寄存器是用来存储结果的寄存器。rs1(source register 1)和rs2(source register 2)叫做源寄存器，多数情况下指令需要读取这两个源寄存器寄存器的值，用于之后的运算。rs1的索引号在bit 15-19，rs2的索引号在bit 20-24。下面对如何使用寄存器索引号进行举例说明。</p><p><img loading="lazy" alt="6" src="/assets/images/6-cd9d05753a97870d87624719aaf3c5a3.jpeg" width="701" height="224" class="img_ev3q"></p><p>当在指令中rd的位置索引号的值为5’b00011，也就是十进制的3时。CPU收到这条指令后会检测到bit 7-11的值是3，就会在32个通用寄存器中找到X3寄存器作为rd寄存器，最后把结果写到x3寄存器里。如果此时在rs1 和rs2的索引号位置(二进制汇编指令)中bit 15-19 和bit 20-24的值是2和4，CPU会检测到在指令中rs1，rs2对应的通用寄存器是x2和x4后，就会从寄存器x2和x4中读取值并进行运算。</p><p><strong>注意：</strong></p><p><strong>RISC-V汇编指令的格式是非常明晰的。在实际编码过程中，编码位置的安排都是有意义的。例如3个寄存器索引号在不同指令格式中的编码位置是永远不变的，Rd在bit 7-11，rs1在bit 15-19，rs2在bit 20-24。即使有些指令中可能没有用到部分寄存器，比如第二个指令类型I-type中没有rs2，但是rs1和rd的索引号也在对应的位置上。又例如在S-type里funct3在bit 12-14，与在R-type中的位置一致。Opcode是所有指令格式都有的，而且位置不变，永远都是bit 0-6。</strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="i-type">I-Type<a class="hash-link" href="#i-type" title="Direct link to heading">​</a></h4><p>从R-type汇编指令的机器码格式基础上看，唯一差别是，I-type的bit 20-31(高12位)是一个立即数。其它部分与R-type很相似。当然，I-type的opcode一定与其它种类汇编指令的opcode值不同，因为对应的具体运算不同。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="s-type">S-Type<a class="hash-link" href="#s-type" title="Direct link to heading">​</a></h4><p>S-type指令的特点是没有rd寄存器，在该类指令中立即数(imm)被分成了两个部分，imm<!-- -->[11:5]<!-- -->在bit 25-31，imm<!-- -->[4:0]<!-- -->在bit 7-11。imm<!-- -->[4:0]<!-- -->这5位占用了rd的位置，说明该指令格式不需要回写。imm<!-- -->[11:5]<!-- -->占用了funct7的位置。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="u-type">U-Type<a class="hash-link" href="#u-type" title="Direct link to heading">​</a></h4><p>U-type指令中提供了一个20位的立即数(imm<!-- -->[31:12]<!-- -->，将20位立即数左移12位)。最后的运算结果与20位立即数相关，并把结果回写到rd寄存器。Opcode决定其运算种类。 U-type中没有funct3，rs1，rs2和funct7，这种类型的指令结构非常简单。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="b-type">B-Type<a class="hash-link" href="#b-type" title="Direct link to heading">​</a></h4><p>B-type指令主要作为跳转指令使用，并且是带条件跳转(conditional jump)，也就是通过判断条件是否成立来决定是否跳转，可以类比为verilog语言里的if语句。在图2中可以看到B-type的机器码结构，指令中不包含rd寄存器和funct7，但是包含rs1，rs2，funct3和立即数。立即数被分为两个区域，imm<!-- -->[12|10:5]<!-- -->和imm<!-- -->[4:1|11]<!-- -->。B-type指令立即数的编码是打乱顺序的，原因这里将不详细介绍，主要是为了增大与其他格式的共用部分。但是编码被打乱了，那么在CPU执行时要进行调整相应的译码顺序，且译码后CPU需要把打乱的立即数按照顺序还原。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="j-type">J-Type<a class="hash-link" href="#j-type" title="Direct link to heading">​</a></h4><p>该指令格式非常类似于U-type，也是只有Rd寄存器和立即数以及opcode。同时J-type的立即数也是打乱的。那就意味着在译码时CPU要先把立即数按顺序拼起来以还原本来的立即数。</p><hr><p><strong>注意：</strong></p><p><strong>B-type指令的立即数字段是在S-type的基础上旋转了一位，同样的，J-type的立即数字段是在U-type基础上旋转了12位。因此RISC-V实际上只有四种基本格式，但可以保守的认为有六种格式 <!-- -->[2]<!-- -->。因为B-type和J-type的立即数都没有bit 0位，所以它们的立即数都是2的整数倍。</strong></p><p><strong>机器码全为0或者全为1的情况被认为是非法的RV32I指令，但是它们会被经常用来帮助调试或捕捉常见的错误 <!-- -->[2]<!-- -->。</strong></p><hr><p>什么是立即数</p><p>立即数通常是指在<a href="https://baike.baidu.com/item/%E7%AB%8B%E5%8D%B3%E5%AF%BB%E5%9D%80%E6%96%B9%E5%BC%8F/6686429" target="_blank" rel="noopener noreferrer">立即寻址方式</a>指令中给出的数。可以是8位、16位或32位，该数值紧跟在<a href="https://baike.baidu.com/item/%E6%93%8D%E4%BD%9C%E7%A0%81/3220418" target="_blank" rel="noopener noreferrer">操作码</a>之后。如果立即数为16位或32位，那么，它将按“高高低低”的原则进行存储。</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MOV AH, 80H　</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ADD AX, 1234H　</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV ECX, 123456H</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV B1, 12H　</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV W1, 3456H　</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ADD D1, 32123456H</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其中：B1、W1和D1分别是字节、字和双字单元，为第一操作数（目的操作数）</p><p>以上指令中的第二操作数（源操作数）（80H、1234H）都是立即数</p><p>在汇编语言中，规定：立即数不能作为指令中的第一操作数（目的操作数）。该规定与高级语言中“<strong>赋值语句赋值语句的左边不能是常量</strong>”的规定相一致。</p><p>立即数寻址方式通常用于对通用寄存器或内存单元赋初值。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="二i-type整数寄存器-立即数指令">二、I-Type整数寄存器-立即数指令<a class="hash-link" href="#二i-type整数寄存器-立即数指令" title="Direct link to heading">​</a></h2><p>本文将先从I-type的整数寄存器指令开始，详细介绍每一种汇编指令包括的具体指令。</p><p><img loading="lazy" alt="7" src="/assets/images/7-e79f266be4cd26c4f221b9a7261d320e.jpeg" width="877" height="311" class="img_ev3q"></p><p><strong>除了CSR指令之外，所有出现的立即数都是有符号位扩展的，并且通常是在指令中最左边的可用位上 <!-- -->[1]</strong>。如图1所示，</p><p>所有出现立即数的指令种类(I-type，S-type，B-type，U-type和J-type)，立即数的符号扩展都取决于指令的bit 31(也是立即数的最高位，比如J-type的imm<!-- -->[20]<!-- -->)。</p><p>所以I-type中提到的立即数都是有符号位扩展的。</p><p>这里举例解释一下带符号位扩展，比如有一个12位立即数，</p><p>如果最高位是0，则表示立即数是正数，</p><p>如果最高位为1，表示立即数是负数。正数带符号扩展时高20位全部填充上0，负数带符号扩展时高20位全部填充上1，之后再进行相加或比较。而无符号扩展时，高20位都是填充0。</p><p>绝大多数整数计算指令对保存在整数寄存器中的XLEN位进行操作(RV32I里对应的整数寄存器为32位)。<strong>整数计算指令</strong>要么使用I-type指令为寄存器-立即数操作，要么使用R-type指令为寄存器-寄存器操作。</p><p>I-type对应的opcode被命名为OP-IMM，</p><p>I-type对应的immediate，固定为12位，被命名为I-immediate，如图2所示。</p><p><img loading="lazy" src="/assets/images/8-cc205b207a39bbb670395e914f8c8179.jpeg" width="931" height="157" class="img_ev3q"></p><p>I-type总共有15条指令，这里先介绍前6条指令，包括以下：</p><ol><li>ADDI</li><li>SLTI</li><li>SLTIU</li><li>ANDI</li><li>ORI</li><li>XORI</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="addi--mv--nop">ADDI &amp; MV &amp; NOP<a class="hash-link" href="#addi--mv--nop" title="Direct link to heading">​</a></h3><p>ADDI指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADDI rd，rs1，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] + sext(imm)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>举例说明：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADDI x13，x12，5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12寄存器里的值加上<strong>有符号扩展</strong>的立即数5，并将结果放置进x13寄存器里。</p><p><img loading="lazy" src="/assets/images/9-3ddb64b102333cf02b43669f34f03c4a.jpeg" width="777" height="77" class="img_ev3q"></p><p>可以看到，其机器码如图3所示，ADDI的</p><p>OP-IMM为001_0011</p><p>funct3为000</p><p>immediate为12’b0000_0000_0101</p><p>rs1为 5’b0_1100</p><p>rd为 5’b0_1101</p><p>所以<strong>ADDI x13，x12，5</strong>对应的机器码为0000_0000_0101_01100_000_01101_0010011，对应的16进制为32’h0056_0693</p><p>经过译码后，只要机器码opcode和funct3对应的位置为001_0011和000，那么这条指令一定为addi。ADDI中“ADD”表示加法，“I”表示立即数，“ADDI”全称意为立即数加法。该指令是把rs1寄存器中的值和<strong>有符号位扩展</strong>的立即数相加，之后把相加得到的结果存到rd里去(溢出的部分忽略。溢出处理可以由软件实现，<a href="https://www.icfedu.cn/archives/9518" target="_blank" rel="noopener noreferrer">这里</a>介绍如何处理)。</p><p>这里要引入一个概念，“伪指令(pseudo-instruction)”，伪指令是指在汇编指令集里不存在的指令。这些指令对于汇编用户来说表达方便，而且经常使用。</p><hr><ul><li>例如汇编程序中经常会出现寄存器之间的搬移，就有了伪指令MV(move)，指令书写格式：</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">MV rd，rs1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这个指令是把rs1里的值搬移到rd中去(x86中就有move指令，mcs-51里也有这条指令)。</p><p>其实际代表的含义是<code>ADDI rd，rs1</code>，0  也就是说把rs1寄存器中的值，跟后面的立即数值0加起来，最后存到rd寄存器中。因为rs1加零后rs1的值不变，所以MV指令实际上就是把rs1的值移动到rd里。用户在写汇编程序的时候可以写这样一条伪指令MV，在程序编译时编译软件会把这条指令翻译成<code>ADDI rd，rs1，0</code>，随后把ADDI这条指令送到CPU运行。</p><ul><li>还有一条使用频率高的伪指令，NOP(no operation，无操作)，指令书写格式：NOP</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其实际代表的含义是 <code>ADDI x0，x0，0</code>  之前有提到过，x0的值无法改写，只能读取，且永远为0，那么 <code>ADDI x0，x0，0</code>做了一次无结果的加法，将x0 + 0的结果放入x0，其唯一作用是将PC值推进。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="slti">SLTI<a class="hash-link" href="#slti" title="Direct link to heading">​</a></h3><p>SLTI指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLTI rd，rs1，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] &lt;𝑠 sext(immediate)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图4所示，SLTI的OP-IMM为001_0011，funct3为010。SLTI中S代表set置位</p><p>作用是<strong>有符号比较</strong>rs1和<strong>经过符号扩展的立即数</strong>后置位rd。把rd寄存器中的值，置成0或1。这里需要注意的是指令中判断条件成立则置位为1，条件不成立置位为0。这条指令的置位条件是LT：less than，小于。I代表立即数。所以判断条件是rs1的值是是否小于立即数。SLTI全称为set if less than immediate。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLTI x13，x12，5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>比较x12寄存器和立即数5(<strong>有符号扩展</strong>后为5)，如果x12寄存器里的数小于5(<strong>有符号数比较</strong>)，将x13置成1。</p><p><img loading="lazy" src="/assets/images/10-7e4c6557bbaaf10f54b75b4a5410954b.jpeg" width="773" height="78" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sltiu--seqz">SLTIU &amp; SEQZ<a class="hash-link" href="#sltiu--seqz" title="Direct link to heading">​</a></h3><p>SLTIU指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLTIU rd，rs1，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd]= x[rs1] &lt;𝑢 sext(immediate)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图5所示，SLTIU的OP-IMM为001_0011，funct3为011。</p><p>SLTIU与SLTI的唯一区别是“U”代表unsigned number(无符号数)，不同之处在于将立即数<strong>有符号扩展</strong>，当作<strong>无符号数</strong>比较后置位。如果对8位二进制数进行比较。-1：8’b1111_1111 , -2：8’b1111_1110。当作为有符号数比较时-2 &lt; -1，如果作为无符号数比较依然成立，但是如果用-2和+1：8’b0000_0001进行无符号数比较。此时1111_1110 &gt; 0000_0001。(254 &gt; 1)。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLTIU x13，x12，-1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>比较x12寄存器和立即数-1(<strong>有符号扩展</strong>后0xffffffff)，如果x12寄存器里的数小于0xffffffff(<strong>无符号数比较</strong>)，将x13置成1。</p><p><img loading="lazy" src="/assets/images/11-241e47859ad55f26fe573c2e54aa280d.jpeg" width="741" height="75" class="img_ev3q"></p><ul><li>伪指令SEQZ(set if equal to zero，如果等于0，就进行置位)：<code>SEQZ rd，rs1</code> (等价于<code>SLTIU rd，rs1，1</code>)，该伪指令是SLTIU中的一个特殊情况，会被经常使用。因为无符号数中rs1比“1”小的情况只有一种，那就是rs1 = 0， 所以如果SLTIU rd，rs1，1成立，也可以看作是SEQZ rd，rs1 中 rs1 = 0成立。</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SEQZ rd，rs1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="andi">ANDI<a class="hash-link" href="#andi" title="Direct link to heading">​</a></h3><p>ANDI指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ANDI rd，rs1，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] &amp; sext(immediate)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图6所示，ANDI的OP-IMM为001_0011，funct3为111。用法是将立即数进行<strong>符号位扩展</strong>成32位跟rs1进行按位相与(&amp;)，结果写到rd中。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ANDI x13，x12，5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12寄存器中的数与有符号位扩展后的立即数5按位与，并将结果写入x13寄存器。</p><p><img loading="lazy" src="/assets/images/12-b5dbaf784dc18b818ba09e542db236b3.jpeg" width="754" height="74" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ori">ORI<a class="hash-link" href="#ori" title="Direct link to heading">​</a></h3><p>ORI指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ORI rd，rs1，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] | sext(immediate)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图7所示，ORI的OP-IMM为001_0011，funct3为110。用法是将立即数按<strong>有符号数扩展</strong>成32位跟rs1进行按位或(or)，结果写到rd中。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ORI x13，x12，5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12寄存器中的数与<strong>有符号位扩展</strong>后的立即数5按位或，并将结果写入x13寄存器。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xori--not">XORI &amp; NOT<a class="hash-link" href="#xori--not" title="Direct link to heading">​</a></h3><p>XORI指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">XORI rd，rs1，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ^ sext(immediate)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图8所示，XORI的OP-IMM为001_0011，funct3为100。用法是将立即数按<strong>有符号数扩展</strong>成32位跟rs1进行按位异或(xor)，结果写到rd中。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">XORI x13，x12，5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12寄存器中的数与<strong>有符号位扩展</strong>后的立即数5按位异或，并将结果写入x13寄存器。</p><ul><li>伪指令NOT：<code>NOT rd，rs1</code> (等同于<code>XORI rd，rs1，12’hfff)</code>。NOT是取反指令，作用是把rs1中的值取反放到rd中去。因为1和任何数异或都是取反，比如 1 xor 0 = 1， 1 xor 1 = 0，所以12‘hfff符号扩展之后与rs1异或的值就是相当于取反。</li></ul><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NOT rd，rs1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><p><strong>注意:</strong></p><p><strong>RISC-V指令具有灵活性。以上指令中机器码格式都没有强制规定rs1，rd是某一固定的寄存器，用户在写汇编程序时可以根据需要，在32个通用寄存器中挑选相应的寄存器来作为rs1和rd，rs1和rd甚至可以为同一寄存器。</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="三i-type-移位指令">三、I-Type 移位指令<a class="hash-link" href="#三i-type-移位指令" title="Direct link to heading">​</a></h2><p>本文将继续介绍I-type中其余的整数寄存器-立即数指令(这里是属于I-type的移位指令)</p><p>图1所示为移动次数为立即数的移位指令，后面会介绍其他的移位指令。从机器编码格式上可以看出这三个指令与上文提到的6个I-type指令有些不同，本文的I-immediate被分为两个部分：</p><ul><li><p>imm<!-- -->[11:5]<!-- -->中的imm<!-- -->[10]<!-- -->（机器码的bit 30）用来<strong>区分移位类型</strong>，其中SLLI和SRLI指令机器码的bit 30为0，而SRAI指令机器码的bit 30为1 <!-- -->[1]<!-- -->。</p></li><li><p>imm<!-- -->[4:0]<!-- -->或shamt<!-- -->[4:0]<!-- -->（shift amount）意为<strong>移动量</strong>，可以看到SLLI，SRLI和SRAI的shamt的范围都是<!-- -->[4:0]<!-- -->，这是因为在RV32I中，最大的移位量是31位，也就是2^5 – 1。</p></li></ul><p><img loading="lazy" src="/assets/images/13-1ef9a739294bf3fd87120db5efe1fd6a.jpeg" width="869" height="178" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="slli">SLLI<a class="hash-link" href="#slli" title="Direct link to heading">​</a></h3><p>SLLI(shift left logical immediate)，<strong>立即数逻辑左移</strong>指令格式为 </p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLLI rd，rs1，shamt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ≪ shamt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图2所示，SLLI的OP-IMM为001_0011，funct3为001，IMM<!-- -->[10]<!-- -->为0。移动多少位由imm<!-- -->[4:0]<!-- -->来决定。该指令将rs1中的值左移shamt<!-- -->[4:0]<!-- -->，rs1的低位补零，结果写入rd中。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLLI x13，x12，3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12寄存器中的值左移3位，并将结果写入x13寄存器中。</p><p>OP-IMM为001_0011</p><p>funct3为001</p><p>shamt为5’b0_0011</p><p>bit 25-31 为7’b000_0000</p><p>rs1为 5’b0_1100</p><p>rd为 5’b0_1101</p><p>所以<strong>SLLI x13，x12，3</strong>对应的机器码为0000000_00011_01100_001_01101_0010011，对应的16进制为32’h0036_1693</p><p><img loading="lazy" alt="14" src="data:image/jpeg;base64,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" width="846" height="107" class="img_ev3q"></p><p><img loading="lazy" alt="15" src="data:image/jpeg;base64,UklGRlIZAABXRUJQVlA4IEYZAABQnwCdASqZA+AAPpFGnUslo6YlIlS6qMASCWlu05du9++DxzJUWTzvNAPWFbNK1s8ic5Zx9Ptremz/fdP/1Ac5xugHra/x31KPPOvoH1h/ivWD4sflPDXxHeZPcX+7+3L/HddP9X6k3yf7l/rP7p/hffL/Ef6HxN+Lf896hf5V/P/81vaIAv0P+1f8zw1vnj1U/OP7T7An8u/rH/F9WvBd9U9gn9J+hV/4/5n0tfT37S/Ax+tw6bIEzgfRHICeHVec3587QJYU7o9yI4gAqevmfcfJVVIGh5PPRaHCjPyAzdgA7Qje4Nkj5fFxvv7dFGviF7bo5a7Rok+ZenfWNWmRuIZM5yRM6/KjJeuIZeWcn9F3LsYF6h5gW2wwxqlenLwQtIau5Ln4PB7OHF3KjbEqd1EJIv9BZhexc8qYOpsJ79pP+Yayxg6T8CdiyjqCX/58bjrDc44l+2EJJa88t6W3LllNR8634OTxPtltg8Kc1PSAM7flsrZNYHZDBxrs9eQ13aCKmyrXOemdrryPzz+6bVAhUsxBMTyqLv0r3sYw3wk7HGZT6NuZbpe4ArpQEztwTF7hdEOpQwoVZknc1hT8cDtqBpPC1a/RZq0bWpO0C5JoOBcQzas8GwKxNvKZ+JvVz/RsiWFR+mEx+HoQI1JxW6/CisZBLvSrh1C/Ogn01slhpBXCTQWYSMqe8Z12aoZLVWtW2GQ7rSNGhxMFHick5pHALbspPvjhvuWBbtXUjLPBgTzt1MC8rPIdEEgJskhOe4fkJ9crCVyaPBz+FzRZ2sMS5pT+SLi0pWhP/ybTOI2Lr3cBmyODO7Kd1Xb3r1WxXIpUdmd3BDy44kInarvDaxllPA1lg8Rd/DKH5HGETqRLk4TwPesvS61t1yH9uckuwcaif2COJZakSXgfkfnWnYBPyfTpp7CvgHf5PmJJ1Q+AdmEobV+aYcxGVOgd/k+bYkL5MyDv8nzbEs07B49im/fD7vPTWCIHBJxu04lH3HFOPCSi4bZJsTLuxajlPrFAzRfcecINE3JjhBas+O957Vi1ZLU/LSCrIuzGZT/GFrf3mvIvZPpfcOWBeaN/6aVXKcqv2X1xdap4BGlfq2SbsfULdISG4AxoYfTEH/VYpA5ZuAeGKDZmEu4K1Euhpn9hhPz8+6qTIUubI+a4pizb59YGUCrA8KBXewnCRvaKniO8pEc+USlp4nS6NfCmcHR1ZN+CXFX3/q9mcAcmtb7y7Psf3NFPyts2rGuBsKXcpsxWYmInhraOAw0dXVY4kVHqSF3PioHQufz4l4ypl4S9VXjGCIIu7h3gfSkN7ymmd4FrqlB2VGUL/vNaRc4gp2BdEXwGt6UXaG+LyjOFkIc8jHhUWJKoWlM+cVBBYUVwpDPgKMg5qnVBG4kZ1oQ54+ATTPlZ6MAxTlyGrPMmAiP1v2L38zhg17hrsCU2KHNOtnZ0hoSuHDpt0KIYTxIEpp7DWd2UT5LgoapSPn7cty2WrnQ3NzJ8ksLeYxVqUpSolcPYzFyqkgSkPy7DPpTtbTb08AE82MZfxM+nbNQv/rRhhfwbjZlXB9wVsAJx7JOxP2nhYGeDQFaeDYj5OBL++xUdy5Uv4R1bQU+mPjPxorJX8I55OKfPhXkJ97FTpA7JX8IdvRIfSY0X6iY9E5DG78I6vRC/THvt5Adkr+EdXokPpj4z8gOyU3COr0SH0x8ZF5DckAD++pN2km2JrYA0g27HDYxyLEBe6+FiSp+vBUVCRIT9Vof2hRIAmfhBa8z/GA0CMT5O7qnnL9jzAeBPgk0eIlFm0AnLkK5z6i+pCBxH/0yXSHoHHGptXscp7eZrq+AjTJW3+R/hk296qF1ft6ljET6xsrbc7nCb7ZEWDmNsmXKAQOajNN7AN3H/m4coJa7dLvGNnlJ860ZSa9QHlxyzck40wly15YJRHtMU0IU7flBsT83N/TW72eYhXeozC7feoxjUz9C7uKpilbVLSuS2n70t2hBBuyNedZsXz+u83Ebv+S7wM4jutuwaV6Hu6fJiE3wp9YV0gFBTF43Bf3FQNvmh65AS0rDDCKDytv2Dj9Di5tOCRbjuJ6btxp4HccYgjRR0y822EDnGdQjvN6h9/mSVqrXMQ/6Bpx4NOzArqIrLuXAewl242pc9yXNcYl1W/TLKy1UO9BiSCBs/deDNt3Vy6bnbJ84NcmyNTAr/w8YXVpyruqexC8V5EFFPt4CyfTJhzNGFTkZ/yPx4mb9z9ncPIJ8sJ8aCiAHQ176ZltwETgQAC/bTyMu8QAEVAZBwyOmYKgSHDLLcA4EndgoAH0Zh1T8jXPwMn8bzL+aS1h2rvkgwNKsAXxtRYAnSFvUPbkP59UssP6/nw16ebCGWAoKbZkJ319z5kWDwCqg4IqLvHNZesFikL6FXO2w6RfpaKNWDPwjN/X/P7J/EWya63eOHi1/QIVLnh6m5m3/hZoLBF8/EB0MEpbS3XIiezYAjE+GPrgpSEVT48Nu/uG2J5Yt7geGceUSNlvhk3R/Sn9LS639LZJmbSbtetda0XDSOndJYjlMmve1ZXXZn2exHO7DJR8v2jw7MH1LyZN3rvB/6bFtttugtd9dcAMOdyXaWUNqP7uFxZAueywl5OfD6PtEaaCoktb+OKRNG7sh1hoMLMam/w6V99f2ZPxsJGyXyTMEv4QarXXpkq+KAf087sPosJi082UNmuCYPyjOFAmWVFy6Wnejut/4eTx626+bCzh0ScDfA09SFo22q1mHwqZ+oAC3dmVMsCTEYZAFCdA0cXnDlKjbj/6bb27a41fIr9/iZ2SblrW8IJb+FKb0nkbdS6OBBM3ehCS+Uh+6Nm+Oj/X7oHpepnqJrFvLtdCZzQW776fA1NkNzyUgjvv2J1BvqVsC3bmZuHWMQabPWgalRABQ++x3uLMZaAr73EQLL+xBw4VnTWHB0nIWR8xJv7JTJXnl0JZNwv28OKM1yvG+DI4NctKtbehleRyIlWTvW3Q1vTxxayy1sqsljXwwf7OAwE36J0K5N0vvreulDDEZ+t6THmKNTUy24lxGS7mjSpVSNY6YiXLmie3iLe+tBSS4T5LD2YtsMSo0b6ZJCGXo0Y7ajMf9aYkHcCfBe/7/ap8HZmrcP1Ldhz11SoEEXDZKzeZ9CWHkCyq+Uk8nQ775i+nZmq+MsuRyirDmySuTkyyfLRxrA0H9/EI9PKjvG+73K2NG5sEkzWaCBZiZP0rv1Ryfjvy5AExbx8fJf8eI9YJFJEeiaYoLvuYTu0vJw3g76cT55x2dxPehuEzUBfEB+wfEBJWXifX/i1HasbAvLYj7bcLiTyZEhrl11eOt9vZFsRDqfEUQC62CH/IHr6u0xq5ng6ISx4hcqXwsKDPvEVtubBDhH9x+JtcVyE7RIrirUYMlgVfWDIISYa6S/PHxi5P57kNS4rxAeD+C0zoBFbq5zT6gyHF4igoDKHkAEHq8r9v4zfdUXWBn8r0UPyGICU6FHb0SoAe6kB7BT7UM1gwhwdu4Uq2o1b85L5xm2AmGgm7MfOPYkodv+UsXDX5JVZfdFzbuvfH1eCchvN6IG4ss8VTonuj6wsJcwV1Ga8mqfACnjd+rnlBI5jd91xFbFKqADpnISI4fyYxYhdkhY9jCwsYYtm5H++VO+DxrR6IXFl0g8pECqgwuIjWm8H9dBaE4TxhMWybEbVpHYe7cz7CFphLUe7QVLpjBJoH87D0J6a9BtFttID/GfQfG3y9YxFvWjukcCePZ2GWoAdd9bEVe80ft+nopQB2hAfDLKwXmxFd9art3eYl2y+ndaVi5Psqa9cMZxaW27eb/TUMp2COsLULaDMA6bCCCEreZmCl/gkUzZQjQUpIb2y2z6kdGatGcsNqrPlhtvjEFgfE7wa5oQHyvBbrA4dW9TH9hqSm0hWzRCrTxRNsaqqGtaa0i+8BAgRmzX1EQRmhb7SZKqaIvUnI38xQmhhHBWpR4ZCpjFjXG8unDdnTD9cANJ4aXHqX7xbR2W5CXKc/T58EkPKdhFKKcB98o4KDynPUW2JouJtnds4FjyY9Zg40xa0aeGVbd/gGJkhAUXlX2Y1XyglHBeya9/iu+acyP3ugDqz8VcsBpL498IzD+cSk1fBa4LJDG75xsLJaUevoEKxPdMRxkCAsf1rwRkVgbcHZ+wSb0y1GR3ry5pO0zsHXIk38d1vRZQiWN7TRIlRbtPUlLG0qihSGR6aG7X8fjLLkPDo7JsCdqBdcKo9E3858k6/JjeSpkMdxHFp4xUJQgGecNoDO/llWciiRlR/eaNu64LBaWqwRlzxyL+Lc9NH5w2ghiA/OYOPzYaomY63gZUAKbAAMUKVzxpnk36hFPmrbug9KsAe53PqkCkuLaoFYdlLqT96pLrBNddnW09N8G6+PwEY8negWw1q67cokil+8oDNTnIaDDjR27lRNoHqBQsd1LOEsPQ2TB0cfO/6Q5Tc3donlYSfBz/2z26BUSg/2u+iR8kPgkybkjIXREWCdTLiuDc04qNow6ZfBr9AptT13HbxWBX/xN35rq5utkK9+NTAU+8M/B2tVLIND6ikdDAH5F488ygGKUUEfYm5DN/H8exA0g+RUvYEkqliJCmbyCPmoPcszuFq1v+aaKjlG/Z4KFEwZYzXFS8Nd+sYjq2pwhp36dKC+B8bqZ7h1F9oeooHvonAg1G/BsynFvWn1yBmAZRCDHDOWCyIcg6HFacQumTTx3omxOuLT/nS1vpqM1bfBNnOGd9V/meePLbW3fzW56ypr70PTxCYhdrCuEpYcl8fF8ZXK/H5ElwKYcOPXoXc1jIcYIo+SqJatckFDL6SQKZwYv0kBqjbqJY+krkzWH/gdYANR7WBpuHWgWqw1wKddL+HJeXurflU6uFj+Tok6S8MsNMRvPD+/Sx//aljZhCSD26ocvIKUEixLA09K802csMtrru605KyA61HoHBYCTDF0vA38b9RF4keie0CSRb9C3sctHQopsUAv4DHvwS7UNalRVI8tRelL5QfBy27ToEDVWOtkMuXgnQTYzJWBs0cM1UxPH6bBKAGqoMFpNyKABB2F1/7EVMSXMIEpyQuNToB1vjlpglwGK6DyJ9kIAACrwoYp/BCDRdCChLdTCV+AVta+ZnUh0UA1Zo7KsT3+gp8sEMd4qyRzGM7fxrBdkJBGGHmpW5W96N/F8WlOZEOAACXmf+VWNR/RCQaKQNYj06hH1kSTm9i63IgHk2nAxPZUaeUVNj7FcvR6IRnxEdh/vQlBLb3Ily+gjInYngHhBa/uZ/Ct+lOhwnWsXjL58t7b20SQ2QlXbn0zjH25Fi6mE7eUv9ypg6AUMj1+jmi7TWxwA1NdeRS1vCWOEtVCLItpCezBE+sl53y0Z1UAKve1TJy68Q0OVXmr9NTTu4v5/gRQW7MZe10ZC6eULGlQNYh8NoprRZlrF094c9+PTSHd/57MssNn10RbelXp7i6OSE1DysGqBEP4MMfOcQ+DHLaO1na/pQaCaraHBVaZc+uXyzqP2ybkAmzb5Env87YejzPs/jxMcSxOrdmQ2lmApSq3dyo8xFOaHstCoUDYuFVtZdREkQmGM1W6g3Z8bSLuZlbH9vdAh1r/teg81K1jkbsczh8yidVTuOmF/Bf2Xsrwgi0i6Mlvt0Yh251uPj3w8zxKRmnSlFn4QuqqrjipZHSfEQx7gJasBHPdDdaF7wwC5e9zC3YGmVALZqIHYKg4dTzq3FbxF7NCRrQYsxn/z3z90LDzQNaIy9FSuR9WYSASuiteMehOCQcXQDiL/gojo+8J7ExG8shOKlC+NkrnroiWhqTkeLSSqzaIwPk4i5F+XBroOmEkDh0bY5gmxzUwxLhZztta2z38F0Bn1sL4+kA8mGMs2OJT2WEaYlORgKNxDzIGAzNLhgDSLtFX5nN4NCevuQmoLyZkDKloNm7feBxiUlZjkOBoXYAUWu/v1kgwaFN0BRagqVWfDqIaFBPNTD/Wi4vnxgUiX1yO7PKZcKqAQktL09gI/2gJhNyY5ilcpTG/U8YfbV6tBywJgXJCLUUC6vOx2abVxjtqcZ4auSbEgjHcVfbLCsZND51UQBNWzB1pU81nzZIuYTPrKLfrUS69cS/YwB4p6yiCjNm4sTU4M+tM7yiRYMY1dluwwlrLQ4ddSWPKHDQv65gm9CDFvefs22mGjnZDapKXkuUSf3SDs2qx+zNlYiv/meaQb8NBUHZErOtWYpE31lf3MVCYhRtpw1bEXPSdva+kb1KDdun47FvPwo6o81MF9yrTe7+tFSl2VXdWb4+sJJV93xWCUK0Nf5KLsPeV+1B1NmbHfFyPyE9j0zJbC6bJN+4iI+2qPiTeTuqTBtNEAKZ/wSvguz+jFQzv8HqHG16xArjLLgkpD6eT51Ac+/F+4XLX2QJyCi2DtQl9aJmraiXPXAcupVbsNBit1LI+jz/vn0SuSmyDW4o6YPYPncAWG1NMbjOUTkrZCPvm+qtcJ54+BmKiFsRDchYkeF2XlbmORKZ/QdKBlJN98jfCHHeyiraahG5fq6xqrnWvy6KUhtoNaZbY54v9HCcFLxt8Eq8+vJuV+MVTy45NItdrLoaU0rWEUFH/S2OvN7d0Pc7yZwAfpEZXPzEbt7gZa/eK9TjUoleiKXjwQt9WbzAxHbwb7AIeUXX3iaT051JQZUWCZCMaOvIRFm2I9a2o4YNmD5TIvVc54FfJD1vY7IflKK22hwbf+bf8/TD/Whxp8DeqTsOZHz2ipRjCLxY5eL07ADG0/Fuyxp9VBxCJdRYSOKzqPKa9WYKY52YoC+WhNsl6Ocm0hDez9JVihPre22stmgpY3+LAkBFyoHVwSgq5vbNeVa6bjHQnU2oiChwnwmhBGB12B7nZnTuDwjCchadvzGL2r9OKeGElbeu72wtC75BEuyXFxaot5JeT/lhqTCjklSc45GwDYRe+xzLP2MNmvqhhh0oU89lIEyXpsAntxhWCq2qL++kYmO1jktypEh190a237mGyJVIHc6feq6UlDp6KsTJ21CdCldU/1sVwWW7aT+uJYUd1/V+d7/X5/QJYmFs+PIx1f1E1bFlaNWTRpS/9g035RFdrGEka4Mf0T9SB5TTYieecak2kyB9PYEQBMJoOyjOPLLE0Mobmm/TNNkDTkypqAgClyvb7fhcQ5wMG4jYDjuWr1nhmk7zxZ0pg3ep+/MEbRadoS7JuTxrsjpHWS/wr7FCqE7n6+rbOqz3kF40NCcBA3apUOC0Y7q0Ln//ENoFdXOsiuMG4bLKwS7Rl37LK+0H0lOIko8rVYXyULIlQeoHBpsfOpbR4xGZhU88k0vJdp4I6BQ9Zm3Ev1rN3ludIEuoKkQCJJg9ZJYJ2DlmRo+WbSKNPgcbpjDxt/wcDtVSCE0sM0ssPhFtEPcClt8WTLU+Q5P6VvNhB2nN64EtuLhSWyzRAMt07iiGYE7ZkkvbStna/YLKmG2BX6zHCu1nSJ3LuvF2mjdQc/kGuGEUpcNiaqQG1A9/o2arYhKFeXA/GlWjpQNV261GlOHu3eva2M6kztfybf0sfxx5iUPqKd1uyFbNIw0bykAr2/7JrqWwTEF4No7e6nkK1TzvT6F0k4BxnR9PehQVYkoRIuJJnonuyxCbFWNoLZMm7dRxs6NtsGHwFwQCDVzYqvF7Q0vD0A0N7fiZhx236VdjrMstQVnmK4lwR/WXVrExU1agzo28JhG6seyZzTJ9lXMTxzQKvJ6Iz8dvFdZIBAP3DZYT7q8OoRYTIHtTHUeNqFPXMKTT0Dp/dSKua+zGvO0G+JckFr60c/XSFxUXzDzheGy1GhKYC11jPNQOkTizyTMajBQnYPbhmXofdAqHKy/lNvvZtcR5m92MUAADIbNTcTMlnRdt1QwaQsSHGGHyDdJY40M/kuTE8hD+eos247X6SxqkOtYZCQbiXTcPYKQkWrJOi2drtrMPxw/qap54y96SPqiynwgCEd63TomjObuWcQ9mxVhoglNCnqZXXbH/DZIt/r3JQLOQlo8jgD19jw4efEAZOwawVkAYtzVrtDvpCqirEhI+tGbPOym9Ih88NK97JBWtHBjCLbPPo/rFxMgiL8kxLc2+2/PcnTZmp0FyqK1R9UkZtEO5Zp3gxR+eeT5W+Mk7v/4RCnkHj6nX+j3ULAPyF+Rv/qKZJiW+RJqXCHDDuos8HKCOkK1oAQt+bTEsIGRCyugXuWvOjqSzH6Wpe68CYfn0RNs0lG02U8276QNho6tV31xjQKAVkfrSX0UrWL/sze4pT6eyoUPF46mjbaD52wzZgsXwe7TXwfr9lx1VnJ2zFeWn51OOVs8CGnVUtuQ/GWyyVW93oKEpFMqEJFj05J8nPzWoGgM4fBCsGDDf9ZbwmwlIkscw60p+zcg6T0TjZsDc6FgI2C/T9BiTOsIFJatyHnjQirJaEXTufnqmOPzLzSeyeglgLg/ZHNAUDJG5V2yu1SXc9GCdnyWDkitv6/REQEv2IcmRpGhUq7gAXpZl4fWIjlLJ1cRXPHbUDTamnQZWildupGl4ul5jXFeAYzl29fRH0WrH09FYZ/Z3JTdKMqpeWE5DKAPgAANIzTW4raxAMuTJ4C3rYf8lYjVz2qktZMm5mUxolrIJG6Vc1GDShAAAA==" width="921" height="224" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="srli">SRLI<a class="hash-link" href="#srli" title="Direct link to heading">​</a></h3><p>SRLI(shift right logical immediate)，<strong>立即数逻辑右移</strong>指令格式为 </p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRLI rd，rs1，shamt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ≫𝑢 shamt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图3所示，SRLI的OP-IMM为001_0011，funct3为101，IMM<!-- -->[10]<!-- -->为0。该指令将rs1中的值右移shamt<!-- -->[4:0]<!-- -->位，rs1的高位补零，结果写入rd中。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRLI x13，x12，5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>x12寄存器中的值右移5位，并将结果写入x13中</p><p><img loading="lazy" src="data:image/jpeg;base64,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" width="863" height="96" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="srai">SRAI<a class="hash-link" href="#srai" title="Direct link to heading">​</a></h3><p>SRAI(shift right arithmetic immediate)，<strong>立即数算术右移</strong>指令格式为 </p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRAI rd，rs1，shamt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ≫𝑠 shamt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图4所示，SRAI的OP-IMM为001_0011，funct3为101，IMM<!-- -->[10]<!-- -->为1。该指令将rs1中的值右移shamt<!-- -->[4:0]<!-- -->位，rs1的高位由原rs1<!-- -->[31]<!-- -->填充(符号位填充)，结果写入rd中。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRAI x13，x12，3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12寄存器中的值算术右移3位，并将结果写入x13中</p><p><img loading="lazy" src="data:image/jpeg;base64,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" width="859" height="105" class="img_ev3q"></p><p><strong>注意：</strong></p><p><strong>SRLI，SRAI的OP-IMM和funct3编码皆相同，由imm<!-- -->[10]<!-- -->的值区别指令 <!-- -->[1]<!-- -->。</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="区分算术右移和逻辑右移">区分算术右移和逻辑右移<a class="hash-link" href="#区分算术右移和逻辑右移" title="Direct link to heading">​</a></h3><p><code>&gt;&gt;&gt;</code> 逻辑右移</p><p><code>&gt;&gt;</code> 算术右移</p><p><strong>逻辑右移就是不考虑符号位</strong>，右移一位，左边补零即可</p><p><strong>算术右移需要考虑符号位</strong>，右移一位，若符号位为1，就在左边补1；否则，就补0，所以算术右移也可以进行有符号位的除法，右移n位就等于除2的n次方</p><p>例如，8位二进制数11001101分别右移一位</p><ul><li>逻辑右移就是<!-- -->[0]<!-- -->1100110</li><li>算术右移就是<!-- -->[1]<!-- -->1100110</li></ul><p>注意区分算术右移和逻辑右移，例如1100_1100(这里以8-bit数进行说明，RV32I中寄存器中实际存储的数为32-bit)，</p><p>1100_1100算术右移三位，结果为<strong>111</strong>1_1001</p><p>0011_0011算术右移三位，结果为<strong>000</strong>0_0110</p><p>1100_1100逻辑右移三位，结果是<strong>000</strong>1_1001</p><p>0011_0011逻辑右移三位，结果为<strong>000</strong>0_0110</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="四u-type整数寄存器-立即数指令">四、U-Type整数寄存器-立即数指令<a class="hash-link" href="#四u-type整数寄存器-立即数指令" title="Direct link to heading">​</a></h2><p><strong>这里介绍的两条U-type指令中的AUIPC不再是操作通用寄存器(x0-x31)，而是对程序计数器(program counter，PC)进行操作</strong>。</p><p>图5是LUI和AUIPC的机器码格式，将其与I-type的机器码进行比较，可以看到该类型没有rs1和funct3，取而代之的是一个20位的立即数(I-type中12位立即数的位置包含在内)。</p><p>注意U-type中的指令opcode是不相同的。与I-type相同的，U-type对应的immediate，固定为20位，被命名为U-immediate<!-- -->[31:12]<!-- -->，如图5所示。</p><p><img loading="lazy" src="/assets/images/18-fb79881fd57b037168a95a274e959d2f.jpeg" width="827" height="166" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lui">LUI<a class="hash-link" href="#lui" title="Direct link to heading">​</a></h3><p>LUI(load upper immediate)，高位立即数加载指令格式为 </p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LUI rd，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = sext(immediate[31:12] &lt;&lt; 12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图6所示，LUI的opcode为011_0111。该指令是<strong>把U-immediate写入rd的高20位，rd的低12位补零</strong>。</p><p>指令示例，</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LUI x8，0xf0000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将0xf000_0000加载进x8寄存器中</p><p>opcode为011_0111</p><p>rd为5’b01000</p><p>immediate<!-- -->[31:12]<!-- -->为1111_0000_0000_0000_0000</p><p>其对应的32位机器码为1111_0000_0000_0000_0000_01000_0110111，用16进制化简后得到32’hF000_0437</p><p><img loading="lazy" src="/assets/images/19-bf7a4a8da3b44f4dc19ccd5f9dcb4eea.jpeg" width="748" height="77" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="auipc">AUIPC<a class="hash-link" href="#auipc" title="Direct link to heading">​</a></h3><p>AUIPC(add upper immediate to PC)，<strong>PC加立即数</strong>指令格式为 </p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AUIPC rd，immediate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = pc + sext(immediate[31:12] &lt;&lt; 12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图7所示，AUIPC的opcode为001_0111。该指令是<strong>将20位的立即数符号扩展后，左移12位，和当前的PC相加，结果写入rd寄存器</strong>。</p><p><img loading="lazy" src="/assets/images/20-5e9d1d9a7a0051931793a5ff2401eba0.jpeg" width="753" height="64" class="img_ev3q"></p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AUIPC x12，0xf00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将0xf0_0000加上当前的PC，加载进x12寄存器中。</p><hr><p><strong>注意：</strong></p><p><strong>大多立即数很小或需要所有XLEN位。 RISC-V选择了非对称立即拆分(常规指令中为12位，再加上20位特殊的上载立即指令，比如LUI)，以增加可用于常规指令的操作码空间 <!-- -->[1]<!-- -->。</strong></p><p><strong>AUIPC和JALR(后续文章会进行介绍)中的12位立即数的组合可以将控制权转移到任何32位PC相对地址，而AUIPC加上常规加载或存储指令中的12位立即数偏移量可以访问任何32位PC相对的数据地址。</strong></p><p><strong>当前的PC可以通过将AUIPC的U-immediate设置为0来获得。</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="五r-type整数寄存器-寄存器指令">五、R-Type整数寄存器-寄存器指令<a class="hash-link" href="#五r-type整数寄存器-寄存器指令" title="Direct link to heading">​</a></h2><p>RV32I定义了几种算术R-type运算。 <strong>所有操作都将rs1和rs2寄存器作为源操作数读取，并将结果写入寄存器rd</strong>，注意R-type指令没有立即数，只有寄存器rs1，rs2和rd。</p><p>funct7和funct3字段选择操作类型，如图1所示。</p><p>R-type一共有10条指令，opcode名称为OP，值为011_0011(所有的R-type指令的opcode都相同)。</p><p><img loading="lazy" src="/assets/images/21-6ed6aaa82c1470e035f148e7f67a8106.jpeg" width="759" height="188" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="add">ADD<a class="hash-link" href="#add" title="Direct link to heading">​</a></h3><p>ADD指令与ADDI指令的操作原理类似，唯一区别是原本是12位立即数的位置，拆分为了7位的funct7和5位的rs2。</p><p>ADD指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADD rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] + x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图2所示，ADD指令的funct7为000_0000，funct3为000。该指令是将rs1 + rs2的结果写入rd中。注意：不是由机器码位置的bit 15-19和bit 20-24相加，而是索引号对应的寄存器的值相加。</p><p>与ADDI类似，溢出的部分忽略(溢出处理可以由软件实现，<a href="https://www.icfedu.cn/archives/9518" target="_blank" rel="noopener noreferrer">这里</a>介绍如何处理)，只将低XLEN位写入rd。</p><p>加法溢出的举例为，两个8位二进制有符号数相加，0100_0000（64） + 0111_0000（112） = 1011_0000(-80)，结果明显是错误的。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ADD x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12和x13寄存器中的数相加，并将结果放入x14寄存器中。</p><p>OP-IMM为011_0011</p><p>funct3为000</p><p>funct7为7’b000_0000</p><p>rs2为5’b0_1101</p><p>rs1为 5’b0_1100</p><p>rd为 5’b0_1110</p><p>所以<strong>ADD x14，x12，x13</strong> 对应的机器码为0000000_01101_01100_000_01110_0110011，对应的16进制为32’h00d6_0733</p><p><img loading="lazy" src="/assets/images/22-428fed45cc3432d9c5ef3ea321877e8d.jpeg" width="798" height="72" class="img_ev3q"></p><p><img loading="lazy" src="data:image/jpeg;base64,UklGRtoRAABXRUJQVlA4IM4RAACwdgCdASpAA68APpFGnEulo7IlIbWLGkASCWlu04tve2lJeO0/Gey9pzl9Dz+1V6dv9p0+/RTzsm6k+tL0WvrBf4rJZexncZ/h/CfxxeuPczeDNSPsX/Zf2T29/wv9e8MfkR/Z+oR6y/v293gB/I/7B4CWpB6+/fv+p7gH8s/rX/U9UvAzoBfz7/Keht/2f5b0efU/sFfr7/0/7x2yPRN/aocQ8LqPgMZq4StfUXuQ3TvTy0Sa9oz1I8E5la2JQDLgO4vE/J1hOuvDg6HcXkPgYk0gNc668EV5elEatkvpBngrOA5yJDxjnxWo3Ad1MGobEfhWSwwVksMB5LDhWSw4VksMFX+biz9OVcKRsslcwdNGkaf980Hvi2LY2eA2GEzGz1DTXQTI8kd6G5xwEAANLnO69nTr3Mbm0VyLJmgGiXf3qM1XC7tYAoQVEjd6gIQJe8OdRNOCECLyFzBS6DGyCoD8lOGrLAEn1IdFm64TbqTl5F6jfP1kphXJP+7xwhAg+vLA+JWrcFJjUcfjYAggSwJODhTc1sSPMB9aynriqXEGRALipM9CcRaBWn3LhrdZsdyJnOMFIk5EtFtvIlclmPZGe4y2+D6YWRJPE1OCEtySDAZbW2MzVZT4HVDk4AYIgFS3o+jTsUYeknuLVqwfUqHFsgSLBvWo3gq/jDbDOwDS6CU19CwDVgAReqfV4Wh9I7HdLNPIBRCHcRJ1YYMfS4IO4hgqb03xv0IVZ2SsQiXeG1JnuQAG3mlhKyx2dTKivFujYd1NPlVR/nah0m2Kjxn/yMX6RNx3PWVJD9DVO8KHndYmzRtsBGmX5OHuEP1OgTdPL3NI7B1C9Nyayz3le/kM4+arg65jo/4Xx1sHBVPR/ykz8VWUV2c4qcmGSH+7Y5es05ERHGifkDuiluA28YLraYdfFylOnLsW7JdfGrrzwy9mqaKH3acr3irJdUCauRWgOh77hA3/y+KkcTV7AiZGaPOPwFk15J2IEl3NtKVAVwUru0/9g1LR/2qCkyvR21kD1btT5m05j0UcRKoom7yiInY38H0L3ACogbB/mGiIJ30B2Vw1kD+oy3HH1jx9nagGT/WWmRdEVWxwWm+H4B3D2nJThPtQjcEqAX4TGI4iTNzWIdXMhzgvEXUw+Em854r/YtgiiHUOQkuVIF3Oj60TAEOogNRELHeSE5poeVVfFh3h2SGphpbeU1+0rmG+kdjCnrI+G3J8QBBwKl+HCsgAgrJYcDyWHCslYQrJWIKl+HCskCkf0DPbOVzAAP77SLWSIu90j6cwt1H6/xDvGcpV1iNpYu0TXQKDKeSn9tFqzMHKosxNyAk2ILAb1JayXcxJ/lHyueaD1SdO8v8dAP+RPBpktmYyGOIWDbA2n56e+O/8SvcmgW9ODGX+KiUQOv4zE9k4hyQMCa+JaqWGLQzwBwoAa8b/m3iIMdSxZR/rA72aUp30dDsbwa4fwR0x7emp7DtzNQp1r0fCgkz+qOYjk2b7LZZdIf5yxv43Mqh5aQUguHzcn5+21DMs8VEGHAItZsMLY1lA387AyqJwvqwmjjWaPP4JzAYci1hgWyw7S3C2C/nyz5Pa070wcRy7aAQMidEAh89ISMsAfNm9UeM+bPhts7V7vr+37AWAlNNbdWF8xsi8fvl5+793X29LmwSCT6Kw/UMmNEsro5ZwIV87g9UxhQli4+REZVrBYjYm6KV6iGIM8VZop4O3aDqZ751PfKcTW0nuEFRsv3H3FAMvGgKu/8UFfR5R2otQYGxwe0sMqFBVrgY9/ug9EtlxJBRqKP7Je97OMZAu33l8heJ6Wt/Y/66DK2ccHwBh2oAkmu2T2lif61RGNg47cfk8v80rNemDTrNsldycuLZcNsH259JsM+/lJYaGTdyBcbaOEGs2S4/lVA2HOBXHDVxi7D++FefPEB17zMH/JtufRDfnSNQMsnojfcC0gAvtfS+XNcdZIPx7lghXCe14XXj3mOBNRh2GDRO3jAtdsQdZkcMn/eDlle4IPhufb6/UGyNyyv6PhhcufGvAeQ1qdewfGxE9fVP7rEpavp5QsD2w6FVfOeNoHq8LLPGQRhenKmiMFuJqa7Lz7b9rjSnJcmULMBsVcb1zoy2mlTg/OUWoq7OvAmfi1l4//V1vw2Imk9BHeq4R4/7yedD/NPcETkKZXxZzYTF/dl07Jcd0YXuq5H3tqScqLvyO2tannYtcozTViElCoAPzX8Fn5J/ITdS+KS1m7IDYDlUHR/W6QKf4WPVoxnpsrdCN+Gevl/yEYxnZfSVtWlSbs3f592/tkZjo1YjD6OIB6IDNgq73SidlMACxjk8jijkCNtxkGab/UVbzIFsTPACPaOjgGgRXN0U7r42h2F24BCxe6zNeJepGgJ0kTnwKRhLjLZgdbXHGidTtAdzSvllIFvcP7UBffazn3ndqnLAHMUIMbsrLR2SvX0M7L19N/jXCAMSN+Tv9r7Cg5+XNlL9c50VfDN9upCK1lx/ZPyM+vMPswycUqGWXwSfOOaTwoWRXDDLQ/hin67EsMOl0dIuiI9csuWb4AH9Fy607IriuRxhhEwEKb7WekzgTfhEhsXY8B2FgiyItTqrqhIzZWJXoJgxEuLqcbZievbleEL5RHCDkYaODk3w5+T2TCQMSuJQ5VhhR6NQOc8PvNXO+u06FN1zPfZ2eLyRicrAu6O/ha0TleqZCqXe93ic8rk0CL1zmhs/A3aH1utCJGpMqjc1qNfopQYac0GRAdnHdPqr4vzao6X0F0ChVf9muEvrC24E5jmyqmDmGtRkeNEajhT3N92PaEggfc82xygt9aRvmy2RYjjjM15WTU4Jp86iYqGMSR9jnU1eaYFiX8tnSFQb0q3znd5yuPSYJ+vSckJgLjlCQKQQLnGsmnpsfe7LL3PdHeGIIfY2/eDwt3a30HCYlIUq4fDUoW7kv2PLbbcB0lla34MfCZza0Iz3EonLVlfPsxhmGXzhp678AOFOj8RUEHUUi0p2azUmsfmeB8OmINj9U+m5RnCcXhPETsx//RuqYrkeBah16Znd79vtczxWEY2iNXS/FV3RDTj5a26ay5G4eJw4vilOEbIr85gaMsGi76YRCPnJbRfkgabO23Iv+Vu4X20/hY4W632pd1vqMt92fkTG40z620i+6MRfTwkoHgnuEIH+qDtudw5IA81bCk0wqJ7SCAGw2AfU9adCvbP4Nav2dM80OgedOQcg8lFsx1sIjSqxRkLAJUnbQRuJXxGe8r9R7BhmBe2aTtoSd7FrAfJcmRWgZiczeVQa/ExOuwcc5LM1t+xC7fMkg7QADlik7wWP7/tMsFkqF9hNwxmzhLoP4C2luSYjJw+lC8Qnf693l5W2fo1xnoqJeE75nWN17xktY7BKNb98q4KZDEO/owJxjEEsu//TBMBF88YNzeu/4AdGjHSDH3icvCJ3IIER7Z+jSmAbuBFanLDliej/l4IhNUFVWWwBeGhDoLECaCV+k0NzxuHxTABLR85xIbpjFAIO4t0KVdfoGDVahmeetmFbPbHfbjChpvA2PtaWAJftJujh10XScWQWMGJWPCyhn7rrBfptRTRBjrZkVSS+r0gUzAAqcxNgVtqM+qYUrf7YtsVWePAX1S5ht2kOCzXorcZXrYBlfb1wu/8N9vg9IZVdPwwETUYC71rpF5By1ITqKmNZD8BT2OdW0otctfJi5UL9sMrvbP6klil3x7OTdV6lzF/xbDdbjjsrWF1iT2RCNZ8RN3rWCVrLPgBGUp2i/f9E58n47DBg6vA1+dcrj4gAQW+TNEsg0hGURRidp8PKMLnSKrEy3dGHviJHTKeHBvWP9PXooNJTrM29wJ0J9uvYMWimLUnVtbdDCNvDO3pMVZx8Xc5UWqsp5NV7A2njP42laUGVNlUTLWFdu9VTpAWiX9X6Fr6zZ+7zoD4PnvLv8RJUlBb1xAaDaiMplJfkXJ5UUz547K1Z+M0cD4604NfokTUikPsL9fuwZxeJo78w9IpWw116xATTzrhkRZBvytIr77+UxvF8g3Jk0IDnvIr1rurfz4kiIHrNBMD8MUm09jcNqRVmM4xmv3F9Z+sbKIKc9rxWNJ0mWCcgvX/o2+oCC1jPvzeYKl8n+kowgVozBZ2GLv3p20fSb7lK2lS7CMrugt/hdJyLipEyhGerz8SizgcMshPtZhl1xIh79rdHGRhCHp4dAzxQhvXRpJSQtojd2gf4aJe5tBqMEln8+49sQ2qpcYP9mJibhMmh44MhRTBQFFzLsSwAlA6Nmi4NqqFOCJtVQLE2jQYOvt9V1ekowVdhRNcVDm8jbsxhwM5MoITBp8w21/fgWQ5Tn5enODZVr2UtAvSqA52cxgFVgS2XEuvt4x1DSNQelUrd4DeO+CZOgga1togzGCEYVxOn94IsnTx6ksF2fPHM1zibrBzw++PXZsqlZJkNJY08qkmEe1GHtK//FXdXZFkqaq22uFR5WV/qFTH3hmTO2cH5TnsEE+kwO3BTj+4uGiDE+wDUfqDwfswmlZRHJWUfvOkM/2w0cvjzVfjjDGOmBTwP39ma79stHwWwNdSY8kPBvQkkSITyleNHEoCglnm6+hwFrhq4Rvece//65v/VgtDGiXnksuo+3sFWXpIoE0LUBAHPhL6HSFHVWv8K99Wi0pGJ3ssZknvQ/ADjut14H5FFUVh7fWgrFx3bp9MouE934B/RjhN0sbB0sOc6w5LcOCpNUIBNq2s0xz2/Dl9CBB0zSWUpjhaLxGvJAm3pqM0tlDZZIE1Dy/R+qmlWMg7wwiw1vQemo2lViL4qnat4EfhCfySXEjDcMJ0cbVg3PcH7VD6ygyEiGj7ViO6vTGgRyEU2M4FjsNqZyhaPZp0ci0ZosHshXPSnIYqqNn6/HwAOPkd6xhFhLv6ORQXnI4u/2mJMpKJnU1XhhPr0iYA3gYYFzUhXpd4/AP+j+wisXU9rkKD4Q3CBPjWxvc5Pvyj60gYkIHpYdnjYExw6gur1ZUIxPdTuXdfllqdJ3U5fH7Op9q4C3BUE0h4YUrlLvAMdGn8GhwVILT5z4fNsg1MWOvtT5AWCGXNNDq6dxmifCya07mB3hJ9/kHrNT3OxDS9gPGgtRYThyFArQsl2SKHAwFBW9lTht5b0aeyCKsPR0ug8CuxXrlM+q2XNahLWXiaLlubj3vGhQZt9zWBRKDBsU8zvny/0ORExrPlRbxcXENXldNvY4SMrZZm+bJ4tMx8xgRQgpWiLHngl2jEpKxNAmCtPzxg8CXhn+Oc9+Dtfe3B3qYiROBFniDd38tOmJPpF2dzGT5+yhFKs2uz+Dh7KCtf6xdNzzXynXw22J76U8h+Z+y9mnuE/FYvk8vyu05iybB073lqPqkpLXpJ7fYNC8c3UJtPmPPm2Ghy4CnPTWMbgV70rT0P8m4UXaiRPtpidvfz3UD3AsryXNMP5nxUz2euR73SfgiAT+lQnoQG8irLztkC5jicggIKutRBU8EVcawRbd+kkBh5JUrGqNam+DMYhowNgibq6pOoMDIfDKmzdmSZyWHNdmyDKYLmAsCx8oemhHMS0b8/asQfd42XeQgVlzxZG7Zyv7aPew12gObSJFRhNISkGMkIkNXKZO2ryVLqASBLp8OoBWkwAU5Fp80Xs+Of0AEnCJsiAiOlEGHk9XpgsuAmFeE62Jsn7cjb9n0mLtVp7UyGM+1eVd7YKgVEymI3UnOjUbQOyxsROS5CD4YxDnueqIUvJH2mKD8IBqDxQTGAx4AwRLxVnNUiK3rTxt6Jme+aqD2UMl1R/AgIXZ8/9ZhAPR8+UAbfSqP4+c2ZT8zjNtahMS+mcp6kg0u/cVkhdo+zEi2+NiIrFlcXLl3Qg+06C+NNwKDNqlbhfhMqTaCBmLRgAghldFmE4RGWKw4wX5d5ff63dudhaB3Zs4onBPOpnK5tS7XzvoLhflMCNu8+AXk4k9rxLC64C2VBKwH8av41ksNb/7t5pb0EoAhdE66vOR6QW+fPnrgBKl2lFqV/Bq2TRwRRtgz6Pp5f4BH+Z1BOe4/hDT1t2aa6vcdv/hU04njbYPrV1v6EaNEPAg4AAA" width="832" height="175" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="slt">SLT<a class="hash-link" href="#slt" title="Direct link to heading">​</a></h3><p>同样，SLT与SLTI类似，SLT指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLT rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] &lt;𝑠 x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图3所示，SLT指令的funct7为000_0000，funct3为010。rs1和rs2当作<strong>有符号数</strong>进行比较, 如果rs1 &lt; rs2, rd置1，否则置0。</p><p>指令示例：</p><p><strong>SLT x14，x12，x13</strong></p><p>将x12和x13寄存器中的数当作<strong>有符号数</strong>进行比较，如果x12寄存器中的数小于x13寄存器中的数，将x14寄存器中的数置为1，否则置为0。</p><p><img loading="lazy" src="/assets/images/24-d0ebbe2b0782735b3039e80475669c83.jpeg" width="806" height="80" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sltu">SLTU<a class="hash-link" href="#sltu" title="Direct link to heading">​</a></h3><p>SLTU的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLTU rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] &lt;𝑢 x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图4所示，SLTU指令的funct7为000_0000，funct3为011。<strong>无符号比较</strong>rs1和rs2，如果rs1 &lt; rs2，rd置1，否则置0。</p><p>注意，在SLTU rd，x0，rs2中如果rs2不等于0，则rd被置为1，否则，将rd置为0。对应的伪指令为<strong>SNEZ rd，rs2</strong></p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLTU x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12和x13寄存器中的数当作<strong>无符号数</strong>进行比较，如果x12寄存器中的数小于x13寄存器中的数，将x14寄存器置为1，否则置为0。</p><p><img loading="lazy" src="/assets/images/25-344e07e3d7c3937b66445f66e1936bae.jpeg" width="794" height="72" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="and">AND<a class="hash-link" href="#and" title="Direct link to heading">​</a></h3><p>AND的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AND rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] &amp; x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图5所示，AND指令指令的funct7为000_0000，funct3为111。该指令将rs1 &amp; rs2的结果写入rd中，“&amp;”<strong>表示rs1与rs2逐位相与</strong>。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">AND x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12和x13寄存器中的数按位与的结果写入x14寄存器。</p><p><img loading="lazy" src="/assets/images/26-2f936e0c6da3b333a5ae172847fadc2e.jpeg" width="789" height="74" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="or">OR<a class="hash-link" href="#or" title="Direct link to heading">​</a></h3><p>OR的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OR rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] | x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图6所示，OR指令的funct7为000_0000，funct3为110。该指令将rs1 | rs2的结果写入rd中，“|”表示rs1与rs2逐位相或。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OR x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12和x13寄存器中的数按位或的结果写入x14寄存器。</p><p><img loading="lazy" src="/assets/images/27-4857b28349c464d91a3702b38d0c42f0.jpeg" width="790" height="72" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="xor">XOR<a class="hash-link" href="#xor" title="Direct link to heading">​</a></h3><p>XOR的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">XOR rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ^ x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图7所示，XOR指令的funct7为000_0000，funct3为100。该指令<strong>将rs1 按位异或 rs2</strong>的结果写入rd中。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">XOR x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12和x13寄存器中的数按位异或的结果写入x14寄存器。</p><p><img loading="lazy" src="/assets/images/28-3ac4e5c40216810d46f91318e8a1d837.jpeg" width="808" height="75" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sll">SLL<a class="hash-link" href="#sll" title="Direct link to heading">​</a></h3><p>SLL(shift left logical，<strong>逻辑左移</strong>)的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLL rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ≪ x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图8所示，SLL指令的funct7为000_0000，funct3为001。该指令将rs1 左移rs2(该寄存器中的值)位，空出的位置填0，结果写入rd寄存器。rs2寄存器中低5位为有效移动位数(最多可移动2^5 – 1 = 31位)，其高位被忽略。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SLL x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12左移，左移的位数由x13寄存器中存储数的低5位(高位被忽略)决定，空出的位置填入0，并将结果写入x14寄存器。</p><p><img loading="lazy" src="/assets/images/29-d7c7065c227b0eb6c6a116ba8c76e570.jpeg" width="795" height="77" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="srl">SRL<a class="hash-link" href="#srl" title="Direct link to heading">​</a></h3><p>SRL(shift right logical，<strong>逻辑右移</strong>)的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRL rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ≫𝑢 x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图9所示，SRL指令的funct7为000_0000，funct3为101。该指令将rs1 右移rs2(该寄存器中的值)位，空出的位置填0，结果写入rd寄存器。rs2寄存器中低5位为有效移动位数(最多可移动2^5 – 1 = 31位)，其高位被忽略。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRL x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12右移，右移的位数由x13寄存器中存储数的低5位(高位被忽略)决定，空出的位置填入0，并将结果写入x14寄存器。</p><p><img loading="lazy" src="/assets/images/30-8ba7eef5025347a564498d853f9b5dd1.jpeg" width="796" height="78" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sra">SRA<a class="hash-link" href="#sra" title="Direct link to heading">​</a></h3><p>SRA(shift right arithmetic，<strong>算术右移</strong>)的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRA rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] ≫𝑠 x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图10所示，SRA指令的funct7为010_0000，funct3为101。该指令将rs1 右移rs2(该寄存器中的值)位，空出的位置由rs1寄存器值中的<strong>最高位(rs1<!-- -->[31]<!-- -->)</strong>填充，结果写入rd寄存器。rs2寄存器中低5位为有效移动位数(最多可移动2^5 – 1 = 31位)，其高位被忽略。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SRA x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12右移，右移的位数由x13寄存器中存储数的低5位(高位被忽略)决定，空出的位置填入<strong>rs1寄存器中存储数的最高位(符号位)</strong>，并将结果写入x14寄存器。</p><p><img loading="lazy" src="/assets/images/31-e01f86cfe577423fab6f8f5081009b62.jpeg" width="788" height="78" class="img_ev3q"></p><p><strong>注意：以上三条移动指令中，rs1寄存器的值只是被复制了，原值保持不变</strong></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sub">SUB<a class="hash-link" href="#sub" title="Direct link to heading">​</a></h3><p>SUB的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SUB rd，rs1，rs2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = x[rs1] − x[rs2]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图11所示，SUB指令的funct7为010_0000，funct3为000。该指令将rs1寄存器中的值减去rs2寄存器中的值，并忽略算数溢出。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SUB x14，x12，x13</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将x12寄存器中存储的数减去x13寄存器中存储的数，并将结果写入x14寄存器(忽略算数溢出)。</p><p><img loading="lazy" src="/assets/images/32-099ed212c8add40eac19978efd3666b5.jpeg" width="800" height="75" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="六条件和无条件跳转指令">六、条件和无条件跳转指令<a class="hash-link" href="#六条件和无条件跳转指令" title="Direct link to heading">​</a></h2><p>RV321中控制转移指令主要有两类：无条件跳转和有条件跳转。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1无条件跳转">1、无条件跳转<a class="hash-link" href="#1无条件跳转" title="Direct link to heading">​</a></h3><p>无条件跳转指令均使用PC相对寻址。无条件跳转主要包括两条指令：JAL 和 JALR</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="jal">JAL<a class="hash-link" href="#jal" title="Direct link to heading">​</a></h4><p>JAL指令是用J-type格式(JAL是RV321中唯—J-type的指令）。</p><p>JAL的指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">JAL rd, offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = pc+4; pc += sext(offset)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码格式如图1所示。其opcode为110_1111。<strong>该指令把下一条指令的地址(PC ＋ 4)存入rd寄存器中，然后把PC设置为当前值加上符号位扩展的偏移量</strong></p><p><img loading="lazy" src="/assets/images/33-a12e0298d5c5d720a987bad637f58de9.jpeg" width="783" height="127" class="img_ev3q"></p><p>注意偏移量是带符号扩展的。可以看到偏移量是2字节对齐的(offset [20:1J)，虽然RV321中所有的指令地址都是4字节对齐的，但是JAL还可能被用于 兼容C扩展指令集(详情见RISC-V 简介 （4) RISC-V指令集编码结构中对其的描述），所以就默认offset bit 0为0（即2字节对齐）。</p><p>因此，JAL跳转的地址有+/-1MB的范围。（2^21= 2MB = +/-1MB)。</p><p><strong>标准的软件调用约定(calling convention)用x1寄存器作为返回地址寄存器(rd)</strong>，也可以用x5作为备用的链接寄存器(link register)。因为JAL指令中的offset是相对于PC的偏移量，在编写时需要精确的地址差值，且任意添加/删除一条汇编指令JAL中的偏移量可能就需要再次修改，这给JAL指令的使用带来了很大的负担，所以。一般在用JAL指令时，多用JALrd.label而不是JAL rd, offset.</p><p>JAL rd, label中的label是标签，用来标注某段程序的位置，为程序中跳转及分支语句提供的跳转入口。编译器会自动计算出标签和当前指令的offset。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">JAL x1, main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>伪指令：<code>JAL main</code>，对应的真实指令：<code>JAL x1， main</code>
伪指令：<code>J main</code>，对应的真实指令：<code>JAL x0, main</code></p><p>跳转到main函数，并将下一条指令存在x1寄存器中</p><p><strong>注意</strong>：</p><p>x5寄存器被选为备用的链接寄存器有两个原因：</p><ul><li>在标准调用约定中被用作临时变量</li><li>它和常规链接器x1只有1bit的区别 0_0001-&gt;0_0101</li></ul><p>当JAL指令省略rd时，默认rd即为x1</p><p>伪指令J中rd为x0</p><p><img loading="lazy" src="/assets/images/34-a12e0298d5c5d720a987bad637f58de9.jpeg" width="783" height="127" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="jalr">JALR<a class="hash-link" href="#jalr" title="Direct link to heading">​</a></h4><p>间接跳转指令JALR用I-type编码类型。指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">JALR rd, offset(rs1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>t=pc+4; pc=(x[rs1]+sext(offset)) &amp; ~1; x[rd]=t</code>相当于：</p><p><code>t=pc+4; pc=(x[rs1]+sext(offset)) &amp; Oxffff_fffe; x[rd]=t</code> //RV321</p><p>其机器码如图2所示，其opcode为110_0111，funct3为000。</p><p>该指令将PC设置为rs1寄存器中的值加上符号位扩展的偏移量，把计算出地址的最低有效位设为0，并将原PC ＋ 4的值写入rd 寄存器。如果不需要目的寄存器，可以将rd设置为x0。</p><p>JALR的offset也是带符号位扩展的，JALR偏移的地址范国在rs1寄存器中存储地址的+/- 2KB(2^ 12=4096=4KB=+/-2KB)。定义JALR指令是为了使两个指令序列可以在32位绝对地址范国内的任意位置跳转(因为JAL指令的跳转范围不够大）。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">JALR x13, 0(x1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>跳到x1寄存器里存储的地址，并将下一条指令存在x13寄存器中。</p><p>其他伪指令示例：</p><p><code>JR x1</code> =&gt; <code>JALR x0, x1, 0</code></p><p><code>RET</code> =&gt; <code>JALR x0, x1, 0</code></p><p><code>JALR x13</code> =&gt; <code>JALR x1, x13, 0</code></p><p>一般来说，LUI和JALR配合使用可以跳转32位绝对地址范围，AUIPC和JALR配合可以跳转32位相对于PC的地址范围</p><p><img loading="lazy" src="/assets/images/35-ebb7043c0f869323e6421943c72a8b76.jpeg" width="792" height="103" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2有条件分支跳转">2、有条件分支跳转<a class="hash-link" href="#2有条件分支跳转" title="Direct link to heading">​</a></h3><p>所有的分支指令都是B-type编码格式，其机器码如图3所示。12位的立即数以2字节的倍数编码带符号的偏移量(offset<!-- -->[12:1]<!-- -->).</p><p>虽然RV321中所有的指令地址都是4字节对齐的，但是JAL还可能被用于兼容C扩展指令集，所以就默认offset bit 0为0（即2字节对齐)。</p><p>目标地址由分支指令的地址加上符号位扩展的偏移量组成，范围是2^13= 8192=8KB=+/-4KB。与JAL类似，Branch指令常见用法也可以用标签代替偏移量，比如<code>BEQ rs1, rs2, label</code></p><p>branch指令机器编码格式</p><p><img loading="lazy" src="/assets/images/36-d8653d6c83964cbaac7b548e1c99a917.jpeg" width="827" height="167" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="beq">BEQ<a class="hash-link" href="#beq" title="Direct link to heading">​</a></h4><p>BEQ(branch if equal，相等时分支)，其指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BEQ rs1, rs2, offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if (rs1 ==rs2) pc += sext(offset)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图4所示，其opcode为110_0011，funct3为000。<strong>该指令是判断rs1寄存器和rs2寄存器里的值是否相等，如果相等，将PC</strong>
<strong>的值设为当前值加上符号位扩展的偏移量offset</strong>。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BEQ x12, x13, LOOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>比较x12和x13寄存器中的值是否相等，如果相等，跳到LOOP(标签）。</p><p><img loading="lazy" src="/assets/images/37-6334e4892233e582008203ce1724d7d4.jpeg" width="873" height="88" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bne">BNE<a class="hash-link" href="#bne" title="Direct link to heading">​</a></h4><p>BNE(branch if not equal，不相等时分支），其指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BNE rs1, rS2, offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if (rs1 + rs2) pc += sext(offset)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图5所示，其opcode为110_0011，funct3为001。<strong>该指令是判断rs1寄存器和rs2寄存器里的值是否不相等，如果不相等，将</strong>
<strong>PC的值设为当前值加上符号位扩展的偏移量offset</strong>。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BNE x12, ×13, LOOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>比较x12和x13寄存器中的值是否相等，如果不相等，跳到LOOP(标签）。</p><p><img loading="lazy" src="/assets/images/38-edff00f4f624424cc5caed54e1c16930.jpeg" width="872" height="79" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="blt">BLT<a class="hash-link" href="#blt" title="Direct link to heading">​</a></h4><p>BLT(branch if less than，小于时分支），其指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BLT rs1, rs2 offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if (rs1 &lt;s rs2) pc += sext(offset)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图6所示，其opcode为110_0011，funct3为100。<strong>该指令是判断rs1寄存器的值是否小于r$2寄存器里的值</strong>(都视为有符号数），如果是，将PC的值设为当前值加上符号位扩展的偏移量offset。</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BLT x12, x13, LOOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>有符号比较x12和x13寄存器中的值．如果x12寄存器中的值小干x13. 跳到LOOP(标签)</p><p><img loading="lazy" src="/assets/images/39-025b993cac441ff1c379d9fdddb25538.jpeg" width="871" height="89" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bltu">BLTU<a class="hash-link" href="#bltu" title="Direct link to heading">​</a></h4><p>BLTU(branch if less than， unsigned， 无符号小于时分支)，其指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BLTU rs1， rs2, offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if (rs1 &lt;u rs2) pc += sext(offset)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图7所示，其opcode 为110_0011，funct3为110。<strong>该指令是判断rs1寄存器的值是否小于rs2寄存器里的值</strong>(都视为无符号数），如果是，将PC的值设为当前值加上符号位扩展的偏移量offset.</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BLTU x12, x13, LOOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>无符号比较x12和x13寄存器中的值，如果x12寄存器中的值小于x13，跳到LOOP(标签）。</p><p><img loading="lazy" src="/assets/images/40-8613f9abdea458b6d221c13dfe8f9d24.jpeg" width="866" height="82" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bge">BGE<a class="hash-link" href="#bge" title="Direct link to heading">​</a></h4><p>BGE(branch if greater than or equal， 大于等于时分支)，其指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BGE r$1, rs2, offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if (rs1 ≥s rs2) pc += sext(offset)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图8所示，其opcode 为110_0011，funct3为101。该指令是<strong>判断rs1寄存器的值是否大于等于rs2寄存器里的值</strong>(都视为有符号
数），如果是，将PC的值设为当前值加上符号位扩展的偏移量offset。</p><p>示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BGE x12, x13, LOOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>有符号比较x12和x13寄存器中的值，如果x12寄存器中的值大于等于x13，跳到LOOP(标签）。</p><p><img loading="lazy" src="/assets/images/41-9c5b4024a49358278fc6603553630b70.jpeg" width="888" height="93" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bgeu">BGEU<a class="hash-link" href="#bgeu" title="Direct link to heading">​</a></h4><p>BGEU(branch if greater than or equal, unsigned，大于等于时分支），其指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BGEU rs1, rs2, offset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if (rs1 ≥u rs2) pc += sext(offset)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>如图9所示，其opcode为110_0011，funct3为111。该指令是判断rs1寄存器的值是否大于等于rs2寄存器里的值(都视为无符号数），如果是，将PC的值设为当前值加上符号位扩展的偏移量offset。</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BGEU x12, x13, LOOP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>无符号比较x12和x13寄存器中的值，如果x12寄存器中的值大于等于x13，跳到LOOP(标签）。</p><p><img loading="lazy" src="/assets/images/42-84de2d66d0b053577b0dd6347affeaf1.jpeg" width="869" height="81" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="七加载-存储指令">七、加载-存储指令<a class="hash-link" href="#七加载-存储指令" title="Direct link to heading">​</a></h2><p><strong>RV32I是一个加载-存储(load-store)架构。也是只有load和store指令才能访问存储器和外设</strong>(CPU 内的寄存器只能由算术指令操作) <!-- -->[1]<!-- -->。load和store指令将寄存器和存储器/外设的值相互交换。</p><p>load指令被编码成I-type，其opcode为0000_011，store指令被编码成S-type，opcode为0100_011，如图1所示。</p><p><strong>有效地址</strong>是由rs1寄存器中的值加上<strong>符号位扩展</strong>的12位立即数(store指令中的立即数被拆分成了两个部分)得到的。</p><p>一般来说，<strong>load指令将存储器/外设中有效地址的值复制一份到rd寄存器，store指令将rs2寄存器中的值复制到存储器/外设中的有效地址</strong> <!-- -->[1]<!-- -->。</p><p><img loading="lazy" src="/assets/images/43-abbae7a3c4ef592a3705824238c72d32.jpeg" width="909" height="310" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1load指令">1、LOAD指令<a class="hash-link" href="#1load指令" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lw">LW<a class="hash-link" href="#lw" title="Direct link to heading">​</a></h4><p>LW(load word)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LW rd，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = sext ( M [x[rs1] + sext(offset) ] [31:0] )</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图2所示，其funct3为010。该指令是<strong>从有效地址中读取四个字节(一个字，word)，并写入rd寄存器</strong>。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LW x13，4(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的数加上4的偏移量对应地址中，读出四个字节，存到x13寄存器中。</p><p>opcode为000_0011</p><p>funct3为010</p><p>immediate为12’b0000_0000_0100</p><p>rs1为 5’b0_1100</p><p>rd为 5’b0_1101</p><p>所以LW x13，4(x12)对应的机器码为0000_0000_0100_01100_010_01101_0000011，对应的16进制为32’h0046_2683</p><p><img loading="lazy" src="/assets/images/44-81224a5b483746d749bbd760ac691b15.jpeg" width="796" height="78" class="img_ev3q"></p><p><img loading="lazy" src="/assets/images/45-2c61109f7ae78388011839638d3c4fb8.jpeg" width="674" height="138" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lh">LH<a class="hash-link" href="#lh" title="Direct link to heading">​</a></h4><p>LH(load halfword)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LH rd，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = sext( M [x[rs1] + sext(offset)] [15:0])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图3所示，其funct3为001。该指令是<strong>从有效地址中读取两个字节</strong>(半个字，halfword)，经<strong>符号位扩展</strong>后写入rd寄存器。</p><p><img loading="lazy" src="/assets/images/46-b58c795f304d1ce87e3ff12d13a8f776.jpeg" width="781" height="70" class="img_ev3q"></p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LH x13，0(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的对应地址中，读出两个字节，<strong>经符号位扩展后</strong>，存到x13寄存器中，如下图所示。</p><p><img loading="lazy" src="/assets/images/47-2d5ebd887c24ff3c594e5dee074fb343.jpeg" width="946" height="496" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lhu">LHU<a class="hash-link" href="#lhu" title="Direct link to heading">​</a></h4><p>LHU(load halfword，unsigned)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LHU rd，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = M[x[rs1] + sext(offset)][15:0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图4所示，其funct3为101。该指令是从有效地址中读取两个字节(半个字，halfword)，经<strong>零扩展</strong>后写入rd寄存器。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LHU x13，0(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的对应地址中，读出两个字节，<strong>经零扩展后</strong>，存到x13寄存器中。</p><p><img loading="lazy" src="/assets/images/48-7ae9043df67f33d7f6940bf65c12e829.jpeg" width="794" height="76" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lb">LB<a class="hash-link" href="#lb" title="Direct link to heading">​</a></h4><p>LB(load byte)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LB rd，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = sext( M [x[rs1] + sext(offset)] [7:0])</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图5所示，其funct3为000。该指令是<strong>从有效地址中读取一个字节(byte)</strong>，经<strong>符号位扩展</strong>后写入rd寄存器。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LB x13，0(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的对应地址中，读出一个字节，<strong>经符号位扩展后</strong>，存到x13寄存器中。</p><p><img loading="lazy" src="/assets/images/49-82bc4b2c297db87f6ad5a4c2a92f1aa7.jpeg" width="797" height="75" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="lbu">LBU<a class="hash-link" href="#lbu" title="Direct link to heading">​</a></h4><p>LBU(load byte，unsigned)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LBU rd，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># x[rd] = M[x[rs1] + sext(offset)][7:0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图6所示，其funct3为100。该指令是<strong>从有效地址中读取一个字节(byte)</strong>，经<strong>零扩展</strong>后写入rd寄存器。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LBU x13，0(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的对应地址中，读出一个字节，<strong>经零扩展后</strong>，存到x13寄存器中。</p><p><img loading="lazy" src="/assets/images/50-ca02ff847e102e5363dfc1e726f6d035.jpeg" width="792" height="73" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2store指令">2、STORE指令<a class="hash-link" href="#2store指令" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sw">SW<a class="hash-link" href="#sw" title="Direct link to heading">​</a></h4><p>SW(store word)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SW rs2，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># M[x[rs1] + sext(offset)]= x[rs2][31: 0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图7所示，其funct3为010。该指令是<strong>将rs2寄存器中四个字节(一个字，word)存入有效地址</strong>。</p><p><img loading="lazy" src="/assets/images/51-292256f06236558dbea740a3c18ec8f7.jpeg" width="801" height="73" class="img_ev3q"></p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SW x13，8(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的数加上8的偏移量对应地址中，将x13寄存器中四个字节存进去，如下图所示。</p><p><img loading="lazy" src="/assets/images/52-c3d4dee98286de7d89ae39c0ce9ac408.jpeg" width="1012" height="509" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sh">SH<a class="hash-link" href="#sh" title="Direct link to heading">​</a></h4><p>SH(store halfword)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SH rs2，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># M[x[rs1] + sext(offset)] = x[rs2][15: 0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图8所示，其funct3为001。该指令是<strong>将rs2寄存器低位两个字节(半个字，halfword)存入有效地址</strong>。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SH x13，0(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的对应地址中，将x13寄存器中低位两个字节存进去。</p><p><img loading="lazy" src="/assets/images/53-ed67cf1fa120ae3d7a1c4b3659b781f3.jpeg" width="792" height="77" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sb">SB<a class="hash-link" href="#sb" title="Direct link to heading">​</a></h4><p>SB(store byte)指令格式为</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SB rs2，offset(rs1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># M[x[rs1] + sext(offset)]= x[rs2][7: 0]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>其机器码如图9所示，其funct3为000。该指令是<strong>将rs2寄存器低位字节(byte)存入有效地址</strong>。</p><p>指令示例：</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">SB x13，0(x12)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在x12寄存器中的对应地址中，将x13寄存器中低位一个字节存进去。</p><p><img loading="lazy" src="/assets/images/54-5503ed05f3d5cf8d0756d0a29ec502eb.jpeg" width="798" height="73" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="八指令地址对齐和加减法溢出处理">八、指令地址对齐和加减法溢出处理<a class="hash-link" href="#八指令地址对齐和加减法溢出处理" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1指令地址对齐">1、指令地址对齐<a class="hash-link" href="#1指令地址对齐" title="Direct link to heading">​</a></h3><p>对于load/store指令，数据在内存中的地址应该对齐。</p><ul><li>如果访存32位数据，内存地址应当与32位的数据对齐，也就是说，D_PC的最低两位应当为0(如果内存存数据以32 bit为单位，表示数据是4个字节对齐的)；</li><li>如果访存16位数据，内存地址应当与16位的数据对齐，D_PC的最低位应当为0(表示数据是2个字节对齐的)；</li><li>如果访存8位数据，因为内存的单位是一个字节，即不需要对齐。其具体在CPU设计中如何在硬件中实现见<a href="https://www.icfedu.cn/archives/7617" target="_blank" rel="noopener noreferrer">RISC-V LSU，SRAM，GPIO模块（2）D_sram</a>模块中对地址移位的处理。</li></ul><p>注意：<strong>RISC-V只支持小端格式(little-endian)</strong>。小端格式和大端格式的对比如图1所示。如果使用不同的端序存储同样的32位数0x0A0B0C0D，情况如图所示。</p><ul><li>小端的最高位字节是0x0A，最低位字节是0x0D；</li><li>大端的最高位字节是0x0D，最低位字节是0x0A。</li></ul><p>如果在用不同端序的系统中数据交流，需要确保传输的数据是以32位数为单位。如果以一个字节为单位，在不同的端序系统中交换数据，可能会出现问题，比如说这里小端的0x0A对应的地址(a + 3)，在大端的系统中，该地址存储的数据是0x0D。</p><p><img loading="lazy" src="/assets/images/55-ea5a373cf236768a47b5e931e6d6f5bb.jpeg" width="609" height="274" class="img_ev3q"></p><p><strong>RISC-V选择以小端格式为端序是因为其目前在商业上占主导地位</strong>。所有的X86-32系统和 Apple iOS，谷歌Android操作系统和微软Windows for ARM都是采用小端格式地址排序(低字节优先序) <!-- -->[2]<!-- -->。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2加减法溢出处理">2、加减法溢出处理<a class="hash-link" href="#2加减法溢出处理" title="Direct link to heading">​</a></h3><p>之前提到过的ADD，ADDI和SUB等指令在计算时可能会出现溢出的情况，一般来说，硬件设计会忽略算数溢出，所以RISC-V依赖于软件的检查。下面举例说明加法如何处理(减法与之类似)：</p><ul><li>无符号数相加溢出（假设 x6，x7 是无符号数）<ul><li><code>ADD x5，x6，x7</code></li><li><code>BLTU x5，x6，overflow</code> (跳转到 结果不正确的处理分支）</li><li>解释说明：x5为x6和x7的<strong>和</strong>，如果<strong>和</strong>比其中的<strong>加数</strong>还要小，这说明加法已经溢出，即可以转到处理溢出的分支，overflow</li></ul></li><li>有符号数相加，已知imm为正数<ul><li><code>ADDI x5，x6，+imm</code>(正数)</li><li><code>BLT x5，x6，overflow</code> (跳转到 结果不正确的处理分支）</li><li>解释说明：无论x6是正数还是负数，它加上一个正数，得到的结果应该比它本身要大。如果对x5，x6进行有符号比较，x5小于x6，说明加法已经溢出，即可以转到处理溢出的分支，overflow</li></ul></li><li>除去上面两种特殊情况，对于一般情况的加法，处理情况如下<ul><li><code>(x7 &lt; 0) &amp;&amp; (x6 + x7 &gt;= x6) || (x7 &gt;= 0) &amp;&amp; (x6 + x7 &lt; x6)</code></li><li><code>ADD x5，x6，x7</code></li><li><code>SLTI x28，x7，0</code></li><li><code>SLT x29，x5，x6</code></li><li><code>BNE x28，x29，overflow</code> (跳转到 结果不正确的处理分支）</li><li>解释说明：<ul><li>如果x7小于0，那么x28为1，那么x6和x7的和应该是小于x6，对x5和x6进行比较，如果x5小于x6，x29为1，如果x5不小于x6，即说明溢出，此时x29为0。x28不等于x29，即可以转到不正确的处理分支</li><li>如果x7大于等于0，那么x28为0，同时x6和x7的和应该不小于x6，同样对x5和x6比较，如果x29为1，说明x5小于x6，即说明溢出，x28不等于x29，也会转到不正确的处理分支</li></ul></li><li>或者可以理解为：若 <code>(x7 &lt; 0) &amp;&amp; (x6 + x7 &gt;= x6) || (x7 &gt;= 0) &amp;&amp; (x6 + x7 &lt; x6)</code> 则为不正确的处理分支</li></ul></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Skill/ASM/RISC-V/RISC-V简介"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RISC-V 简介</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Skill/ASM/RISC-V/扩展寄存器和指令"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RISC-V 扩展寄存器和指令</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#一通用寄存器和汇编指令分类" class="table-of-contents__link toc-highlight">一、通用寄存器和汇编指令分类</a><ul><li><a href="#1risc-v通用寄存器和程序计数器" class="table-of-contents__link toc-highlight">1、RISC-V通用寄存器和程序计数器</a></li><li><a href="#2risc-v汇编指令类型" class="table-of-contents__link toc-highlight">2、RISC-V汇编指令类型</a></li></ul></li><li><a href="#二i-type整数寄存器-立即数指令" class="table-of-contents__link toc-highlight">二、I-Type整数寄存器-立即数指令</a><ul><li><a href="#addi--mv--nop" class="table-of-contents__link toc-highlight">ADDI &amp; MV &amp; NOP</a></li><li><a href="#slti" class="table-of-contents__link toc-highlight">SLTI</a></li><li><a href="#sltiu--seqz" class="table-of-contents__link toc-highlight">SLTIU &amp; SEQZ</a></li><li><a href="#andi" class="table-of-contents__link toc-highlight">ANDI</a></li><li><a href="#ori" class="table-of-contents__link toc-highlight">ORI</a></li><li><a href="#xori--not" class="table-of-contents__link toc-highlight">XORI &amp; NOT</a></li></ul></li><li><a href="#三i-type-移位指令" class="table-of-contents__link toc-highlight">三、I-Type 移位指令</a><ul><li><a href="#slli" class="table-of-contents__link toc-highlight">SLLI</a></li><li><a href="#srli" class="table-of-contents__link toc-highlight">SRLI</a></li><li><a href="#srai" class="table-of-contents__link toc-highlight">SRAI</a></li><li><a href="#区分算术右移和逻辑右移" class="table-of-contents__link toc-highlight">区分算术右移和逻辑右移</a></li></ul></li><li><a href="#四u-type整数寄存器-立即数指令" class="table-of-contents__link toc-highlight">四、U-Type整数寄存器-立即数指令</a><ul><li><a href="#lui" class="table-of-contents__link toc-highlight">LUI</a></li><li><a href="#auipc" class="table-of-contents__link toc-highlight">AUIPC</a></li></ul></li><li><a href="#五r-type整数寄存器-寄存器指令" class="table-of-contents__link toc-highlight">五、R-Type整数寄存器-寄存器指令</a><ul><li><a href="#add" class="table-of-contents__link toc-highlight">ADD</a></li><li><a href="#slt" class="table-of-contents__link toc-highlight">SLT</a></li><li><a href="#sltu" class="table-of-contents__link toc-highlight">SLTU</a></li><li><a href="#and" class="table-of-contents__link toc-highlight">AND</a></li><li><a href="#or" class="table-of-contents__link toc-highlight">OR</a></li><li><a href="#xor" class="table-of-contents__link toc-highlight">XOR</a></li><li><a href="#sll" class="table-of-contents__link toc-highlight">SLL</a></li><li><a href="#srl" class="table-of-contents__link toc-highlight">SRL</a></li><li><a href="#sra" class="table-of-contents__link toc-highlight">SRA</a></li><li><a href="#sub" class="table-of-contents__link toc-highlight">SUB</a></li></ul></li><li><a href="#六条件和无条件跳转指令" class="table-of-contents__link toc-highlight">六、条件和无条件跳转指令</a><ul><li><a href="#1无条件跳转" class="table-of-contents__link toc-highlight">1、无条件跳转</a></li><li><a href="#2有条件分支跳转" class="table-of-contents__link toc-highlight">2、有条件分支跳转</a></li></ul></li><li><a href="#七加载-存储指令" class="table-of-contents__link toc-highlight">七、加载-存储指令</a><ul><li><a href="#1load指令" class="table-of-contents__link toc-highlight">1、LOAD指令</a></li><li><a href="#2store指令" class="table-of-contents__link toc-highlight">2、STORE指令</a></li></ul></li><li><a href="#八指令地址对齐和加减法溢出处理" class="table-of-contents__link toc-highlight">八、指令地址对齐和加减法溢出处理</a><ul><li><a href="#1指令地址对齐" class="table-of-contents__link toc-highlight">1、指令地址对齐</a></li><li><a href="#2加减法溢出处理" class="table-of-contents__link toc-highlight">2、加减法溢出处理</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Doongz Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a61035f3.js"></script>
<script src="/assets/js/main.7aad8990.js"></script>
</body>
</html>