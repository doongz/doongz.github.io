<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Skill/ASM/RISC-V/riscv-asm-manual">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">RISC-V Assembly Programmer&#x27;s Manual | Doongz&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doongz.github.io/docs/Skill/ASM/RISC-V/riscv-asm-manual"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RISC-V Assembly Programmer&#x27;s Manual | Doongz&#x27;s Site"><meta data-rh="true" name="description" content="Reference//github.com/riscv-non-isa/riscv-asm-manual/blob/master/riscv-asm.md"><meta data-rh="true" property="og:description" content="Reference//github.com/riscv-non-isa/riscv-asm-manual/blob/master/riscv-asm.md"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doongz.github.io/docs/Skill/ASM/RISC-V/riscv-asm-manual"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Skill/ASM/RISC-V/riscv-asm-manual" hreflang="en"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Skill/ASM/RISC-V/riscv-asm-manual" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Doongz&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Doongz&#39;s Site Atom Feed"><link rel="stylesheet" href="/assets/css/styles.99c6e2a1.css">
<link rel="preload" href="/assets/js/runtime~main.f9aa80d1.js" as="script">
<link rel="preload" href="/assets/js/main.0ded408c.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home page</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Notes</a><a class="navbar__item navbar__link" href="/community/support">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Courses</a><ul class="dropdown__menu"><li><a href="https://github.com/doongz/mlc-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Machine Learning Compilation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs229" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stanford CS229: Machine Learning<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/aics" target="_blank" rel="noopener noreferrer" class="dropdown__link">中国科学院 智能计算系统<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs50-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Harvard CS50’s Introduction to AI with Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.824" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.824 Distributed Systems<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/os-workbench" target="_blank" rel="noopener noreferrer" class="dropdown__link">南京大学 操作系统：设计与实现<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.s081" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.S081 Operating Systems Engineering<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/doongz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Algorithm/前述/面试时做题技巧">Algorithm</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Competition/比赛">Competition</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Course/CMU-15-213">Course</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Knowledge/IC/IC">Knowledge</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Math/微积分/极限">Math</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">Skill</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">ASM</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">RISC-V</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">汇编语言格式及ABI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/RISC-V简介">RISC-V 简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/通用寄存器和指令">RISC-V 通用寄存器和指令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/扩展寄存器和指令">RISC-V 扩展寄存器和指令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/流水线&amp;硬件模块&amp;译码模块">流水线 &amp; 硬件模块 &amp; 译码模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/ALU模块&amp;branch模块">ALU 模块和 branch 模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/LOAD&amp;STORE-UNIT">LSU &amp; SRAM &amp; GPIO模块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/CSR读写控制">CSR读写控制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/EXU模块和CPU运行">EXU模块和CPU运行</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/RISC-V总线和流水线">RISC-V 总线和流水线</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/ASM/RISC-V/RISC-V定时器及中断">RISC-V 定时器及中断</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Skill/ASM/RISC-V/riscv-asm-manual">RISC-V Assembly Programmer&#x27;s Manual</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/ASM/x86/X86-64汇编">x86</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/Android/Android概述">Android</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/C/基础知识/数据类型">C</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/C++/基础知识/基本数据类型">C++</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/Golang/基础知识/条件判断">Golang</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/Skill/LaTeX/">LaTex</a><button aria-label="Toggle the collapsible sidebar category &#x27;LaTex&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/Linux/POSIX">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/Skill/Markdown/">README</a><button aria-label="Toggle the collapsible sidebar category &#x27;README&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/Mermaid/">mermaid</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/Python/运算符">Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/SQL/数据库理论">SQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/工具链/工具&amp;网站">工具链</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/常用CLI/docker-CLI">常用CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/设计模式/多态和多态性">设计模式</a></div></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Skill</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">ASM</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">RISC-V</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RISC-V Assembly Programmer&#x27;s Manual</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>RISC-V Assembly Programmer&#x27;s Manual</h1><p>Reference: <a href="https://github.com/riscv-non-isa/riscv-asm-manual/blob/master/riscv-asm.md" target="_blank" rel="noopener noreferrer">https://github.com/riscv-non-isa/riscv-asm-manual/blob/master/riscv-asm.md</a></p><h1>Copyright and License Information</h1><p>The RISC-V Assembly Programmer&#x27;s Manual is</p><p>  <!-- -->©<!-- --> 2017 Palmer Dabbelt <a href="mailto:palmer@dabbelt.com" target="_blank" rel="noopener noreferrer">palmer@dabbelt.com</a>
<!-- -->©<!-- --> 2017 Michael Clark <a href="mailto:michaeljclark@mac.com" target="_blank" rel="noopener noreferrer">michaeljclark@mac.com</a>
<!-- -->©<!-- --> 2017 Alex Bradbury <a href="mailto:asb@lowrisc.org" target="_blank" rel="noopener noreferrer">asb@lowrisc.org</a></p><p>It is licensed under the Creative Commons Attribution 4.0 International License
(CC-BY 4.0). The full license text is available at
<a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noopener noreferrer">https://creativecommons.org/licenses/by/4.0/</a>.</p><h1>Command-Line Arguments</h1><p>I think it&#x27;s probably better to beef up the binutils documentation rather than
duplicating it here.</p><h1>Registers</h1><p>Registers are the most important part of any processor. RISC-V defines various
types, depending on which extensions are included: The general registers (with
the program counter), control registers, floating point registers (F extension),
and vector registers (V extension).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="general-registers">General registers<a class="hash-link" href="#general-registers" title="Direct link to heading">​</a></h2><p>The RV32I base integer ISA includes 32 registers, named <code>x0</code> to <code>x31</code>. The
program counter <code>PC</code> is separate from these registers, in contrast to other
processors such as the ARM-32. The first register, <code>x0</code>, has a special function:
Reading it always returns 0 and writes to it are ignored. As we will see later,
this allows various tricks and simplifications.</p><p>In practice, the programmer doesn&#x27;t use this notation for the registers. Though
<code>x1</code> to <code>x31</code> are all equally general-use registers as far as the processor is
concerned, by convention certain registers are used for special tasks. In
assembler, they are given standardized names as part of the RISC-V <strong>application
binary interface</strong> (ABI). This is what you will usually see in code listings. If
you really want to see the numeric register names, the <code>-M</code> argument to objdump
will provide them.</p><table><thead><tr><th align="left">Register</th><th align="left">ABI</th><th align="left">Use by convention</th><th>Preserved?</th></tr></thead><tbody><tr><td align="left">x0</td><td align="left">zero</td><td align="left">hardwired to 0, ignores writes</td><td><em>n/a</em></td></tr><tr><td align="left">x1</td><td align="left">ra</td><td align="left">return address for jumps</td><td>no</td></tr><tr><td align="left">x2</td><td align="left">sp</td><td align="left">stack pointer</td><td>yes</td></tr><tr><td align="left">x3</td><td align="left">gp</td><td align="left">global pointer</td><td><em>n/a</em></td></tr><tr><td align="left">x4</td><td align="left">tp</td><td align="left">thread pointer</td><td><em>n/a</em></td></tr><tr><td align="left">x5</td><td align="left">t0</td><td align="left">temporary register 0</td><td>no</td></tr><tr><td align="left">x6</td><td align="left">t1</td><td align="left">temporary register 1</td><td>no</td></tr><tr><td align="left">x7</td><td align="left">t2</td><td align="left">temporary register 2</td><td>no</td></tr><tr><td align="left">x8</td><td align="left">s0 <em>or</em> fp</td><td align="left">saved register 0 <em>or</em> frame pointer</td><td>yes</td></tr><tr><td align="left">x9</td><td align="left">s1</td><td align="left">saved register 1</td><td>yes</td></tr><tr><td align="left">x10</td><td align="left">a0</td><td align="left">return value <em>or</em> function argument 0</td><td>no</td></tr><tr><td align="left">x11</td><td align="left">a1</td><td align="left">return value <em>or</em> function argument 1</td><td>no</td></tr><tr><td align="left">x12</td><td align="left">a2</td><td align="left">function argument 2</td><td>no</td></tr><tr><td align="left">x13</td><td align="left">a3</td><td align="left">function argument 3</td><td>no</td></tr><tr><td align="left">x14</td><td align="left">a4</td><td align="left">function argument 4</td><td>no</td></tr><tr><td align="left">x15</td><td align="left">a5</td><td align="left">function argument 5</td><td>no</td></tr><tr><td align="left">x16</td><td align="left">a6</td><td align="left">function argument 6</td><td>no</td></tr><tr><td align="left">x17</td><td align="left">a7</td><td align="left">function argument 7</td><td>no</td></tr><tr><td align="left">x18</td><td align="left">s2</td><td align="left">saved register 2</td><td>yes</td></tr><tr><td align="left">x19</td><td align="left">s3</td><td align="left">saved register 3</td><td>yes</td></tr><tr><td align="left">x20</td><td align="left">s4</td><td align="left">saved register 4</td><td>yes</td></tr><tr><td align="left">x21</td><td align="left">s5</td><td align="left">saved register 5</td><td>yes</td></tr><tr><td align="left">x22</td><td align="left">s6</td><td align="left">saved register 6</td><td>yes</td></tr><tr><td align="left">x23</td><td align="left">s7</td><td align="left">saved register 7</td><td>yes</td></tr><tr><td align="left">x24</td><td align="left">s8</td><td align="left">saved register 8</td><td>yes</td></tr><tr><td align="left">x25</td><td align="left">s9</td><td align="left">saved register 9</td><td>yes</td></tr><tr><td align="left">x26</td><td align="left">s10</td><td align="left">saved register 10</td><td>yes</td></tr><tr><td align="left">x27</td><td align="left">s11</td><td align="left">saved register 11</td><td>yes</td></tr><tr><td align="left">x28</td><td align="left">t3</td><td align="left">temporary register 3</td><td>no</td></tr><tr><td align="left">x29</td><td align="left">t4</td><td align="left">temporary register 4</td><td>no</td></tr><tr><td align="left">x30</td><td align="left">t5</td><td align="left">temporary register 5</td><td>no</td></tr><tr><td align="left">x31</td><td align="left">t6</td><td align="left">temporary register 6</td><td>no</td></tr><tr><td align="left">pc</td><td align="left"><em>(none)</em></td><td align="left">program counter</td><td><em>n/a</em></td></tr></tbody></table><p><em>Registers of the RV32I. Based on RISC-V documentation and Patterson and
Waterman &quot;The RISC-V Reader&quot; (2017)</em></p><p>As a general rule, the <strong>saved registers</strong> <code>s0</code> to <code>s11</code> are preserved across
function calls, while the <strong>argument registers</strong> <code>a0</code> to <code>a7</code> and the
<strong>temporary registers</strong> <code>t0</code> to <code>t6</code> are not.  The use of the various
specialized registers such as <code>sp</code> by convention will be discussed later in more
detail.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="control-registers">Control registers<a class="hash-link" href="#control-registers" title="Direct link to heading">​</a></h2><p>(TBA)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="floating-point-registers-rv32f">Floating Point registers (RV32F)<a class="hash-link" href="#floating-point-registers-rv32f" title="Direct link to heading">​</a></h2><p>(TBA)</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vector-registers-rv32v">Vector registers (RV32V)<a class="hash-link" href="#vector-registers-rv32v" title="Direct link to heading">​</a></h2><p>(TBA)</p><h1>Addressing</h1><p>Addressing formats like %pcrel_lo().  We can just link to the RISC-V PS ABI
document to describe what the relocations actually do.</p><h1>Instruction Set</h1><p>Official Specifications webpage:</p><ul><li><a href="https://riscv.org/specifications/" target="_blank" rel="noopener noreferrer">https://riscv.org/specifications/</a></li></ul><p>Latest Specifications draft repository:</p><ul><li><a href="https://github.com/riscv/riscv-isa-manual" target="_blank" rel="noopener noreferrer">https://github.com/riscv/riscv-isa-manual</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instructions">Instructions<a class="hash-link" href="#instructions" title="Direct link to heading">​</a></h2><h1>RISC-V ISA Specifications</h1><p><a href="https://riscv.org/specifications/" target="_blank" rel="noopener noreferrer">https://riscv.org/specifications/</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="instruction-aliases">Instruction Aliases<a class="hash-link" href="#instruction-aliases" title="Direct link to heading">​</a></h2><p>ALIAS line from opcodes/riscv-opc.c</p><p>To better diagnose situations where the program flow reaches an unexpected
location, you might want to emit there an instruction that&#x27;s known to trap. You
can use an <code>UNIMP</code> pseudo-instruction, which should trap in nearly all systems.
The <em>de facto</em> standard implementation of this instruction is:</p><ul><li><p><code>C.UNIMP</code>: <code>0000</code>. The all-zeroes pattern is not a valid instruction. Any
system which traps on invalid instructions will thus trap on this <code>UNIMP</code>
instruction form. Despite not being a valid instruction, it still fits the
16-bit (compressed) instruction format, and so <code>0000 0000</code> is interpreted as
being two 16-bit <code>UNIMP</code> instructions.</p></li><li><p><code>UNIMP</code> : <code>C0001073</code>. This is an alias for <code>CSRRW x0, cycle, x0</code>. Since
<code>cycle</code> is a read-only CSR, then (whether this CSR exists or not) an attempt
to write into it will generate an illegal instruction exception. This 32-bit
form of <code>UNIMP</code> is emitted when targeting a system without the C extension,
or when the <code>.option norvc</code> directive is used.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pseudo-ops">Pseudo Ops<a class="hash-link" href="#pseudo-ops" title="Direct link to heading">​</a></h2><p>Both the RISC-V-specific and GNU .-prefixed options.</p><p>The following table lists assembler directives:</p><table><thead><tr><th align="left">Directive</th><th align="left">Arguments</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">.align</td><td align="left">integer</td><td align="left">align to power of 2 (alias for .p2align)</td></tr><tr><td align="left">.file</td><td align="left">&quot;filename&quot;</td><td align="left">emit filename FILE LOCAL symbol table</td></tr><tr><td align="left">.globl</td><td align="left">symbol_name</td><td align="left">emit symbol_name to symbol table (scope GLOBAL)</td></tr><tr><td align="left">.local</td><td align="left">symbol_name</td><td align="left">emit symbol_name to symbol table (scope LOCAL)</td></tr><tr><td align="left">.comm</td><td align="left">symbol_name,size,align</td><td align="left">emit common object to .bss section</td></tr><tr><td align="left">.common</td><td align="left">symbol_name,size,align</td><td align="left">emit common object to .bss section</td></tr><tr><td align="left">.ident</td><td align="left">&quot;string&quot;</td><td align="left">accepted for source compatibility</td></tr><tr><td align="left">.section</td><td align="left">[{.text,.data,.rodata,.bss}]</td><td align="left">emit section (if not present, default .text) and make current</td></tr><tr><td align="left">.size</td><td align="left">symbol, symbol</td><td align="left">accepted for source compatibility</td></tr><tr><td align="left">.text</td><td align="left"></td><td align="left">emit .text section (if not present) and make current</td></tr><tr><td align="left">.data</td><td align="left"></td><td align="left">emit .data section (if not present) and make current</td></tr><tr><td align="left">.rodata</td><td align="left"></td><td align="left">emit .rodata section (if not present) and make current</td></tr><tr><td align="left">.bss</td><td align="left"></td><td align="left">emit .bss section (if not present) and make current</td></tr><tr><td align="left">.string</td><td align="left">&quot;string&quot;</td><td align="left">emit string</td></tr><tr><td align="left">.asciz</td><td align="left">&quot;string&quot;</td><td align="left">emit string (alias for .string)</td></tr><tr><td align="left">.equ</td><td align="left">name, value</td><td align="left">constant definition</td></tr><tr><td align="left">.macro</td><td align="left">name arg1 <!-- -->[, argn]</td><td align="left">begin macro definition \argname to substitute</td></tr><tr><td align="left">.endm</td><td align="left"></td><td align="left">end macro definition</td></tr><tr><td align="left">.type</td><td align="left">symbol, @function</td><td align="left">accepted for source compatibility</td></tr><tr><td align="left">.option</td><td align="left">{rvc,norvc,pic,nopic,relax,norelax,push,pop}</td><td align="left">RISC-V options. Refer to <a href="#.option">.option</a> for a more detailed description.</td></tr><tr><td align="left">.byte</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">8-bit comma separated words</td></tr><tr><td align="left">.2byte</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">16-bit comma separated words</td></tr><tr><td align="left">.half</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">16-bit comma separated words</td></tr><tr><td align="left">.short</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">16-bit comma separated words</td></tr><tr><td align="left">.4byte</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">32-bit comma separated words</td></tr><tr><td align="left">.word</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">32-bit comma separated words</td></tr><tr><td align="left">.long</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">32-bit comma separated words</td></tr><tr><td align="left">.8byte</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">64-bit comma separated words</td></tr><tr><td align="left">.dword</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">64-bit comma separated words</td></tr><tr><td align="left">.quad</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">64-bit comma separated words</td></tr><tr><td align="left">.dtprelword</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">32-bit thread local word</td></tr><tr><td align="left">.dtpreldword</td><td align="left">expression <!-- -->[, expression]<!-- -->*</td><td align="left">64-bit thread local word</td></tr><tr><td align="left">.sleb128</td><td align="left">expression</td><td align="left">signed little endian base 128, DWARF</td></tr><tr><td align="left">.uleb128</td><td align="left">expression</td><td align="left">unsigned little endian base 128, DWARF</td></tr><tr><td align="left">.p2align</td><td align="left">p2,<!-- -->[pad_val=0]<!-- -->,max</td><td align="left">align to power of 2</td></tr><tr><td align="left">.balign</td><td align="left">b,<!-- -->[pad_val=0]</td><td align="left">byte align</td></tr><tr><td align="left">.zero</td><td align="left">integer</td><td align="left">zero bytes</td></tr><tr><td align="left">.variant_cc</td><td align="left">symbol_name</td><td align="left">annotate the symbol with variant calling convention</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-nameoptionaoption"><code>&lt;a name=.option&gt;&lt;/a&gt;.option</code><a class="hash-link" href="#a-nameoptionaoption" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="rvcnorvc"><code>rvc</code>/<code>norvc</code><a class="hash-link" href="#rvcnorvc" title="Direct link to heading">​</a></h4><p>Enable/disable the C-extension for the following code region.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="picnopic"><code>pic</code>/<code>nopic</code><a class="hash-link" href="#picnopic" title="Direct link to heading">​</a></h4><p>Set the code model to PIC (position independent code) or non-PIC. This will
affect the expansion of the <code>la</code> pseudoinstruction, refer to
<a href="#pseudoinstructions">listing of standard RISC-V pseudoinstructions</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="relaxnorelax"><code>relax</code>/<code>norelax</code><a class="hash-link" href="#relaxnorelax" title="Direct link to heading">​</a></h4><p>Enable/disable linker relaxation for the following code region.</p><p>NOTE: Code region follows by <code>.option relax</code> will emit
<code>R_RISCV_RELAX</code>/<code>R_RISCV_ALIGN</code> even linker unsupport relaxation, suggested
usage is using <code>.option norelax</code> with <code>.option push</code>/<code>.option pop</code> if
you want to disable linker relaxation on specific code region.</p><p>NOTE: Recommended way to disable linker relaxation of specific code region is
use <code>.option push</code>, <code>.option norelax</code> and <code>.option pop</code>, that prevent enabled
linker relaxation accidentally if user already disable linker relaxation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pushpop"><code>push</code>/<code>pop</code><a class="hash-link" href="#pushpop" title="Direct link to heading">​</a></h4><p>Push/pop current options to/from the options stack.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="assembler-relocation-functions">Assembler Relocation Functions<a class="hash-link" href="#assembler-relocation-functions" title="Direct link to heading">​</a></h2><p>The following table lists assembler relocation expansions:</p><table><thead><tr><th align="left">Assembler Notation</th><th align="left">Description</th><th align="left">Instruction / Macro</th></tr></thead><tbody><tr><td align="left">%hi(symbol)</td><td align="left">Absolute (HI20)</td><td align="left">lui</td></tr><tr><td align="left">%lo(symbol)</td><td align="left">Absolute (LO12)</td><td align="left">load, store, add</td></tr><tr><td align="left">%pcrel_hi(symbol)</td><td align="left">PC-relative (HI20)</td><td align="left">auipc</td></tr><tr><td align="left">%pcrel_lo(label)</td><td align="left">PC-relative (LO12)</td><td align="left">load, store, add</td></tr><tr><td align="left">%tprel_hi(symbol)</td><td align="left">TLS LE &quot;Local Exec&quot;</td><td align="left">lui</td></tr><tr><td align="left">%tprel_lo(symbol)</td><td align="left">TLS LE &quot;Local Exec&quot;</td><td align="left">load, store, add</td></tr><tr><td align="left">%tprel_add(symbol)</td><td align="left">TLS LE &quot;Local Exec&quot;</td><td align="left">add</td></tr><tr><td align="left">%tls_ie_pcrel_hi(symbol) <!-- -->*</td><td align="left">TLS IE &quot;Initial Exec&quot; (HI20)</td><td align="left">auipc</td></tr><tr><td align="left">%tls_gd_pcrel_hi(symbol) <!-- -->*</td><td align="left">TLS GD &quot;Global Dynamic&quot; (HI20)</td><td align="left">auipc</td></tr><tr><td align="left">%got_pcrel_hi(symbol) <!-- -->*</td><td align="left">GOT PC-relative (HI20)</td><td align="left">auipc</td></tr></tbody></table><p>*<!-- --> These reuse %pcrel_lo(label) for their lower half</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="labels">Labels<a class="hash-link" href="#labels" title="Direct link to heading">​</a></h2><p>Text labels are used as branch, unconditional jump targets and symbol offsets.
Text labels are added to the symbol table of the compiled module.</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">loop:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        j loop</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Numeric labels are used for local references. References to local labels are
suffixed with &#x27;f&#x27; for a forward reference or &#x27;b&#x27; for a backwards reference.</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        j 1b</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="absolute-addressing">Absolute addressing<a class="hash-link" href="#absolute-addressing" title="Direct link to heading">​</a></h2><p>The following example shows how to load an absolute address:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    lui a0, %hi(msg + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addi    a0, a0, %lo(msg + 1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which generates the following assembler output and relocations
as seen by <code>objdump</code>:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   00000537            lui a0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0: R_RISCV_HI20 msg+0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   00150513            addi    a0,a0,1 # 0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            4: R_RISCV_LO12_I   msg+0x1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="relative-addressing">Relative addressing<a class="hash-link" href="#relative-addressing" title="Direct link to heading">​</a></h2><p>The following example shows how to load a PC-relative address:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auipc   a0, %pcrel_hi(msg + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addi    a0, a0, %pcrel_lo(1b)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which generates the following assembler output and relocations
as seen by <code>objdump</code>:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   00000517            auipc   a0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0: R_RISCV_PCREL_HI20   msg+0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   00050513            mv  a0,a0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            4: R_RISCV_PCREL_LO12_I .L1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="got-indirect-addressing">GOT-indirect addressing<a class="hash-link" href="#got-indirect-addressing" title="Direct link to heading">​</a></h2><p>The following example shows how to load an address from the GOT:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    auipc   a0, %got_pcrel_hi(msg + 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld  a0, %pcrel_lo(1b)(a0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which generates the following assembler output and relocations
as seen by <code>objdump</code>:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   00000517            auipc   a0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0: R_RISCV_GOT_HI20 msg+0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   00050513            mv  a0,a0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            4: R_RISCV_PCREL_LO12_I .L1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-immediate">Load Immediate<a class="hash-link" href="#load-immediate" title="Direct link to heading">​</a></h2><p>The following example shows the <code>li</code> pseudo instruction which
is used to load immediate values:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    .equ    CONSTANT, 0xdeadbeef</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    li  a0, CONSTANT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which, for RV32I, generates the following assembler output, as seen by <code>objdump</code>:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">00000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   deadc537            lui a0,0xdeadc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   eef50513            addi    a0,a0,-273 # deadbeef &lt;CONSTANT+0x0&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-upper-immediates-immediate">Load Upper Immediate&#x27;s Immediate<a class="hash-link" href="#load-upper-immediates-immediate" title="Direct link to heading">​</a></h2><p>The immediate argument to <code>lui</code> is an integer in the interval <!-- -->[0x0, 0xfffff]<!-- -->.
Its compressed form, <code>c.lui</code>, accepts only those in the subintervals <!-- -->[0x1, 0x1f]<!-- --> and <!-- -->[0xfffe0, 0xfffff]<!-- -->. </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-address">Load Address<a class="hash-link" href="#load-address" title="Direct link to heading">​</a></h2><p>The following example shows the <code>la</code> pseudo instruction which is used to load
symbol addresses using the correct sequence based on whether the code is being
assembled as PIC:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    la  a0, msg + 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For non-PIC this is an alias for the <code>lla</code> pseudo instruction documented below.</p><p>For PIC this is an alias for the <code>lga</code> pseudo instruction documented below.</p><p>The <code>la</code> pseudo instruction is the preferred way for getting the address of
variables in assembly unless explicit control over PC-relative or GOT-indirect
addressing is required.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-local-address">Load Local Address<a class="hash-link" href="#load-local-address" title="Direct link to heading">​</a></h2><p>The following example shows the <code>lla</code> pseudo instruction which is used to load
local symbol addresses:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    lla a0, msg + 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This generates the following instructions and relocations as seen by <code>objdump</code>:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   00000517            auipc   a0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0: R_RISCV_PCREL_HI20   msg+0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   00050513            mv  a0,a0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            4: R_RISCV_PCREL_LO12_I .L0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-global-address">Load Global Address<a class="hash-link" href="#load-global-address" title="Direct link to heading">​</a></h2><p>The following example shows the <code>lga</code> pseudo instruction which is used to load
global symbol addresses:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    lga a0, msg + 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This generates the following instructions and relocations as seen by <code>objdump</code>
(for RV64; RV32 will use <code>lw</code> instead of <code>ld</code>):</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   00000517            auipc   a0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0: R_RISCV_GOT_HI20 msg+0x1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   00053503            ld  a0,0(a0) # 0 &lt;.text&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            4: R_RISCV_PCREL_LO12_I .L0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-and-store-global">Load and Store Global<a class="hash-link" href="#load-and-store-global" title="Direct link to heading">​</a></h2><p>The following pseudo instructions are available to load from and store to
global objects:</p><ul><li><code>l{b|h|w|d} &lt;rd&gt;, &lt;symbol&gt;</code>: load byte, half word, word or double word from global<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup></li><li><code>s{b|h|w|d} &lt;rd&gt;, &lt;symbol&gt;, &lt;rt&gt;</code>: store byte, half word, word or double word to global<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup></li><li><code>fl{h|w|d|q} &lt;rd&gt;, &lt;symbol&gt;, &lt;rt&gt;</code>: load half, float, double or quad precision from global<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup></li><li><code>fs{h|w|d|q} &lt;rd&gt;, &lt;symbol&gt;, &lt;rt&gt;</code>: store half, float, double or quad precision to global<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup></li></ul><p>The following example shows how these pseudo instructions are used:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    lw  a0, var1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fld fa0, var2, t0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sw  a0, var3, t0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fsd fa0, var4, t0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which generates the following assembler output and relocations
as seen by <code>objdump</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   00000517            auipc   a0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0: R_RISCV_PCREL_HI20   var1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   00052503            lw  a0,0(a0) # 0 &lt;.text&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            4: R_RISCV_PCREL_LO12_I .L0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   8:   00000297            auipc   t0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            8: R_RISCV_PCREL_HI20   var2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   c:   0002b507            fld fa0,0(t0) # 8 &lt;.text+0x8&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            c: R_RISCV_PCREL_LO12_I .L0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10:   00000297            auipc   t0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10: R_RISCV_PCREL_HI20  var3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  14:   00a2a023            sw  a0,0(t0) # 10 &lt;.text+0x10&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            14: R_RISCV_PCREL_LO12_S    .L0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  18:   00000297            auipc   t0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            18: R_RISCV_PCREL_HI20  var4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1c:   00a2b027            fsd fa0,0(t0) # 18 &lt;.text+0x18&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            1c: R_RISCV_PCREL_LO12_S    .L0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="constants">Constants<a class="hash-link" href="#constants" title="Direct link to heading">​</a></h2><p>The following example shows loading a constant using the <code>%hi</code> and
<code>%lo</code> assembler functions.</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    .equ    UART_BASE, 0x40003080</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    lui a0, %hi(UART_BASE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addi    a0, a0, %lo(UART_BASE)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which generates the following assembler output
as seen by <code>objdump</code>:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   40003537            lui a0,0x40003</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   08050513            addi    a0,a0,128 # 40003080 &lt;UART_BASE&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="function-calls">Function Calls<a class="hash-link" href="#function-calls" title="Direct link to heading">​</a></h2><p>The following pseudo instructions are available to call subroutines far from
the current position:</p><ul><li><code>call	&lt;symbol&gt;</code>: call away subroutine<sup id="fnref-1"><a href="#fn-1" class="footnote-ref">1</a></sup></li><li><code>call	&lt;rd&gt;, &lt;symbol&gt;</code>: call away subroutine<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup></li><li><code>tail	&lt;symbol&gt;</code>: tail call away subroutine<sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup></li><li><code>jump	&lt;symbol&gt;, &lt;rt&gt;</code>: jump to away routine<sup id="fnref-4"><a href="#fn-4" class="footnote-ref">4</a></sup></li></ul><p>The following example shows how these pseudo instructions are used:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    call    func1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tail    func2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jump    func3, t0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Which generates the following assembler output and relocations
as seen by <code>objdump</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0000000000000000 &lt;.text&gt;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   0:   00000097            auipc   ra,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            0: R_RISCV_CALL func1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   4:   000080e7            jalr    ra # 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   8:   00000317            auipc   t1,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            8: R_RISCV_CALL func2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   c:   00030067            jr  t1 # 0x8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  10:   00000297            auipc   t0,0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            10: R_RISCV_CALL    func3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  14:   00028067            jr  t0 # 0x10</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="floating-point-rounding-modes">Floating-point rounding modes<a class="hash-link" href="#floating-point-rounding-modes" title="Direct link to heading">​</a></h2><p>For floating-point instructions with a rounding mode field, the rounding mode
can be specified by adding an additional operand. e.g. <code>fcvt.w.s</code> with
round-to-zero can be written as <code>fcvt.w.s a0, fa0, rtz</code>. If unspecified, the
default <code>dyn</code> rounding mode will be used.</p><p>Supported rounding modes are as follows (must be specified in lowercase):</p><ul><li><code>rne</code>: round to nearest, ties to even</li><li><code>rtz</code>: round towards zero</li><li><code>rdn</code>: round down</li><li><code>rup</code>: round up</li><li><code>rmm</code>: round to nearest, ties to max magnitude</li><li><code>dyn</code>: dynamic rounding mode (the rounding mode specified in the <code>frm</code> field
of the <code>fcsr</code> register is used)</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="control-and-status-registers">Control and Status Registers<a class="hash-link" href="#control-and-status-registers" title="Direct link to heading">​</a></h2><p>The following code sample shows how to enable timer interrupts,
set and wait for a timer interrupt to occur:</p><div class="language-assembly codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-assembly codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">.equ RTC_BASE,      0x40000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.equ TIMER_BASE,    0x40004000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># setup machine trap vector</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1:      auipc   t0, %pcrel_hi(mtvec)        # load mtvec(hi)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addi    t0, t0, %pcrel_lo(1b)       # load mtvec(lo)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        csrrw   zero, mtvec, t0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># set mstatus.MIE=1 (enable M mode interrupt)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        li      t0, 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        csrrs   zero, mstatus, t0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># set mie.MTIE=1 (enable M mode timer interrupts)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        li      t0, 128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        csrrs   zero, mie, t0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># read from mtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        li      a0, RTC_BASE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ld      a1, 0(a0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># write to mtimecmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        li      a0, TIMER_BASE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        li      t0, 1000000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        add     a1, a1, t0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sd      a1, 0(a0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">loop:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        wfi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        j loop</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># break on interrupt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mtvec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        csrrc  t0, mcause, zero</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bgez t0, fail       # interrupt causes are less than zero</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        slli t0, t0, 1      # shift off high bit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        srli t0, t0, 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        li t1, 7            # check this is an m_timer interrupt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bne t0, t1, fail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        j pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pass:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        la a0, pass_msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jal puts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        j shutdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fail:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        la a0, fail_msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        jal puts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        j shutdown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.section .rodata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pass_msg:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .string &quot;PASS\n&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fail_msg:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .string &quot;FAIL\n&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-namepseudoinstructionsa-a-listing-of-standard-risc-v-pseudoinstructions"><code>&lt;a name=pseudoinstructions&gt;&lt;/a&gt;</code> A listing of standard RISC-V pseudoinstructions<a class="hash-link" href="#a-namepseudoinstructionsa-a-listing-of-standard-risc-v-pseudoinstructions" title="Direct link to heading">​</a></h2><table><thead><tr><th align="left">Pseudoinstruction</th><th align="left">Base Instruction(s)</th><th align="left">Meaning</th><th align="left">Comment</th></tr></thead><tbody><tr><td align="left">la rd, symbol</td><td align="left">auipc rd, symbol<!-- -->[31:12]<!-- -->; addi rd, rd, symbol<!-- -->[11:0]</td><td align="left">Load address</td><td align="left">With <code>.option nopic</code> (Default)</td></tr><tr><td align="left">la rd, symbol</td><td align="left">auipc rd, symbol@GOT<!-- -->[31:12]<!-- -->; l{w<!-- -->|<!-- -->d} rd, symbol@GOT<!-- -->[11:0]<!-- -->(<!-- -->rd<!-- -->)</td><td align="left">Load address</td><td align="left">With <code>.option pic</code></td></tr><tr><td align="left">lla rd, symbol</td><td align="left">auipc rd, symbol<!-- -->[31:12]<!-- -->; addi rd, rd, symbol<!-- -->[11:0]</td><td align="left">Load local address</td><td align="left"></td></tr><tr><td align="left">lga rd, symbol</td><td align="left">auipc rd, symbol@GOT<!-- -->[31:12]<!-- -->; l{w<!-- -->|<!-- -->d} rd, symbol@GOT<!-- -->[11:0]<!-- -->(<!-- -->rd<!-- -->)</td><td align="left">Load global address</td><td align="left"></td></tr><tr><td align="left">l{b<!-- -->|<!-- -->h<!-- -->|<!-- -->w<!-- -->|<!-- -->d} rd, symbol</td><td align="left">auipc rd, symbol<!-- -->[31:12]<!-- -->; l{b<!-- -->|<!-- -->h<!-- -->|<!-- -->w<!-- -->|<!-- -->d} rd, symbol<!-- -->[11:0]<!-- -->(<!-- -->rd<!-- -->)</td><td align="left">Load global</td><td align="left"></td></tr><tr><td align="left">s{b<!-- -->|<!-- -->h<!-- -->|<!-- -->w<!-- -->|<!-- -->d} rd, symbol, rt</td><td align="left">auipc rt, symbol<!-- -->[31:12]<!-- -->; s{b<!-- -->|<!-- -->h<!-- -->|<!-- -->w<!-- -->|<!-- -->d} rd, symbol<!-- -->[11:0]<!-- -->(<!-- -->rt<!-- -->)</td><td align="left">Store global</td><td align="left"></td></tr><tr><td align="left">fl{w<!-- -->|<!-- -->d} rd, symbol, rt</td><td align="left">auipc rt, symbol<!-- -->[31:12]<!-- -->; fl{w<!-- -->|<!-- -->d} rd, symbol<!-- -->[11:0]<!-- -->(<!-- -->rt<!-- -->)</td><td align="left">Floating-point load global</td><td align="left"></td></tr><tr><td align="left">fs{w<!-- -->|<!-- -->d} rd, symbol, rt</td><td align="left">auipc rt, symbol<!-- -->[31:12]<!-- -->; fs{w<!-- -->|<!-- -->d} rd, symbol<!-- -->[11:0]<!-- -->(<!-- -->rt<!-- -->)</td><td align="left">Floating-point store global</td><td align="left"></td></tr><tr><td align="left">nop</td><td align="left">addi x0, x0, 0</td><td align="left">No operation</td><td align="left"></td></tr><tr><td align="left">li rd, immediate</td><td align="left"><em>Myriad sequences</em></td><td align="left">Load immediate</td><td align="left"></td></tr><tr><td align="left">mv rd, rs</td><td align="left">addi rd, rs, 0</td><td align="left">Copy register</td><td align="left"></td></tr><tr><td align="left">not rd, rs</td><td align="left">xori rd, rs, -1</td><td align="left">Ones’ complement</td><td align="left"></td></tr><tr><td align="left">neg rd, rs</td><td align="left">sub rd, x0, rs</td><td align="left">Two’s complement</td><td align="left"></td></tr><tr><td align="left">negw rd, rs</td><td align="left">subw rd, x0, rs</td><td align="left">Two’s complement word</td><td align="left"></td></tr><tr><td align="left">sext.b rd, rs</td><td align="left">slli rd, rs, XLEN - 8; srai rd, rd, XLEN - 8</td><td align="left">Sign extend byte</td><td align="left">It will expand to another instruction sequence when B extension is available*<!-- -->[1]</td></tr><tr><td align="left">sext.h rd, rs</td><td align="left">slli rd, rs, XLEN - 16; srai rd, rd, XLEN - 16</td><td align="left">Sign extend half word</td><td align="left">It will expand to another instruction sequence when B extension is available*<!-- -->[1]</td></tr><tr><td align="left">sext.w rd, rs</td><td align="left">addiw rd, rs, 0</td><td align="left">Sign extend word</td><td align="left"></td></tr><tr><td align="left">zext.b rd, rs</td><td align="left">andi rd, rs, 255</td><td align="left">Zero extend byte</td><td align="left"></td></tr><tr><td align="left">zext.h rd, rs</td><td align="left">slli rd, rs, XLEN - 16; srli rd, rd, XLEN - 16</td><td align="left">Zero extend half word</td><td align="left">It will expand to another instruction sequence when B extension is available*<!-- -->[1]</td></tr><tr><td align="left">zext.w rd, rs</td><td align="left">slli rd, rs, XLEN - 32; srli rd, rd, XLEN - 32</td><td align="left">Zero extend word</td><td align="left">It will expand to another instruction sequence when B extension is available*<!-- -->[1]</td></tr><tr><td align="left">seqz rd, rs</td><td align="left">sltiu rd, rs, 1</td><td align="left">Set if = zero</td><td align="left"></td></tr><tr><td align="left">snez rd, rs</td><td align="left">sltu rd, x0, rs</td><td align="left">Set if != zero</td><td align="left"></td></tr><tr><td align="left">sltz rd, rs</td><td align="left">slt rd, rs, x0</td><td align="left">Set if &lt; zero</td><td align="left"></td></tr><tr><td align="left">sgtz rd, rs</td><td align="left">slt rd, x0, rs</td><td align="left">Set if &gt; zero</td><td align="left"></td></tr><tr><td align="left">fmv.s rd, rs</td><td align="left">fsgnj.s rd, rs, rs</td><td align="left">Copy single-precision register</td><td align="left"></td></tr><tr><td align="left">fabs.s rd, rs</td><td align="left">fsgnjx.s rd, rs, rs</td><td align="left">Single-precision absolute value</td><td align="left"></td></tr><tr><td align="left">fneg.s rd, rs</td><td align="left">fsgnjn.s rd, rs, rs</td><td align="left">Single-precision negate</td><td align="left"></td></tr><tr><td align="left">fmv.d rd, rs</td><td align="left">fsgnj.d rd, rs, rs</td><td align="left">Copy double-precision register</td><td align="left"></td></tr><tr><td align="left">fabs.d rd, rs</td><td align="left">fsgnjx.d rd, rs, rs</td><td align="left">Double-precision absolute value</td><td align="left"></td></tr><tr><td align="left">fneg.d rd, rs</td><td align="left">fsgnjn.d rd, rs, rs</td><td align="left">Double-precision negate</td><td align="left"></td></tr><tr><td align="left">beqz rs, offset</td><td align="left">beq rs, x0, offset</td><td align="left">Branch if = zero</td><td align="left"></td></tr><tr><td align="left">bnez rs, offset</td><td align="left">bne rs, x0, offset</td><td align="left">Branch if != zero</td><td align="left"></td></tr><tr><td align="left">blez rs, offset</td><td align="left">bge x0, rs, offset</td><td align="left">Branch if ≤ zero</td><td align="left"></td></tr><tr><td align="left">bgez rs, offset</td><td align="left">bge rs, x0, offset</td><td align="left">Branch if ≥ zero</td><td align="left"></td></tr><tr><td align="left">bltz rs, offset</td><td align="left">blt rs, x0, offset</td><td align="left">Branch if &lt; zero</td><td align="left"></td></tr><tr><td align="left">bgtz rs, offset</td><td align="left">blt x0, rs, offset</td><td align="left">Branch if &gt; zero</td><td align="left"></td></tr><tr><td align="left">bgt rs, rt, offset</td><td align="left">blt rt, rs, offset</td><td align="left">Branch if &gt;</td><td align="left"></td></tr><tr><td align="left">ble rs, rt, offset</td><td align="left">bge rt, rs, offset</td><td align="left">Branch if ≤</td><td align="left"></td></tr><tr><td align="left">bgtu rs, rt, offset</td><td align="left">bltu rt, rs, offset</td><td align="left">Branch if &gt;, unsigned</td><td align="left"></td></tr><tr><td align="left">bleu rs, rt, offset</td><td align="left">bgeu rt, rs, offset</td><td align="left">Branch if ≤, unsigned</td><td align="left"></td></tr><tr><td align="left">j offset</td><td align="left">jal x0, offset</td><td align="left">Jump</td><td align="left"></td></tr><tr><td align="left">jal offset</td><td align="left">jal x1, offset</td><td align="left">Jump and link</td><td align="left"></td></tr><tr><td align="left">jr rs</td><td align="left">jalr x0, rs, 0</td><td align="left">Jump register</td><td align="left"></td></tr><tr><td align="left">jalr rs</td><td align="left">jalr x1, rs, 0</td><td align="left">Jump and link register</td><td align="left"></td></tr><tr><td align="left">ret</td><td align="left">jalr x0, x1, 0</td><td align="left">Return from subroutine</td><td align="left"></td></tr><tr><td align="left">call offset</td><td align="left">auipc x6, offset<!-- -->[31:12]<!-- -->; jalr x1, x6, offset<!-- -->[11:0]</td><td align="left">Call far-away subroutine</td><td align="left"></td></tr><tr><td align="left">tail offset</td><td align="left">auipc x6, offset<!-- -->[31:12]<!-- -->; jalr x0, x6, offset<!-- -->[11:0]</td><td align="left">Tail call far-away subroutine</td><td align="left"></td></tr><tr><td align="left">fence</td><td align="left">fence iorw, iorw</td><td align="left">Fence on all memory and I/O</td><td align="left"></td></tr></tbody></table><ul><li>[1]<!-- --> We don&#x27;t specify the code sequence when the B-extension is present, since B-extension still not ratified or frozen. We will specify the expansion sequence once it&#x27;s frozen.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pseudoinstructions-for-accessing-control-and-status-registers">Pseudoinstructions for accessing control and status registers<a class="hash-link" href="#pseudoinstructions-for-accessing-control-and-status-registers" title="Direct link to heading">​</a></h2><table><thead><tr><th align="left">Pseudoinstruction</th><th align="left">Base Instruction(s)</th><th align="left">Meaning</th></tr></thead><tbody><tr><td align="left">rdinstret<!-- -->[h]<!-- --> rd</td><td align="left">csrrs rd, instret<!-- -->[h]<!-- -->, x0</td><td align="left">Read instructions-retired counter</td></tr><tr><td align="left">rdcycle<!-- -->[h]<!-- --> rd</td><td align="left">csrrs rd, cycle<!-- -->[h]<!-- -->, x0</td><td align="left">Read cycle counter</td></tr><tr><td align="left">rdtime<!-- -->[h]<!-- --> rd</td><td align="left">csrrs rd, time<!-- -->[h]<!-- -->, x0</td><td align="left">Read real-time clock</td></tr><tr><td align="left">csrr rd, csr</td><td align="left">csrrs rd, csr, x0</td><td align="left">Read CSR</td></tr><tr><td align="left">csrw csr, rs</td><td align="left">csrrw x0, csr, rs</td><td align="left">Write CSR</td></tr><tr><td align="left">csrs csr, rs</td><td align="left">csrrs x0, csr, rs</td><td align="left">Set bits in CSR</td></tr><tr><td align="left">csrc csr, rs</td><td align="left">csrrc x0, csr, rs</td><td align="left">Clear bits in CSR</td></tr><tr><td align="left">csrwi csr, imm</td><td align="left">csrrwi x0, csr, imm</td><td align="left">Write CSR, immediate</td></tr><tr><td align="left">csrsi csr, imm</td><td align="left">csrrsi x0, csr, imm</td><td align="left">Set bits in CSR, immediate</td></tr><tr><td align="left">csrci csr, imm</td><td align="left">csrrci x0, csr, imm</td><td align="left">Clear bits in CSR, immediate</td></tr><tr><td align="left">frcsr rd</td><td align="left">csrrs rd, fcsr, x0</td><td align="left">Read FP control/status register</td></tr><tr><td align="left">fscsr rd, rs</td><td align="left">csrrw rd, fcsr, rs</td><td align="left">Swap FP control/status register</td></tr><tr><td align="left">fscsr rs</td><td align="left">csrrw x0, fcsr, rs</td><td align="left">Write FP control/status register</td></tr><tr><td align="left">frrm rd</td><td align="left">csrrs rd, frm, x0</td><td align="left">Read FP rounding mode</td></tr><tr><td align="left">fsrm rd, rs</td><td align="left">csrrw rd, frm, rs</td><td align="left">Swap FP rounding mode</td></tr><tr><td align="left">fsrm rs</td><td align="left">csrrw x0, frm, rs</td><td align="left">Write FP rounding mode</td></tr><tr><td align="left">fsrmi rd, imm</td><td align="left">csrrwi rd, frm, imm</td><td align="left">Swap FP rounding mode, immediate</td></tr><tr><td align="left">fsrmi imm</td><td align="left">csrrwi x0, frm, imm</td><td align="left">Write FP rounding mode, immediate</td></tr><tr><td align="left">frflags rd</td><td align="left">csrrs rd, fflags, x0</td><td align="left">Read FP exception flags</td></tr><tr><td align="left">fsflags rd, rs</td><td align="left">csrrw rd, fflags, rs</td><td align="left">Swap FP exception flags</td></tr><tr><td align="left">fsflags rs</td><td align="left">csrrw x0, fflags, rs</td><td align="left">Write FP exception flags</td></tr><tr><td align="left">fsflagsi rd, imm</td><td align="left">csrrwi rd, fflags, imm</td><td align="left">Swap FP exception flags, immediate</td></tr><tr><td align="left">fsflagsi imm</td><td align="left">csrrwi x0, fflags, imm</td><td align="left">Write FP exception flags, immediate</td></tr></tbody></table><div class="footnotes"><hr><ol><li id="fn-1">the first operand is implicitly used as a scratch register.<a href="#fnref-1" class="footnote-backref">↩</a></li><li id="fn-2">the last operand specifies the scratch register to be used.<a href="#fnref-2" class="footnote-backref">↩</a></li><li id="fn-3"><code>t1</code> is implicitly used as a scratch register.<a href="#fnref-3" class="footnote-backref">↩</a></li><li id="fn-4">similar to <code>tail &lt;symbol&gt;</code>, but <code>&lt;rt&gt;</code> is used as the scratch register instead.<a href="#fnref-4" class="footnote-backref">↩</a></li></ol></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Skill/ASM/RISC-V/RISC-V定时器及中断"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RISC-V 定时器及中断</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Skill/ASM/x86/X86-64汇编"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">X86-64 汇编</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#general-registers" class="table-of-contents__link toc-highlight">General registers</a></li><li><a href="#control-registers" class="table-of-contents__link toc-highlight">Control registers</a></li><li><a href="#floating-point-registers-rv32f" class="table-of-contents__link toc-highlight">Floating Point registers (RV32F)</a></li><li><a href="#vector-registers-rv32v" class="table-of-contents__link toc-highlight">Vector registers (RV32V)</a></li><li><a href="#instructions" class="table-of-contents__link toc-highlight">Instructions</a></li><li><a href="#instruction-aliases" class="table-of-contents__link toc-highlight">Instruction Aliases</a></li><li><a href="#pseudo-ops" class="table-of-contents__link toc-highlight">Pseudo Ops</a><ul><li><a href="#a-nameoptionaoption" class="table-of-contents__link toc-highlight"><code>&lt;a name=.option&gt;&lt;/a&gt;.option</code></a></li></ul></li><li><a href="#assembler-relocation-functions" class="table-of-contents__link toc-highlight">Assembler Relocation Functions</a></li><li><a href="#labels" class="table-of-contents__link toc-highlight">Labels</a></li><li><a href="#absolute-addressing" class="table-of-contents__link toc-highlight">Absolute addressing</a></li><li><a href="#relative-addressing" class="table-of-contents__link toc-highlight">Relative addressing</a></li><li><a href="#got-indirect-addressing" class="table-of-contents__link toc-highlight">GOT-indirect addressing</a></li><li><a href="#load-immediate" class="table-of-contents__link toc-highlight">Load Immediate</a></li><li><a href="#load-upper-immediates-immediate" class="table-of-contents__link toc-highlight">Load Upper Immediate&#39;s Immediate</a></li><li><a href="#load-address" class="table-of-contents__link toc-highlight">Load Address</a></li><li><a href="#load-local-address" class="table-of-contents__link toc-highlight">Load Local Address</a></li><li><a href="#load-global-address" class="table-of-contents__link toc-highlight">Load Global Address</a></li><li><a href="#load-and-store-global" class="table-of-contents__link toc-highlight">Load and Store Global</a></li><li><a href="#constants" class="table-of-contents__link toc-highlight">Constants</a></li><li><a href="#function-calls" class="table-of-contents__link toc-highlight">Function Calls</a></li><li><a href="#floating-point-rounding-modes" class="table-of-contents__link toc-highlight">Floating-point rounding modes</a></li><li><a href="#control-and-status-registers" class="table-of-contents__link toc-highlight">Control and Status Registers</a></li><li><a href="#a-namepseudoinstructionsa-a-listing-of-standard-risc-v-pseudoinstructions" class="table-of-contents__link toc-highlight"><code>&lt;a name=pseudoinstructions&gt;&lt;/a&gt;</code> A listing of standard RISC-V pseudoinstructions</a></li><li><a href="#pseudoinstructions-for-accessing-control-and-status-registers" class="table-of-contents__link toc-highlight">Pseudoinstructions for accessing control and status registers</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Doongz Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f9aa80d1.js"></script>
<script src="/assets/js/main.0ded408c.js"></script>
</body>
</html>