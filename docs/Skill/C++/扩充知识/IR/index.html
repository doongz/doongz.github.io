<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Skill/C++/扩充知识/IR">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Intermediate Representations | Doongz&#x27;s Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://doongz.github.io/docs/Skill/C++/扩充知识/IR"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Intermediate Representations | Doongz&#x27;s Site"><meta data-rh="true" name="description" content="来源：https://cs.lmu.edu/~ray/notes/ir/"><meta data-rh="true" property="og:description" content="来源：https://cs.lmu.edu/~ray/notes/ir/"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doongz.github.io/docs/Skill/C++/扩充知识/IR"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Skill/C++/扩充知识/IR" hreflang="en"><link data-rh="true" rel="alternate" href="https://doongz.github.io/docs/Skill/C++/扩充知识/IR" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Doongz&#39;s Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Doongz&#39;s Site Atom Feed">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bbae31c2.css">
<link rel="preload" href="/assets/js/runtime~main.958a4673.js" as="script">
<link rel="preload" href="/assets/js/main.715bfe53.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Home page</b></a><a class="navbar__item navbar__link" href="/docs/catalogue-algo">Algorithm</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/catalogue-skill">Skill</a><a class="navbar__item navbar__link" href="/docs/catalogue-knowledge">Knowledge</a><a class="navbar__item navbar__link" href="/community/support">Community</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Courses</a><ul class="dropdown__menu"><li><a href="https://github.com/doongz/mlc-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Machine Learning Compilation<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs229" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stanford CS229: Machine Learning<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/aics" target="_blank" rel="noopener noreferrer" class="dropdown__link">中国科学院 智能计算系统<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/cs50-ai" target="_blank" rel="noopener noreferrer" class="dropdown__link">Harvard CS50’s Introduction to AI with Python<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.824" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.824 Distributed Systems<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/os-workbench" target="_blank" rel="noopener noreferrer" class="dropdown__link">南京大学 操作系统：设计与实现<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/doongz/mit-6.s081" target="_blank" rel="noopener noreferrer" class="dropdown__link">MIT-6.S081 Operating Systems Engineering<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/doongz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/catalogue-skill">Catalogue</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/ASM/RISC-V/汇编语言格式及ABI">ASM</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Android/Android概述">Android</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/C/基础知识/数据类型">C</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/Skill/C++/基础知识/基本数据类型">C++</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/C++/基础知识/基本数据类型">基础知识</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Skill/C++/面向对象/类和对象">面向对象</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/Skill/C++/标准模板库/">STL 概述</a><button aria-label="Toggle the collapsible sidebar category &#x27;STL 概述&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/Skill/C++/扩充知识/符号Symbol">扩充知识</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/C++/扩充知识/符号Symbol">深入理解Symbol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/C++/扩充知识/uint8_t">uint8_t / uint16_t / uint32_t /uint64_t</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/C++/扩充知识/右值引用和std::move">一文读懂C++右值引用和std::move</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Skill/C++/扩充知识/IR">Intermediate Representations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/C++/扩充知识/so动态库">so动态库</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/C++/扩充知识/printf彩色">printf 彩色</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Skill/C++/常用函数">常用函数</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Golang/基础知识/条件判断">Golang</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Skill/LaTeX/">LaTex</a><button aria-label="Toggle the collapsible sidebar category &#x27;LaTex&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Linux/POSIX">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/Skill/Markdown/">README</a><button aria-label="Toggle the collapsible sidebar category &#x27;README&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Skill/Mermaid/">mermaid</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/Python/运算符">Python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/SQL/数据库理论">SQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/工具链/工具&amp;网站">工具链</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/常用CLI/docker-CLI">常用CLI</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/Skill/设计模式/多态和多态性">设计模式</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">C++</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">扩充知识</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Intermediate Representations</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Intermediate Representations</h1><p>来源：<a href="https://cs.lmu.edu/~ray/notes/ir/" target="_blank" rel="noopener noreferrer">https://cs.lmu.edu/~ray/notes/ir/</a></p><p><em>You can’t really write a translator, or even an interpreter, for a complex language, without using an intermediate representation.</em></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-an-ir">What is an IR?<a class="hash-link" href="#what-is-an-ir" title="Direct link to heading">​</a></h2><p>An intermediate representation is any representation of a program “between” the source and target languages.</p><p>In a real compiler, you might see <em>several</em> intermediate representations!</p><p><img loading="lazy" alt="multiple-irs.png" src="data:image/png;base64,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" width="628" height="84" class="img_ev3q"></p><p>Sometimes people have designed IRs to be fairly independent of the source and target languages, and yet very general, so that it can be used to build a whole family of compilers.</p><p><img loading="lazy" alt="single-ir.png" src="/assets/images/single-ir-2c0a997c24ae4b57c377fe01d77bedc7.png" width="528" height="438" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-use-an-ir">Why use an IR?<a class="hash-link" href="#why-use-an-ir" title="Direct link to heading">​</a></h2><p>We use intermediate representations for at least four reasons:</p><ol><li>Because translation appears to <em>inherently</em> require analysis and synthesis. Word-for-word translation does not work.</li><li>To break the difficult problem of translation into two simpler, more manageable pieces.</li><li>To build retargetable compilers:<ul><li>We can build new back ends for an existing front end (making the source language <em>more portable across machines)</em>.</li><li>We can build a new front-end for an existing back end (so a new machine can quickly get a set of compilers for different source languages).</li><li>We only have to write 2𝑛2n half-compilers instead of 𝑛(𝑛−1)n(n−1) full compilers. (Though this might be a bit of an exaggeration in practice!)</li></ul></li><li>To perform <em>machine independent</em> optimizations.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="types-of-intermediate-representations">Types of Intermediate Representations<a class="hash-link" href="#types-of-intermediate-representations" title="Direct link to heading">​</a></h2><p>Intermediate representations come in many flavors:</p><ul><li>Structured (graph or tree-based), something like a AST decorated a bit, and maybe simplified or desugared a bit, perhaps slightly restructured to make certain control or data flows explicit and easier to manipulate</li><li>Flat, tuple-based, generally <em>three-address code</em> (quadruples)</li><li>Flat, stack-based</li></ul><p>We’ll use a running example code fragment to illustrate various options.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">while (x &lt; 4 * y) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x = y / 3 &gt;&gt; x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (y) print x - 3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="semantic-graph">Semantic Graph<a class="hash-link" href="#semantic-graph" title="Direct link to heading">​</a></h3><p>Generally the “first” IR we make is just an abstract syntax tree, semantically analzyed and type checked and annotated and transformed into a graph. Generally this graph is still close enough to the source code so that the source program can be reconstructed.</p><p>Trivial example:</p><p><img loading="lazy" alt="irgraphexample.gif" src="data:image/gif;base64,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" width="431" height="337" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tuples">Tuples<a class="hash-link" href="#tuples" title="Direct link to heading">​</a></h3><p>Tuples are stored as on the left column, but usually rendered as on the right.</p><p><img loading="lazy" alt="image-20221215000519187" src="/assets/images/image-20221215000519187-b0c4d5e2d3ab193ee94771608b05661f.png" width="988" height="548" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stack-code">Stack Code<a class="hash-link" href="#stack-code" title="Direct link to heading">​</a></h3><p>This is surprisingly common. Here’s how our running example might look:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    goto L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">L1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load_constant 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    div</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    store x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jump_if_zero L3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load_constant 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sub</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">L3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">L2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load_constant 4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    load y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    less_than</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    jump_if_not_zero L1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="levels-of-intermediate-representations">Levels of Intermediate Representations<a class="hash-link" href="#levels-of-intermediate-representations" title="Direct link to heading">​</a></h2><p>Generally we recognize three levels sophistication:</p><ul><li><p>High-level</p><p>Looks a lot like the source language, with structured objects like arrays and structs.</p></li><li><p>Medium-level</p><p>There are no structured objects, but still target language independent</p></li><li><p>Low-level</p><p>Extremely close to target language</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tuples-1">Tuples<a class="hash-link" href="#tuples-1" title="Direct link to heading">​</a></h2><p>Here is a running C++ example to illustrate various tuple formulations:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">double a[20][10];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for (int i = 0; i &lt; n; i += di)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    a[i][j+2] = j;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-tuples">High-Level Tuples<a class="hash-link" href="#high-level-tuples" title="Direct link to heading">​</a></h3><p>Staying close to the source language, tuple operands can be huge structures and operations can be crazy powerful.</p><ul><li>Keeps structure of source language program explicit</li><li>Source program can be reconstructed from it</li><li>Operands are semantic objects, including arrays and structs</li><li>No breaking down of array indexing computations</li><li>No thought of registers</li><li>No concern for runtime systems</li></ul><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(COPY, 0, i)                        i := 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LABEL, L1)                    L1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(JGE, i, n, L2)                     if i &gt;= n goto L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(INDEX, a, i, t0)                   t0 := a[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, j, 2, t1)                     t1 := j + 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(INDEX, t0, t1, t2)                 t2 := t0[t1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(COPY_TO_DEREF, j, t2)              *t2 := j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(INCJUMP, i, di, L1)                i += di, goto L1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LABEL, L2)                    L2:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="medium-level">Medium-Level<a class="hash-link" href="#medium-level" title="Direct link to heading">​</a></h3><p>Now we get break things down a little.</p><ul><li>Can be source or target oriented</li><li>Language and machine independent</li><li>Break down data structure references to deal only with simple ints and floats</li><li>Great for architecture-independent optimizations</li></ul><p>When constructing a medium level IR, the IR generator must be told about the sizes of source language datatypes. Assume for the following example that doubles require 8 bytes and ints require 4 bytes:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(COPY, 0, i)                        i := 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LABEL, L1)                    L1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(JGE, i, n, L2)                     if i &gt;= n goto L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(MUL, i, 80, t0)                    t0 := i * 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, a, t0, t1)                    t1 := a + t0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, j, 2, t2)                     t2 := j + 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(MUL, t2, 8, t3)                    t3 := t2 * 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, t1, t3, t4)                   t4 := t1 + t3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(COPY_TO_DEREF, j, t4)              *t4 := j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, i, di, i)                     i := i + di</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(JUMP, L1)                          goto L1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LABEL, L2)                    L2:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Some languages will require bounds checking on arrays and a different treatment of for-loops.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="low-level">Low-Level<a class="hash-link" href="#low-level" title="Direct link to heading">​</a></h3><p>Now we think about real machines.</p><ul><li>Extremely close to machine architecture</li><li>Architecture dependent</li><li>Deviates from target language only in its inclusion of pseudo-operations and symbolic (virtual) registers</li><li>Intimiately concerned with run-time storage management issues like stack frames and paramater passing mechanisms</li><li>For architecture dependent optimizations</li></ul><p>Example time! Suppose in our example we know the target is a RISC processor with no memory operations. Variable 𝑗j can go in <code>r1</code> and 𝑛n in <code>r2</code> and 𝑑𝑖di in <code>r3</code>. They’re not changed in this loop, so we needn’t save them at the end. We might get something like:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(LDC, 0, r0)                        r0 := 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LOAD, j, r1)                       r1 := j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LOAD, n, r2)                       r2 := n</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LOAD, di, r3)                      r3 := di</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LOAD, a, r4)                       r4 := a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LABEL, L1)                    L1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(JGE, r0, r2, L2)                   if r0 &gt;= r2 goto L2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(MUL, r0, 80, r5)                   r5 := r0 * 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, r4, r5, r6)                   r6 := r4 + r5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, r1, 2, r7)                    r7 := r1 + 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(MUL, r7, 8, r8)                    r8 := r7 * 8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, r6, r8, r9)                   r9 := r6 + r8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(TOFLOAT, r1, f0)                   f0 := tofloat r1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(STOREIND, f0, r9)                  *r9 := f0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(ADD, r0, r3, r0)                   r0 := r0 + r3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(JUMP, L1)                          goto L1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(LABEL, L2)                    L2:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="structures">Structures<a class="hash-link" href="#structures" title="Direct link to heading">​</a></h2><p>Some structures generally associated with IRs include:</p><ul><li>CFG: control flow graph</li><li>PDG: program dependence graph</li><li>SSA: single static assignment</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="control-flow-graphs">Control Flow Graphs<a class="hash-link" href="#control-flow-graphs" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="definition">Definition<a class="hash-link" href="#definition" title="Direct link to heading">​</a></h3><p>A <strong>control flow graph</strong> is a graph whose nodes are basic blocks and whose edges are transitions between blocks.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-blocks">Basic Blocks<a class="hash-link" href="#basic-blocks" title="Direct link to heading">​</a></h3><p>A <strong>basic block</strong> is a:</p><ul><li>maximal-length sequence of instructions that will execute in its entirety</li><li>maximal-length straight-line code block</li><li>maximal-length code block with only one entry and one exit</li></ul><p>... in the abscence of hardware faults, interrupts, crashes, threading problems, etc.</p><p>To locate basic blocks in flattened code:</p><ul><li><strong>Starts with</strong>: (1) target of a branch (label) or (2) the instruction after a conditional branch</li><li><strong>Ends with</strong>: (1) a branch or (2) the instruction before the target of a branch.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-control-flow-graph">Example Control Flow Graph<a class="hash-link" href="#example-control-flow-graph" title="Direct link to heading">​</a></h3><p><img loading="lazy" alt="image-20221215000631866" src="/assets/images/image-20221215000631866-cb40db48385fedb2e11a79ef3fa24a94.png" width="1512" height="774" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="single-static-assignment">Single Static Assignment<a class="hash-link" href="#single-static-assignment" title="Direct link to heading">​</a></h2><p>No notes here yet, for now, see <a href="https://en.wikipedia.org/wiki/Static_single_assignment_form" target="_blank" rel="noopener noreferrer">Wikipedia</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-irs">Example IRs<a class="hash-link" href="#example-irs" title="Direct link to heading">​</a></h2><p>Here are a few things that qualify as intermediate representations, or, at least, things a compiler front-end may output:</p><ul><li><p><a href="http://gcc.gnu.org/onlinedocs/gccint/RTL.html" target="_blank" rel="noopener noreferrer">GNU RTL</a></p><p>The intermediate language for the many source and target languages of the <a href="http://gcc.gnu.org/" target="_blank" rel="noopener noreferrer">GNU Compiler Collection</a>.</p></li><li><p>Diana</p><p>Descriptive Intermediate Attributed Notation for Ada. No longer used by major Ada compilers.</p></li><li><p><a href="http://en.wikipedia.org/wiki/P-Code_machine" target="_blank" rel="noopener noreferrer">PCODE</a></p><p>The intermediate language of early Pascal compilers. Stack based. Responsible for wide adoption of Pascal in the 1970s.</p></li><li><p><a href="https://en.wikipedia.org/wiki/Java_virtual_machine" target="_blank" rel="noopener noreferrer">Java Virtual Machine</a></p><p>Another virtual machine specification. Almost all Java compilers use this format. So do nearly all Scala, Ceylon, Kotlin, and Groovy compilers. Hundreds of other languages use it as well. JVM code can be interpreted, run on specialized hardware, or <a href="http://en.wikipedia.org/wiki/Just-in-time" target="_blank" rel="noopener noreferrer">jitted</a>.</p></li><li><p><a href="https://cs.lmu.edu/~ray/notes/squid" target="_blank" rel="noopener noreferrer">Squid</a></p><p>One I made up myself.</p></li><li><p>Rust Intermediate Languages</p><p>The compiler Rustc transforms source first in to a <a href="https://rustc-dev-guide.rust-lang.org/hir.html" target="_blank" rel="noopener noreferrer">High-Level Intermediate Language (HIR)</a>, then into the Mid-Level Intermediate Language (MIR), then into LLVM. The MIR was introduced in <a href="https://blog.rust-lang.org/2016/04/19/MIR.html" target="_blank" rel="noopener noreferrer">this blog post</a>. You can read more in the <a href="https://github.com/rust-lang/rfcs/blob/master/text/1211-mir.md" target="_blank" rel="noopener noreferrer">original request for it</a> and in the <a href="https://rustc-dev-guide.rust-lang.org/mir/index.html" target="_blank" rel="noopener noreferrer">Rustc book</a>.</p></li><li><p><a href="http://en.wikipedia.org/wiki/Common_Intermediate_Language" target="_blank" rel="noopener noreferrer">CIL</a></p><p>Common Intermediate Language. Languages in Microsoft’s .NET framework (such as C+, VB.NET, etc.) compile to CIL, which is then assembled into bytecode.</p></li><li><p><a href="https://en.wikipedia.org/wiki/C_(programming_language)" target="_blank" rel="noopener noreferrer">C</a></p><p>Why not? It’s widely available and the whole back end is already done within the C compiler.</p></li><li><p><a href="https://en.wikipedia.org/wiki/C--" target="_blank" rel="noopener noreferrer">C--</a></p><p>Kind of like using C, but C-- is designed explicitly to be an intermediate language, and even includes a run-time interface to make it easier to do garbage collection and exception handling. Seems to be defunct.</p></li><li><p><a href="http://llvm.org/" target="_blank" rel="noopener noreferrer">LLVM</a></p><p>The new hotness. Much more than just a VM.</p></li><li><p>SIL</p><p>The Swift Intermediate Language. <a href="http://llvm.org/devmtg/2015-10/slides/GroffLattner-SILHighLevelIR.pdf" target="_blank" rel="noopener noreferrer">Here is a nice presentation on SIL</a>.</p></li><li><p><a href="http://asmjs.org/" target="_blank" rel="noopener noreferrer">asm.js</a></p><p>A low-level subset of JavaScript.</p></li><li><p><a href="http://webassembly.org/" target="_blank" rel="noopener noreferrer">Web Assembly</a></p><p>An efficient and fast stack-based virtual machine.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-jvm-example">A JVM Example<a class="hash-link" href="#a-jvm-example" title="Direct link to heading">​</a></h3><p>TODO</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="an-llvm-example">An LLVM Example<a class="hash-link" href="#an-llvm-example" title="Direct link to heading">​</a></h3><p>TODO</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="an-sil-example">An SIL Example<a class="hash-link" href="#an-sil-example" title="Direct link to heading">​</a></h3><p>TODO</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-web-assembly-example">A Web Assembly Example<a class="hash-link" href="#a-web-assembly-example" title="Direct link to heading">​</a></h3><p>A C++ function:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">unsigned gcd(unsigned x, unsigned y) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  while (x &gt; 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unsigned temp = x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x = y % x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    y = temp;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return y;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Compiled to Web Assembly:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(module</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (type $type0 (func (param i32 i32) (result i32)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (table 0 anyfunc)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (memory 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (export &quot;memory&quot; memory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (export &quot;_Z3gcdjj&quot; $func0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (func $func0 (param $var0 i32) (param $var1 i32) (result i32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (local $var2 i32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    block $label0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      get_local $var0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      i32.eqz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      br_if $label0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      loop $label1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        get_local $var1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        get_local $var0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tee_local $var2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        i32.rem_u</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        set_local $var0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        get_local $var2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        set_local $var1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        get_local $var0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        br_if $label1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      end $label1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      get_local $var2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      return</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    end $label0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    get_local $var1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="case-study-an-ir-for-c">Case Study: An IR for C<a class="hash-link" href="#case-study-an-ir-for-c" title="Direct link to heading">​</a></h2><p>Let’s design our own tuple-based IR for C. Why? C is such a simple language, an IR is fairly easy to design. Why is C so simple?</p><ul><li>Only base types are several varieties of ints and floats.</li><li>No true arrays — <code>e1[e2]</code> just abbreviates <code>*(e1+e2)</code>; <em>all</em> indicies start at zero, there’s no bounds checking.</li><li>All parameters passed by value, and in order.</li><li>Block structure is very restricted: all functions on same level (no nesting); variables are either truly global or local to a top-level function; implementation drastically simplified because no static links are ever needed and functions can be easily passed as parameters without scoping trouble.</li><li>Structure copy is bitwise.</li><li>Arrays aren’t copied element by element: array assignment is just an assignment of the starting address.</li><li>Language is small; nearly everything interesting (like I/O) is in a library. So we only need tuples for the core language.</li></ul><p>Thus, the following tuples are sufficient:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  x ← y                               (COPY, y, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x ← &amp;y                              (COPY_FROM_REF, y, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x ← *y                              (COPY_FROM_DEREF, y, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  *x ← y                              (COPY_TO_DEREF, y, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x ← unaryop y                       (uop, y, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x ← y binaryop z                    (binop, y, z, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x ← y[i]                            (COPY_FROM_ARRAY_ELEM, y, i, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  x[i] ← y                            (COPY_TO_ARRAY_ELEM, y, x, i)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  goto L                              (JUMP, L)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  if x relop y goto L                 (Jop, x, y, L)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  param x                             (PARAM, x)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  call p, n                           (CALL, p, n)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where:</p><ul><li><code>unaryop</code> is one of: +, -, !, ~, ...</li><li><code>binaryop</code> is one of: +, -, *, /, %, &amp;, |, ^, <strong>.</strong>, &amp;&amp;, ||, ...</li><li><code>relop</code> is one of ==, !=, &lt;, &lt;=, &gt;, &gt;=</li><li><code>x[i]</code> means memory location x + i</li><li><code>call p,n</code> means call p with n bytes of arguments</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Skill/C++/扩充知识/右值引用和std::move"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">一文读懂C++右值引用和std::move</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Skill/C++/扩充知识/so动态库"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">so动态库</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-an-ir" class="table-of-contents__link toc-highlight">What is an IR?</a></li><li><a href="#why-use-an-ir" class="table-of-contents__link toc-highlight">Why use an IR?</a></li><li><a href="#types-of-intermediate-representations" class="table-of-contents__link toc-highlight">Types of Intermediate Representations</a><ul><li><a href="#semantic-graph" class="table-of-contents__link toc-highlight">Semantic Graph</a></li><li><a href="#tuples" class="table-of-contents__link toc-highlight">Tuples</a></li><li><a href="#stack-code" class="table-of-contents__link toc-highlight">Stack Code</a></li></ul></li><li><a href="#levels-of-intermediate-representations" class="table-of-contents__link toc-highlight">Levels of Intermediate Representations</a></li><li><a href="#tuples-1" class="table-of-contents__link toc-highlight">Tuples</a><ul><li><a href="#high-level-tuples" class="table-of-contents__link toc-highlight">High-Level Tuples</a></li><li><a href="#medium-level" class="table-of-contents__link toc-highlight">Medium-Level</a></li><li><a href="#low-level" class="table-of-contents__link toc-highlight">Low-Level</a></li></ul></li><li><a href="#structures" class="table-of-contents__link toc-highlight">Structures</a></li><li><a href="#control-flow-graphs" class="table-of-contents__link toc-highlight">Control Flow Graphs</a><ul><li><a href="#definition" class="table-of-contents__link toc-highlight">Definition</a></li><li><a href="#basic-blocks" class="table-of-contents__link toc-highlight">Basic Blocks</a></li><li><a href="#example-control-flow-graph" class="table-of-contents__link toc-highlight">Example Control Flow Graph</a></li></ul></li><li><a href="#single-static-assignment" class="table-of-contents__link toc-highlight">Single Static Assignment</a></li><li><a href="#example-irs" class="table-of-contents__link toc-highlight">Example IRs</a><ul><li><a href="#a-jvm-example" class="table-of-contents__link toc-highlight">A JVM Example</a></li><li><a href="#an-llvm-example" class="table-of-contents__link toc-highlight">An LLVM Example</a></li><li><a href="#an-sil-example" class="table-of-contents__link toc-highlight">An SIL Example</a></li><li><a href="#a-web-assembly-example" class="table-of-contents__link toc-highlight">A Web Assembly Example</a></li></ul></li><li><a href="#case-study-an-ir-for-c" class="table-of-contents__link toc-highlight">Case Study: An IR for C</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Doongz Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.958a4673.js"></script>
<script src="/assets/js/main.715bfe53.js"></script>
</body>
</html>