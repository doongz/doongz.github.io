"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4517],{3905:(n,t,e)=>{e.d(t,{Zo:()=>u,kt:()=>k});var r=e(67294);function i(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function s(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function p(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?s(Object(e),!0).forEach((function(t){i(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function l(n,t){if(null==n)return{};var e,r,i=function(n,t){if(null==n)return{};var e,r,i={},s=Object.keys(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||(i[e]=n[e]);return i}(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)e=s[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(i[e]=n[e])}return i}var a=r.createContext({}),_=function(n){var t=r.useContext(a),e=t;return n&&(e="function"==typeof n?n(t):p(p({},t),n)),e},u=function(n){var t=_(n.components);return r.createElement(a.Provider,{value:t},n.children)},o="mdxType",c={inlineCode:"code",wrapper:function(n){var t=n.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(n,t){var e=n.components,i=n.mdxType,s=n.originalType,a=n.parentName,u=l(n,["components","mdxType","originalType","parentName"]),o=_(e),d=i,k=o["".concat(a,".").concat(d)]||o[d]||c[d]||s;return e?r.createElement(k,p(p({ref:t},u),{},{components:e})):r.createElement(k,p({ref:t},u))}));function k(n,t){var e=arguments,i=t&&t.mdxType;if("string"==typeof n||i){var s=e.length,p=new Array(s);p[0]=d;var l={};for(var a in t)hasOwnProperty.call(t,a)&&(l[a]=t[a]);l.originalType=n,l[o]="string"==typeof n?n:i,p[1]=l;for(var _=2;_<s;_++)p[_]=e[_];return r.createElement.apply(null,p)}return r.createElement.apply(null,e)}d.displayName="MDXCreateElement"},39770:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>a,contentTitle:()=>p,default:()=>o,frontMatter:()=>s,metadata:()=>l,toc:()=>_});var r=e(87462),i=(e(67294),e(3905));const s={},p="\u6d41\u6c34\u7ebf & \u786c\u4ef6\u6a21\u5757 & \u8bd1\u7801\u6a21\u5757",l={unversionedId:"Skill/ASM/RISC-V/\u6d41\u6c34\u7ebf&\u786c\u4ef6\u6a21\u5757&\u8bd1\u7801\u6a21\u5757",id:"Skill/ASM/RISC-V/\u6d41\u6c34\u7ebf&\u786c\u4ef6\u6a21\u5757&\u8bd1\u7801\u6a21\u5757",title:"\u6d41\u6c34\u7ebf & \u786c\u4ef6\u6a21\u5757 & \u8bd1\u7801\u6a21\u5757",description:"\u6765\u6e90",source:"@site/docs/Skill/ASM/RISC-V/4-\u6d41\u6c34\u7ebf&\u786c\u4ef6\u6a21\u5757&\u8bd1\u7801\u6a21\u5757.md",sourceDirName:"Skill/ASM/RISC-V",slug:"/Skill/ASM/RISC-V/\u6d41\u6c34\u7ebf&\u786c\u4ef6\u6a21\u5757&\u8bd1\u7801\u6a21\u5757",permalink:"/docs/Skill/ASM/RISC-V/\u6d41\u6c34\u7ebf&\u786c\u4ef6\u6a21\u5757&\u8bd1\u7801\u6a21\u5757",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"skillSidebar",previous:{title:"RISC-V \u6269\u5c55\u5bc4\u5b58\u5668\u548c\u6307\u4ee4",permalink:"/docs/Skill/ASM/RISC-V/\u6269\u5c55\u5bc4\u5b58\u5668\u548c\u6307\u4ee4"},next:{title:"ALU \u6a21\u5757\u548c branch \u6a21\u5757",permalink:"/docs/Skill/ASM/RISC-V/ALU\u6a21\u5757&branch\u6a21\u5757"}},a={},_=[{value:"\u4e00\u3001CPU\u7ecf\u5178\u4e94\u7ea7\u6d41\u6c34\u7ebf",id:"\u4e00cpu\u7ecf\u5178\u4e94\u7ea7\u6d41\u6c34\u7ebf",level:2},{value:"1\u3001\u72b6\u6001\u673a\u903b\u8f91",id:"1\u72b6\u6001\u673a\u903b\u8f91",level:3},{value:"2\u3001\u6d41\u6c34\u7ebf\u903b\u8f91",id:"2\u6d41\u6c34\u7ebf\u903b\u8f91",level:3},{value:"RISC-V 5\u7ea7\u6d41\u6c34\u7ebf\u8bbe\u8ba1",id:"risc-v-5\u7ea7\u6d41\u6c34\u7ebf\u8bbe\u8ba1",level:4},{value:"\u7b2c\u4e00\u7ea7 \u53d6\u6307",id:"\u7b2c\u4e00\u7ea7-\u53d6\u6307",level:4},{value:"\u7b2c\u4e8c\u7ea7 \u8bd1\u7801",id:"\u7b2c\u4e8c\u7ea7-\u8bd1\u7801",level:4},{value:"\u7b2c\u4e09\u7ea7 \u6267\u884c",id:"\u7b2c\u4e09\u7ea7-\u6267\u884c",level:4},{value:"\u7b2c\u56db\u7ea7 \u8bbf\u5b58",id:"\u7b2c\u56db\u7ea7-\u8bbf\u5b58",level:4},{value:"\u7b2c\u4e94\u7ea7 \u56de\u5199",id:"\u7b2c\u4e94\u7ea7-\u56de\u5199",level:4},{value:"\u4e8c\u3001CPU\u786c\u4ef6\u6a21\u5757",id:"\u4e8ccpu\u786c\u4ef6\u6a21\u5757",level:2},{value:"RISC-V cpu \u67b6\u6784",id:"risc-v-cpu-\u67b6\u6784",level:3},{value:"CPU \u67b6\u6784\u5206\u7c7b",id:"cpu-\u67b6\u6784\u5206\u7c7b",level:3},{value:"\u51af\u8bfa\u4f9d\u66fc\u67b6\u6784",id:"\u51af\u8bfa\u4f9d\u66fc\u67b6\u6784",level:4},{value:"\u54c8\u5f17\u67b6\u6784",id:"\u54c8\u5f17\u67b6\u6784",level:4},{value:"FII-RISC-V \u67b6\u6784",id:"fii-risc-v-\u67b6\u6784",level:4},{value:"\u4e09\u3001\u5bc4\u5b58\u5668\u6587\u4ef6",id:"\u4e09\u5bc4\u5b58\u5668\u6587\u4ef6",level:2},{value:"\u56db\u3001\u6307\u4ee4\u8bd1\u7801\u5668",id:"\u56db\u6307\u4ee4\u8bd1\u7801\u5668",level:2},{value:"decoder \u6a21\u5757\u4ee3\u7801",id:"decoder-\u6a21\u5757\u4ee3\u7801",level:3}],u={toc:_};function o(n){let{components:t,...s}=n;return(0,i.kt)("wrapper",(0,r.Z)({},u,s,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u6d41\u6c34\u7ebf--\u786c\u4ef6\u6a21\u5757--\u8bd1\u7801\u6a21\u5757"},"\u6d41\u6c34\u7ebf & \u786c\u4ef6\u6a21\u5757 & \u8bd1\u7801\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://www.icfedu.cn/?s=RISC-V32%E4%B8%AA%E5%AF%84%E5%AD%98%E5%99%A8%E5%92%8C%E8%AF%91%E7%A0%81%E6%A8%A1%E5%9D%97"},"\u6765\u6e90")),(0,i.kt)("h2",{id:"\u4e00cpu\u7ecf\u5178\u4e94\u7ea7\u6d41\u6c34\u7ebf"},"\u4e00\u3001CPU\u7ecf\u5178\u4e94\u7ea7\u6d41\u6c34\u7ebf"),(0,i.kt)("p",null,"\u7ecf\u5178\u4e94\u7ea7\u6d41\u6c34\u7ebf\uff0c RISC-V \u4e94\u7ea7\u6d41\u6c34\u7ebf"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u5728cpu \u8bbe\u8ba1\u4e2d\uff0c\u7ecf\u5e38\u4f1a\u4f7f\u7528\u300c\u6d41\u6c34\u7ebf\u8bbe\u8ba1\u300d\uff0c \u76f8\u5bf9\u65e9\u671f\u7684\u72b6\u6001\u673a\u903b\u8f91\u6765\u8bf4\uff0c\u6d41\u6c34\u7ebf\u8bbe\u8ba1\u4f1a\u6709\u6548\u7684\u63d0\u9ad8cpu \u7684\u6548\u7387"),"\u3002"),(0,i.kt)("p",null,"\u4f7f\u7528\u6d41\u6c34\u7ebf\u8bbe\u8ba1\uff0c\u4f1a\u5728\u73b0\u6709\u7684\u751f\u4ea7\u5de5\u827a\u4e0b\uff0c\u76f8\u540c\u7cfb\u7edf\u4e3b\u9891\u4e0b\u63d0\u9ad8",(0,i.kt)("strong",{parentName:"p"},"cpu\u7684\u6548\u7387\uff0c\u901a\u5e38\u6211\u4eec\u4f1a\u4f7f\u7528MIPS \u548cMIPS/Mhz \u7b49\u6807\u51c6\u6765\u8861\u91cf"),"\u3002"),(0,i.kt)("p",null," \u5176\u4e2dMIPS \u662f\u6307 million instruction per second,\u8868\u793a",(0,i.kt)("strong",{parentName:"p"},"\u6bcf\u79d2\u591a\u5c11\u767e\u4e07\u6761\u6307\u4ee4"),"\uff0c \u4f8b\u5982 5MIPS \u662f\u6307\u6bcf\u79d2500\u4e07\u6761\u6307\u4ee4\u3002 \u8fd9\u662f\u4e00\u4e2a\u7edd\u5bf9\u503c\uff0c\u53d6\u51b3\u4e8e\u6d41\u6c34\u7ebf\u8bbe\u8ba1\u7684\u6709\u6548\u6027\uff0c \u5206\u652f\u9884\u6d4b\uff0c cpu \u4e3b\u9891\u9ad8\u4f4e\u7b49\u7b49\u3002"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"MIPS/Mhz \u8868\u793a CPU \u5728\u6bcf 1MHz \u7684\u7cfb\u7edf\u65f6\u949f\u4e0b\uff0c\u8fd0\u884c\u901f\u5ea6\u4e0b\u53ef\u4ee5\u6267\u884c\u591a\u5c11\u4e2aMIPS"),"\u3002\u5982 10MIPS/MHz\uff0c\u8868\u793a\u5982\u679c CPU \u8fd0\u884c\u5728 1MHz \u7684\u9891\u7387\u4e0b\uff0c\u6bcf\u79d2\u53ef\u6267\u884c1000\u4e07\u6761\u6307\u4ee4\uff0c\u5982\u679c CPU \u8fd0\u884c\u5728 5MHz \u7684\u9891\u7387\u4e0b\uff0c\u6bcf\u79d2\u53ef\u6267\u884c\u4e94\u5343\u4e07\u6761\u6307\u4ee4\u3002\u8fd9\u4e2a\u53c2\u6570\u5254\u9664\u4e86\u7cfb\u7edf\u65f6\u949f\u7684\u53c2\u6570\uff0c \u8fd9\u6837\u5c31\u548c\u751f\u4ea7\u5de5\u827a\u65e0\u5173\uff0c \u7528\u6765\u8bc4\u4f30cpu \u7684\u8bbe\u8ba1\u6027\u80fd\uff0c \u800c\u4e0d\u662f\u751f\u4ea7\u5de5\u827a\u6027\u80fd\u3002"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u6d41\u6c34\u7ebf\u7684\u7ea7\u6570\u8d8a\u591a\uff0c \u6bcf\u4e00\u7ea7\u6d41\u6c34\u7ebf\u7684\u903b\u8f91\u5c31\u8d8a\u5c11\uff0c\u90a3\u4e48\u751f\u4ea7\u7684\u65f6\u5019\uff0c\u65f6\u949f\u7684\u4e3b\u9891\u5c31\u4f1a\u8d8a\u9ad8"),"\u3002 \u7f3a\u70b9\u662f\uff1a\u6d41\u6c34\u7ebf\u7ea7\u6570\u8d8a\u591a\uff0c\u9700\u8981\u7684cpu\u8bbe\u8ba1\u8d44\u6e90\u8d8a\u591a\uff0ccpu \u8bbe\u8ba1\u4e5f\u4f1a\u66f4\u52a0\u590d\u6742\uff0c\u5904\u7406\u6d41\u6c34\u51b2\u7a81\u7684\u6210\u672c\u8d8a\u9ad8\uff0c\u540c\u65f6\uff0c\u76f8\u5bf9\u529f\u8017\u4e5f\u4f1a\u589e\u52a0\u3002\u56e0\u6b64\uff0ccpu \u8bbe\u8ba1\u591a\u5c11\u7ea7\u6d41\u6c34\u7ebf\uff0c\u662f\u7531\u4ea7\u54c1\u7684\u5b9a\u4e49\uff08\u5b9a\u4f4d\uff09\u6765\u51b3\u5b9a\u7684\u3002"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u4e00\u4e9b\u4f4e\u529f\u8017\uff0c\u624b\u6301\uff0c\u6216\u8005\u79fb\u52a8\u8bbe\u5907\uff0c cpu \u8bbe\u8ba1\u5e0c\u671b\u7684\u662f\u5f85\u673a\u65f6\u95f4\u957f\uff0c\u4ea7\u54c1\u529f\u8017\u4f4e\uff0c \u5bf9\u4e8e\u6027\u80fd\u4e0d\u662f\u4f18\u5148\u8003\u8651\u7684\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u51cf\u5c11\u6d41\u6c34\u7ebf\u7ea7\u6570\uff0c\u751a\u81f3\u53ef\u4ee5\u4f7f\u7528\u72b6\u6001\u673a"),(0,i.kt)("h3",{id:"1\u72b6\u6001\u673a\u903b\u8f91"},"1\u3001\u72b6\u6001\u673a\u903b\u8f91"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(41248).Z,width:"807",height:"335"})),(0,i.kt)("p",null,"\u4e3e\u4f8b\uff1a"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"ADDI x13\uff0cx12\uff0c5"),"\u5bf9\u5e94\u7684\u673a\u5668\u7801\u4e3a0000_0000_0101_01100_000_01101_0010011\uff0c\u5bf9\u5e94\u768416\u8fdb\u5236\u4e3a32\u2019h0056_0693"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(84982).Z,width:"749",height:"81"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"76",src:e(56487).Z,width:"1488",height:"266"})),(0,i.kt)("h3",{id:"2\u6d41\u6c34\u7ebf\u903b\u8f91"},"2\u3001\u6d41\u6c34\u7ebf\u903b\u8f91"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u5728\u7ecf\u5178\u7684\u6d41\u6c34\u7ebf\u8bbe\u8ba1\u4e2d\uff0c5\u7ea7\u6d41\u6c34\u7ebf\u662f\u975e\u5e38\u6709\u4ee3\u8868\u6027\u7684\u3002 \u5b83\u4e3b\u8981\u6709\uff1a")),(0,i.kt)("p",null,"1\uff09\u53d6\u6307IF,     (instruction fetch)"),(0,i.kt)("p",null,"2\uff09\u8bd1\u7801ID\uff0c   (instruction decoder)"),(0,i.kt)("p",null,"3\uff09\u6267\u884cEX\uff0c   (execution )"),(0,i.kt)("p",null,"4\uff09\u8bbf\u5b58MEM\uff0c(access memory)"),(0,i.kt)("p",null,"5\uff09\u5199\u56deWB    (write back)"),(0,i.kt)("p",null,"5\u4e2a\u90e8\u5206\uff085\u7ea7\uff09\u7ec4\u6210\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(14663).Z,width:"634",height:"360"})),(0,i.kt)("p",null,"cycle 1 : \u7b2c1\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\u3002"),(0,i.kt)("p",null,"cycle 2: \u7b2c1\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c \u7b2c2\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\u3002"),(0,i.kt)("p",null,"cycle 3 : \u7b2c1\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\uff0c \u7b2c2\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c \u7b2c3\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\u3002"),(0,i.kt)("p",null,"cycle 4 : \u7b2c1\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u8bbf\u5b58"),"\uff0c \u7b2c2\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\uff0c \u7b2c3\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c \u7b2c4\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\u3002"),(0,i.kt)("p",null,"cycle 5 : \u7b2c1\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u5199\u56de"),"\uff0c \u7b2c2\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bbf\u5b58"),"\uff0c \u7b2c3\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\uff0c \u7b2c4\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c\u7b2c5\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\u3002"),(0,i.kt)("p",null,"cycle 6 : \u7b2c6\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\uff0c \u7b2c2\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u56de\u5199"),"\uff0c \u7b2c3\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bbf\u5b58"),"\uff0c \u7b2c4\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\uff0c\u7b2c5\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\u3002"),(0,i.kt)("p",null,"cycle 7 : \u7b2c6\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c \u7b2c7\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\uff0c \u7b2c3\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u5199\u56de"),"\uff0c \u7b2c4\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c\u7b2c5\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\u3002"),(0,i.kt)("p",null,"cycle 8 : \u7b2c6\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\uff0c \u7b2c7\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c \u7b2c8\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307"),"\uff0c \u7b2c4\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\uff0c\u7b2c5\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bbf\u5b58"),"\u3002"),(0,i.kt)("p",null,"cycle 9 : \u7b2c6\u6761\u6307\u4ee4\u7684",(0,i.kt)("strong",{parentName:"p"},"\u8bbf\u5b58"),"\uff0c \u7b2c7\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u6267\u884c"),"\uff0c \u7b2c8\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801"),"\uff0c \u7b2c9\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u8bbf\u5b58"),"\uff0c\u7b2c5\u6761\u6307\u4ee4",(0,i.kt)("strong",{parentName:"p"},"\u5199\u56de"),"\u3002"),(0,i.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c \u7b2c\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c \u53ea\u67091\u6761\u6307\u4ee4\u64cd\u4f5c\u88ab\u6267\u884c\uff1b \u7b2c\u4e8c\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u67092\u6761\u6307\u4ee4\u64cd\u4f5c\u88ab\u6267\u884c\uff1b\u7b2c\u4e09\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u67093\u6761\u6307\u4ee4\u64cd\u4f5c\u88ab\u6267\u884c\uff1b"),(0,i.kt)("p",null,"\u7b2c\u56db\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u67094\u6761\u6307\u4ee4\u64cd\u4f5c\u88ab\u6267\u884c\uff1b \u4ece\u7b2c\u4e94\u65f6\u949f\u5f00\u59cb\uff0c \u6bcf\u4e2a\u65f6\u949f\u5468\u671f\uff0c\u90fd\u67095\u6761\u6307\u4ee4\u64cd\u4f5c\u88ab\u6267\u884c\u3002 ",(0,i.kt)("strong",{parentName:"p"},"\u8fd9\u76f8\u5f53\u4e8e\u4e4b\u540e\u7684\u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u90fd\u6709\u4e00\u4e2a\u5b8c\u6574\u7684\u6307\u4ee4\u88ab\u6267\u884c\u5b8c\u6bd5\uff08\u53d6\u6307\uff0c\u8bd1\u7801\uff0c\u6267\u884c\uff0c\u8bbf\u5b58\uff0c\u56de\u5199\uff09\u3002\u8fd9\u662fcpu\u7684\u6548\u7387\u8fbe\u5230\u6700\u9ad8\u503c\uff08\u7406\u60f3\u72b6\u6001\uff09"),"\u3002 \u7531\u4e8ecpu \u5728\u6267\u884c\u6307\u4ee4\u65f6\uff0c\u4f1a\u9047\u5230\u8df3\u8f6c\uff0c \u5206\u652f\u8df3\u8f6c\uff0c\u957f\u5468\u671f\u6307\u4ee4\uff08\u4e58\u6cd5\uff0c\u9664\u6cd5\uff09\uff0c\u957f\u5468\u671f\u8bbf\u5b58\uff08flash\uff0c ddr\u7b49\u7b49\uff09 \u6d41\u6c34\u7ebf\u4f1a\u53d1\u751f\u6682\u505c\uff0c\u751a\u81f3\u9000\u51fa\u91cd\u6765\u7b49\u7b49\u60c5\u51b5\u3002\u4e3a\u4e86\u51cf\u5c11\u6682\u505c\uff0c\u9000\u51fa\u60c5\u51b5\u53d1\u751f\uff0c \u5404\u79cd\u4e0d\u540c\u7684cpu \u90fd\u6709\u76f8\u5e94\u7684\u624b\u6bb5\u6765\u5c3d\u91cf\u907f\u514d\uff0c(\u54ea\u4e00\u4e2acpu \u9884\u6d4b\u7684\u6bd4\u8f83\u597d\uff0c cpu \u7684\u6548\u7387\u81ea\u7136\u5c31\u9ad8\uff0c\u4f46\u540c\u65f6\u4e5f\u4ed8\u51fa\u8d44\u6e90\u548c\u529f\u8017\u4e3a\u4ee3\u4ef7\uff09\u3002"),(0,i.kt)("h4",{id:"risc-v-5\u7ea7\u6d41\u6c34\u7ebf\u8bbe\u8ba1"},"RISC-V 5\u7ea7\u6d41\u6c34\u7ebf\u8bbe\u8ba1"),(0,i.kt)("p",null,"risc-v \u4e5f\u6709\u7ecf\u5178\u76845\u7ea7\u6d41\u6c34\u7ebf\u8bbe\u8ba1\uff0c\u4f46\u4e5f\u67092\u7ea7\uff0c3\u7ea7\uff0c7\u7ea7\uff0c\u751a\u81f3\u66f4\u591a\u7ea7\u7684\u6d41\u6c34\u7ebf\u8bbe\u8ba1\uff0c\u8fd9\u53d6\u51b3\u4e8e\u516c\u53f8\u5bf9\u4ea7\u54c1\u7684\u5b9a\u4e49\uff0criscv \u672c\u8eab\u5e76\u6ca1\u6709\u89c4\u5b9a\u4e00\u5b9a\u8981\u4f7f\u7528\u591a\u5c11\u7ea7\u6d41\u6c34\u7ebf\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(84829).Z,width:"998",height:"694"})),(0,i.kt)("h4",{id:"\u7b2c\u4e00\u7ea7-\u53d6\u6307"},"\u7b2c\u4e00\u7ea7 \u53d6\u6307"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u53d6\u6307\u4e3b\u8981\u662f\u63a7\u5236pc")," \uff08program counter\uff09\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u65f6\u949f\u5468\u671fpc = pc + 4; \u540c\u65f6\u5c06\u6307\u4ee4\u9001\u7ed9\u8bd1\u7801\u6a21\u5757\uff1b \u4f46\u662f\u5982\u679c\u6709BRANCH,JAL,JALR,AUIPC \uff0c\u5c06\u4fee\u6539pc \u4e3a\u8fd9\u4e9b\u6307\u4ee4\u8ba1\u7b97\u51fa\u6765\u7684\u503c\uff0c\u5e76\u4e14\u4ee5\u8ba1\u7b97\u540e\u7684pc \u4e3a\u5730\u5740\uff0c \u8bfb\u53d6\u76f8\u5e94\u5730\u5740\u7684\u6307\u4ee4\uff0c \u9001\u7ed9\u8bd1\u7801\u6a21\u5757\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(79021).Z,width:"1032",height:"696"})),(0,i.kt)("h4",{id:"\u7b2c\u4e8c\u7ea7-\u8bd1\u7801"},"\u7b2c\u4e8c\u7ea7 \u8bd1\u7801"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u8bd1\u7801\u6a21\u5757\u8d1f\u8d23\u4ece\u6307\u4ee4\u4e2d\u5206\u79bb\u51fa\u6765"),"\uff1a"),(0,i.kt)("p",null,"1\uff09\u5177\u4f53\u662f\u4ec0\u4e48\u6307\u4ee4\uff08ADDI, AND, JAL, LUI \u7b49\u7b49\uff09,"),(0,i.kt)("p",null,"2\uff09\u9700\u8981 \u54ea\u4e9b\u5bc4\u5b58\u5668\u914d\u5408 \u4e0b\u4e00\u7ea7\u7684\u6267\u884c\u64cd\u4f5c \uff08rs1, rs2, rd)"),(0,i.kt)("p",null,"3\uff09load/save \u7b49\u9700\u8981\u5b58\u50a8\u5668\u7684\u5730\u5740\uff08\u5f97\u5230\u5730\u5740\u4e2d\u7684\u6570\u636e\uff09"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(70860).Z,width:"994",height:"697"})),(0,i.kt)("h4",{id:"\u7b2c\u4e09\u7ea7-\u6267\u884c"},"\u7b2c\u4e09\u7ea7 \u6267\u884c"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u6839\u636e\u8bd1\u7801\u7684\u7ed3\u679c\uff0c\u8fdb\u884c\u76f8\u5e94\u7684\u8ba1\u7b97"),"\uff1a\u5305\u62ecadd\uff0c xor, or,and, pc \u8df3\u8f6c\uff0c \u5206\u652f\u8df3\u8f6c\u7b49\u7b49\u3002\u5728\u53d8\u7ea7\u7684\u6d41\u6c34\u7ebf\uff08\u4e0d\u662f\u56fa\u5b9a5\u7ea7\u6d41\u6c34\u7ebf\u8bbe\u8ba1\u4e2d\uff09\u4e5f\u53ef\u4ee5\u6839\u636e\u6307\u4ee4\u76f4\u63a5\u56de\u5199\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(35659).Z,width:"1000",height:"690"})),(0,i.kt)("h4",{id:"\u7b2c\u56db\u7ea7-\u8bbf\u5b58"},"\u7b2c\u56db\u7ea7 \u8bbf\u5b58"),(0,i.kt)("p",null,"load, store \u7b49\u64cd\u4f5c ",(0,i.kt)("strong",{parentName:"p"},"\u8bbf\u95ee\u5b58\u50a8\u5668"),"\uff0c\u6216\u8005\u662fcsr \u5bc4\u5b58\u5668\u7684\u8bbf\u95ee\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(82005).Z,width:"1008",height:"698"})),(0,i.kt)("h4",{id:"\u7b2c\u4e94\u7ea7-\u56de\u5199"},"\u7b2c\u4e94\u7ea7 \u56de\u5199"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u5c06\u6700\u7ec8\u7684\u7ed3\u679c\u56de\u5199\u523032\u4e2a\u901a\u7528\u7684\u5bc4\u5b58\u5668\u4e2d"),"\uff0c\u5b8c\u6210\u6307\u4ee4\u5468\u671f\u7684\u64cd\u4f5c\u3002"),(0,i.kt)("p",null," \u6d41\u6c34\u7ebf\u53ef\u4ee5\u8bbe\u8ba1\u4e3a2\u7ea7\uff0c3\u7ea7\uff0c5\u7ea7 \uff0c\u66f4\u591a\u7ea7\u6d41\u6c34\u7ebf\u3002 \u4f46\u4e5f\u53ef\u4ee5\u88ab\u8bbe\u8ba1\u4e3a\u53d8\u7ea7\u6d41\u6c34\u7ebf\uff0c \u6839\u636e\u4e0d\u540c\u662f\u6307\u4ee4\uff0c\u8fc5\u901f\u5b8c\u6210\u6574\u4e2a\u6307\u4ee4\u7684\u64cd\u4f5c\uff0c\u4ece\u800c\u52a0\u5febcpu\u6267\u884c\u901f\u5ea6\uff0c"),(0,i.kt)("p",null,"\u4f8b\u5982 add x2, x3, x4 \u6ca1\u6709\u8bbf\u5b58\uff0c\u6267\u884c\u540e\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u56de\u5199\u4e86\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(18925).Z,width:"1026",height:"702"})),(0,i.kt)("h2",{id:"\u4e8ccpu\u786c\u4ef6\u6a21\u5757"},"\u4e8c\u3001CPU\u786c\u4ef6\u6a21\u5757"),(0,i.kt)("p",null,"RISC-V FPGA \u8bbe\u8ba1\u4e2d\uff0c RISC-V \u7684\u6838\u5fc3\u6846\u67b6\u6a21\u5757\u7ec4\u6210\u3002"),(0,i.kt)("h3",{id:"risc-v-cpu-\u67b6\u6784"},"RISC-V cpu \u67b6\u6784"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"RISC-V \u4e2dcpu \u6838\u5fc3\u8bbe\u8ba1\u6846\u67b6\u7ec4\u6210\u7ed3\u6784:")),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(5481).Z,width:"712",height:"476"})),(0,i.kt)("p",null,"\u5176\u4e2d\uff1a"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"fii_cpu_sys.v")," : \u5de5\u7a0b\u9876\u5c42\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"fii_iobuf.v")," \uff1a GPIO \u7aef\u53e3 \u903b\u8f91 \u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"SYS_DCM"),": PLL \u65f6\u949f\u6a21\u5757 IP"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"fii_riscv_cpu.v"),": RISC -V cpu \u6a21\u5757\u9876\u5c42"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"fii_rv32i_core.v")," \uff1a \u72b6\u6001\u673a\u903b\u8f91\u6a21\u5757\uff08RISC -V\uff09\u8fd0\u884c\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"TDP_RAM_INSTR"),"\uff1a\u7a0b\u5e8f\u5b58\u50a8\u5355\u5143(ITCM)"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"rv32I_exu.v"),": RISC -V cpu \u5185\u6838\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"regfile_l.v"),": 32\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"instr_dec.v"),": \u6307\u4ee4\u8bd1\u7801\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"exu_alu.v"),": \u6267\u884c\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"exu_LSU.v"),": Load/Store \u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"fii_UART.v"),"\uff1aUART \u6a21\u5757 "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"fii_timer_lsu.v"),": Timer \u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"fii_GPIO.v"),": GPIO \u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"D_sram.v"),": SRAM DTCM \u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"exu_BRANCH.v"),"\uff1a\u5206\u652f\u5904\u7406\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"exu_csr.v"),": CSR \u5bc4\u5b58\u5668\u6a21\u5757"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(97774).Z,width:"1339",height:"775"})),(0,i.kt)("p",null,"\u5728vivado \u5de5\u7a0b\u6587\u4ef6\u4e2d\uff1a"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(83425).Z,width:"375",height:"175"})),(0,i.kt)("p",null,"RISC-V \u7684\u6838\u5fc3\u6a21\u5757\u7ec4\u6210\uff1a"),(0,i.kt)("p",null,"regile_l_inst    \uff1a32\u4e2a\u901a\u7528\u5bc4\u5b58\u5668"),(0,i.kt)("p",null,"instr_dec_inst  \uff1a\u6307\u4ee4\u8bd1\u7801\u6a21\u5757"),(0,i.kt)("p",null,"exu_alu_u   \uff1a \u6267\u884c\u6a21\u5757"),(0,i.kt)("p",null,"exu_LSU_u  \uff1aload/store \u5916\u8bbe\u8bbf\u5b58\u6a21\u5757"),(0,i.kt)("p",null,"exu_BRANCH_u\uff1a\u6761\u4ef6\u5206\u652f\u6a21\u5757"),(0,i.kt)("p",null,"exu_CSR_U\uff1aCSR \u5bc4\u5b58\u5668\u6a21\u5757"),(0,i.kt)("h3",{id:"cpu-\u67b6\u6784\u5206\u7c7b"},"CPU \u67b6\u6784\u5206\u7c7b"),(0,i.kt)("h4",{id:"\u51af\u8bfa\u4f9d\u66fc\u67b6\u6784"},"\u51af\u8bfa\u4f9d\u66fc\u67b6\u6784"),(0,i.kt)("p",null,"\u51af\u8bfa\u4f9d\u66fc\u67b6\u6784\uff1a\u4e5f\u79f0\u505a\u666e\u6797\u65af\u987f\u67b6\u6784(Princeton Architecture)\u3002 \u5176\u7ed3\u6784\u7279\u70b9\u65f6\u6570\u636e\u5b58\u50a8\u5668\u548c\u7a0b\u5e8f\u5b58\u50a8\u5668\u6309\u7167",(0,i.kt)("strong",{parentName:"p"},"\u7edf\u4e00\u7684\u5730\u5740\u7f16\u5740"),"\uff0c\u598232\u4f4d\u7684\u5730\u5740\u603b\u7ebf\uff0c\u53ef\u5bfb\u57404G \u7684\u5730\u5740\u7a7a\u95f4\u3002\u7a0b\u5e8f\u5b58\u50a8\u5668\uff0c\u6570\u636e\u5b58\u50a8\u5668\u4ee5\u53ca\u5916\u8bbe\u7b49",(0,i.kt)("strong",{parentName:"p"},"\u6bcf\u90e8\u5206\u5360\u67094G\u7a7a\u95f4\u7684\u4e00\u4e2a\u90e8\u5206\uff0c\u5f7c\u6b64\u4e4b\u95f4\u4e92\u4e0d\u91cd\u53e0"),"\u3002 "),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(48342).Z,width:"1020",height:"283"})),(0,i.kt)("h4",{id:"\u54c8\u5f17\u67b6\u6784"},"\u54c8\u5f17\u67b6\u6784"),(0,i.kt)("p",null,"\u54c8\u5f17\u67b6\u6784(Harvard architecture)\uff1a\u54c8\u5f17\u7ed3\u6784\u4e0d\u540c\u4e8e\u51af.\u8bfa\u4f9d\u66fc\u7ed3\u6784\u5c06\u8bbf\u95ee\u7a7a\u95f4\u7ebf\u6027\u5212\u5206\uff0c\u800c\u662f\u5c06\u6570\u636e\u5b58\u50a8\u5668\u4e0e\u7a0b\u5e8f\u5b58\u50a8\u5668\u5212\u5206\u4e3a\u4e24\u4e2a\u72ec\u7acb\u7684\u5bfb\u5740\u7a7a\u95f4\uff0c\u81ea\u5df1\u7ef4\u62a4\u81ea\u5df1\u7684\u5730\u5740\u7a7a\u95f4\uff0c\u6700\u5178\u578b\u7684\u7ed3\u6784\u83ab\u8fc7\u4e8eIntel\u6700\u65e9\u63a8\u51fa\u76848051\uff0c16\u4f4d\u7684\u5730\u5740\u603b\u7ebf\u53ef\u8bbf\u95ee64k\u7a7a\u95f4\uff0c\u4f46\u662f\u6570\u636e\u548c\u7a0b\u5e8f\u5728\u63a7\u5236\u5668\u7684\u534f\u52a9\u4e0b\uff0c\u5b9e\u73b0\u6570\u636e\u8bbf\u95ee\u4e0e\u7a0b\u5e8f\u8bbf\u95ee\u7684\u5206\u79bb\uff0c\u56e0\u6b64\u8bbf\u95ee\u7a7a\u95f4\u6269\u5927\u4e86\u4e00\u500d"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(85207).Z,width:"907",height:"351"})),(0,i.kt)("hr",null),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u51af.\u8bfa\u4f9d\u66fc\u7ed3\u6784\u4e0e\u54c8\u5f17\u7ed3\u6784\u7684\u4f18\u7f3a\u70b9\uff1a")),(0,i.kt)("p",null,"\u51af.\u8bfa\u4f9d\u66fc\u7ed3\u6784\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u4f18\u70b9\uff1a\u6574\u4e2a\u8bbf\u95ee\u7a7a\u95f4\u662f\u7ebf\u6027\u7684\uff0c\u6574\u4e2a\u7a7a\u95f4\u91c7\u7528\u7edf\u4e00\u7f16\u7801\uff0c\u4f7f\u7528\u540c\u4e00\u4e2a\u7a0b\u5e8f\u8ba1\u6570\u5668PC\uff0c\u56e0\u6b64",(0,i.kt)("strong",{parentName:"p"},"\u5bf9\u63a7\u5236\u5668\u7684\u8981\u6c42\u6bd4\u8f83\u4f4e\uff0c\u786c\u4ef6\u8d44\u6e90\uff08RTL\uff09\u5f00\u9500\u5c0f\u4e8e\u54c8\u5f17\u7ed3\u6784"),"\u3002")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u7f3a\u70b9\uff1a",(0,i.kt)("strong",{parentName:"p"},"\u65e0\u6cd5\u6269\u5c55\u7a7a\u95f4\u8303\u56f4"),"\uff0c\u540c\u65f6\u7531\u4e8e\u4f7f\u7528\u7edf\u4e00\u7684\u7a7a\u95f4\u7f16\u7801\uff0c\u5728\u9047\u5230\u8d44\u6e90\u51b2\u7a81\u65f6\u5fc5\u987b",(0,i.kt)("strong",{parentName:"p"},"\u7b49\u5f85\u51b2\u7a81"),"\u89e3\u51b3\u624d\u80fd\u7ee7\u7eed\u7a0b\u5e8f\u7684\u8fd0\u884c\uff0c\u56e0\u6b64",(0,i.kt)("strong",{parentName:"p"},"\u6548\u7387\u8f83\u4f4e"),"\u3002"))),(0,i.kt)("p",null,"\u54c8\u5f17\u7ed3\u6784\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u4f18\u70b9\uff1a\u7531\u4e8e\u6570\u636e\u7a7a\u95f4\u4e0e\u7a0b\u5e8f\u7a7a\u95f4\u5206\u79bb\uff0c\u4e00\u6b21\u6574\u4e2a\u8bbf\u95ee\u7a7a\u95f4\u51e0\u4e4e\u6269\u5927\u4e00\u500d\uff0c",(0,i.kt)("strong",{parentName:"p"},"\u4e0d\u5b58\u5728\u7a0b\u5e8f\u7a7a\u95f4\u7684\u8bbf\u95ee\u4e0e\u6570\u636e\u7a7a\u95f4\u8bbf\u95ee\u7684\u51b2\u7a81"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"\u7f3a\u70b9\uff1a",(0,i.kt)("strong",{parentName:"p"},"\u63a7\u5236\u5668\u590d\u6742"),"\uff0c\u9700\u8981\u4e24\u5957PC\u8ba1\u6570\u5668\uff0c\u786c\u4ef6\u5f00\u9500\u5927"))),(0,i.kt)("p",null,"\u73b0\u5728\u7684cpu \u8bbe\u8ba1\u4e2d\uff0c \u5df2\u7ecf\u4e0d\u662f\u50cf\u65e9\u671f\u7684cpu \u8bbe\u8ba1\u90a3\u6837\u6cfe\u6e2d\u5206\u660e\u4e86\uff0c \u53ef\u80fd\u4e00\u4e2acpu \u5373\u652f\u6301 \u666e\u6797\u65af\u987f\u67b6\u6784\uff0c\u540c\u65f6\u652f\u6301\u54c8\u5f17\u67b6\u6784\u3002 \u6839\u636e\u7a0b\u5e8f\uff0c\u6570\u636e\u7684\u4e0d\u540c\uff0c cpu \u53ef\u4ee5\u4ece\u4e0d\u540c\u7684\u533a\u57df\u5c06\u6570\u636e\u8bfb\u51fa\uff0c\u6216\u8005\u5199\u5165\u3002"),(0,i.kt)("h4",{id:"fii-risc-v-\u67b6\u6784"},"FII-RISC-V \u67b6\u6784"),(0,i.kt)("p",null,"\u76ee\u524d\u7684fii-riscv v2.01 \u7248\u672cCPU\uff0c\u652f\u6301\u666e\u6797\u65af\u987f\u67b6\u6784\uff0c \u540c\u65f6\u4e5f\u652f\u6301\u54c8\u5f17\u67b6\u6784\u3002\u5f53\u7136\uff0c\u54c8\u5f17\u67b6\u6784\u5728\u6267\u884c\u6548\u7387\u4e0a\u8fd8\u662f\u6bd4\u8f83\u9ad8\u7684\uff0c\u7edd\u5927\u90e8\u5206\u5e94\u7528\u4f7f\u7528\u7684\u65f6\u54c8\u5f17\u67b6\u6784\u3002\u4f46\u4e3a\u5c55\u793a\u666e\u6797\u65af\u987f\u67b6\u6784\u7684\u7ed3\u6784\uff0c\u540c\u65f6\u5728\u4e4b\u540e\u7684\u7248\u672c\u4f1a\u652f\u6301JTAG \u6a21\u5757\uff0c JTAG \u6a21\u5757\u4f7f\u7528\u7684\u4e5f\u662f\u666e\u6797\u65af\u987f\u67b6\u6784\uff0c\u8fd9\u79cd\u65b9\u5f0f\u3002"),(0,i.kt)("h2",{id:"\u4e09\u5bc4\u5b58\u5668\u6587\u4ef6"},"\u4e09\u3001\u5bc4\u5b58\u5668\u6587\u4ef6"),(0,i.kt)("p",null,"\u5728RISC-V RV32I CPU \u6838\u4e2d\uff0c\u9700\u898132\u4e2a\u901a\u7528\u7684\u5bc4\u5b58\u5668\u3002\u8fd9\u4e9b\u5bc4\u5b58\u5668\u662f\u89e3\u6790riscv \u6c47\u7f16\u6307\u4ee4\u7684\u5173\u952e\u90e8\u5206\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(20142).Z,width:"699",height:"532"})),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(31851).Z,width:"1334",height:"775"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"\u6bcf\u4e00\u4e2aRV32I \u7684risc-v \u7684cpu \u4e2d\uff0c\u90fd\u670932\u4e2a\u901a\u7528\u7684\u5bc4\u5b58\u5668"),"\u3002 \u5176\u4e2dX0\u5bc4\u5b58\u5668 \u5728\u8bfb\u53d6\u65f6\uff0c\u6c38\u8fdc\u4e3a\u20180\u2019\u3002 \u5199x0 \u5bc4\u5b58\u5668 \u65f6\uff0ccpu \u786c\u4ef6\u53ef\u4ee5\u8fdb\u884c\u5ffd\u7565\uff08\u4e0d\u505a\u4efb\u4f55\u5904\u7406\uff09\u3002\u5bf9\u4e8eRV32E cpu \u6765\u8bf4\uff0c \u53ef\u4ee5\u7701\u7565\u6389x16-x31 \u8fd916\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\uff0c\u53ea\u662f\u4fdd\u7559x0-x15 \u8fd916\u4e2a\u5bc4\u5b58\u5668\uff0c\u8fd9\u6837\u7684\u8bbe\u8ba1\u53ef\u4ee5\u51cf\u5c11cpu \u7684\u5c3a\u5bf8\uff0c\u4f46\u5e76\u4e0d\u662f\u975e\u5e38\u901a\u7528\u3002\u56e0\u4e3a\u5373\u4f7f\u662frv32I \u7684cpu \u5c3a\u5bf8\u4e5f\u4e0d\u662f\u5f88\u5927\u3002"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(3849).Z,width:"736",height:"664"})),(0,i.kt)("p",null,"XLEN \u662f\u6839\u636eriscv \u7684 \u8bbe\u8ba1\u53ef\u4ee5\u6709\u6240\u4e0d\u540c\uff0c\u5bf9\u4e8eRV64 \u6765\u8bf4\uff0c XLEN = 64; \u5bf9\u4e8eRV32 \u6765\u8bf4\uff0cXLEN = 32\u3002 \u6211\u4eec\u5f53\u524d\u8bbe\u8ba1\u7684riscv cpu \u4e3aRV32I\uff0c \u6240\u4ee5XLEN = 32\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"module regfile_I(\ninput sys_clk,              // \u7cfb\u7edf\u65f6\u949f\n\ninput i_EXE_vld,            // \u6267\u884cenable \u4fe1\u53f7\n\ninput [ 4: 0 ] i_rs1_idx,   // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs1\ninput [ 4: 0 ] i_rs2_idx,   // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs2\n\noutput [ 31: 0 ] o_rs1_val, // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs1,\u6240\u5bf9\u5e94\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u5f53\u4e2d\u9009\u4e2d\u7684\u5bc4\u5b58\u5668\u7684\u503c\noutput [ 31: 0 ] o_rs2_val, // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs2,\u6240\u5bf9\u5e94\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u5f53\u4e2d\u9009\u4e2d\u7684\u5bc4\u5b58\u5668\u7684\u503c\n\noutput o_wb_rdy,            // \u56de\u5199\u51c6\u5907\u597d\uff0c\u4e00\u76f4 \u7b49\u4e8e 1\ninput i_wb_wen,             // \u5199\u901a\u7528\u5bc4\u5b58\u5668 \u4fe1\u53f7\ninput [ 4: 0 ] i_wb_rd_idx, // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rd,\ninput [ 31: 0 ] i_wb_val    // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rd,\u6240\u5bf9\u5e94\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u5f53\u4e2d\u9009\u4e2d\u7684\u5bc4\u5b58\u5668\u7684\u503c\n);\n\nwire [ 31: 0 ] rf_r [ 31: 1 ];\nwire [ 31: 1 ] rf_wen;\n\n\ngenvar i;\ngenerate\nfor ( i = 1; i < 32; i = i + 1 )\nbegin : REG\n    assign rf_wen[ i ] = i_EXE_vld & i_wb_wen & ( i_wb_rd_idx == i ) ;\n    fii_dffl #( 32 ) rf_dffl ( rf_wen[ i ], i_wb_val, rf_r[ i ], sys_clk );\nend\nendgenerate\n\n\n`ifdef sim\n    assign o_rs1_val = ( i_rs1_idx == 0 ) ? 32'b0 :\n        ( rf_r[ i_rs1_idx ] == 32'hxxxxxxxx ) ? 32'b0 : rf_r[ i_rs1_idx ];\n    assign o_rs2_val = ( i_rs2_idx == 0 ) ? 32'b0 :\n        ( rf_r[ i_rs2_idx ] == 32'hxxxxxxxx ) ? 32'b0 : rf_r[ i_rs2_idx ];\n`else\n    assign o_rs1_val = ( i_rs1_idx == 0 ) ? 32'b0 : rf_r[ i_rs1_idx ];\n    assign o_rs2_val = ( i_rs2_idx == 0 ) ? 32'b0 : rf_r[ i_rs2_idx ];\n`endif\n\nassign o_wb_rdy = 1'b1;\n\n\nendmodule\n")),(0,i.kt)("p",null,"input ","[ 4: 0 ]"," i_rs1_idx, // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs1"),(0,i.kt)("p",null,"input ","[ 4: 0 ]"," i_rs2_idx, // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs2"),(0,i.kt)("p",null,"output ","[ 31: 0 ]"," o_rs1_val, // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs1,\u6240\u5bf9\u5e94\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u5f53\u4e2d\u9009\u4e2d\u7684\u5bc4\u5b58\u5668\u7684\u503c"),(0,i.kt)("p",null,"output ","[ 31: 0 ]"," o_rs2_val, // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rs2,\u6240\u5bf9\u5e94\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u5f53\u4e2d\u9009\u4e2d\u7684\u5bc4\u5b58\u5668\u7684\u503c"),(0,i.kt)("p",null,"output o_wb_rdy, // \u56de\u5199\u51c6\u5907\u597d\uff0c\u4e00\u76f4 \u7b49\u4e8e 1"),(0,i.kt)("p",null,"input i_wb_wen, // \u5199\u901a\u7528\u5bc4\u5b58\u5668 \u4fe1\u53f7"),(0,i.kt)("p",null,"input ","[ 4: 0 ]"," i_wb_rd_idx,// \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rd,"),(0,i.kt)("p",null,"input ","[ 31: 0 ]"," i_wb_val // \u6c47\u7f16\u6307\u4ee4\u4e2d\u7684rd,\u6240\u5bf9\u5e94\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u5f53\u4e2d\u9009\u4e2d\u7684\u5bc4\u5b58\u5668\u7684\u503c"),(0,i.kt)("p",null,"\u5728\u4ee3\u7801\u6bb5\u4e2d\uff1a",(0,i.kt)("strong",{parentName:"p"},"\u5199\u64cd\u4f5c")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"genvar i;\ngenerate\n    for ( i = 1; i < 32; i = i + 1 )\n        begin : REG\n            assign rf_wen[ i ] = i_EXE_vld & i_wb_wen & ( i_wb_rd_idx == i ) ;\n            fii_dffl #( 32 ) rf_dffl ( rf_wen[ i ], i_wb_val, rf_r[ i ], sys_clk );\n        end\nendgenerate\n")),(0,i.kt)("p",null,"fii_dffl \u6587\u4ef6\u4ee3\u7801\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"module fii_dffl # (\nparameter DW = 32\n) (\n    input ld,\n    input [DW-1:0] din,\n    output reg [DW-1:0] q = 0,\n\n    input clk\n);\n\n \n\nalways @(posedge clk )\nif (ld)\n     q <= #1 din;\n\nendmodule\n")),(0,i.kt)("p",null,"\u5728\u4ee3\u7801\u6bb5\u4e2d\uff1a",(0,i.kt)("strong",{parentName:"p"},"\u8bfb\u64cd\u4f5c")),(0,i.kt)("p",null,"\u5728\u8bfb\u53d6x0\u65f6\uff08\u4e0d\u8bba\u662frs1\uff0c\u8fd8\u662frs2 \u8bfb\u53d6x0\uff09\uff0c \u76f4\u63a5\u8fd4\u56de0\uff1b \u5176\u4ed6\u60c5\u51b5\uff081-31\uff09 \u6839\u636e\u5bc4\u5b58\u5668\u5f53\u4e2d\u7684\u503c\u8fdb\u884c\u8fd4\u56de\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"assign o_rs1_val = ( i_rs1_idx == 0 ) ? 32\u2019b0 : rf_r[ i_rs1_idx ];\nassign o_rs2_val = ( i_rs2_idx == 0 ) ? 32\u2019b0 : rf_r[ i_rs2_idx ];\n")),(0,i.kt)("h2",{id:"\u56db\u6307\u4ee4\u8bd1\u7801\u5668"},"\u56db\u3001\u6307\u4ee4\u8bd1\u7801\u5668"),(0,i.kt)("p",null,"RISC-V FPGA \u8bbe\u8ba1\u4e2d\uff0c RISC-V \u7684\u6838\u5fc3\u6a21\u5757\u5305\u62ec\u6307\u4ee4\u8bd1\u7801\u6a21\u5757\u3002 \u8fd9\u4e2a\u6a21\u5757\u7684\u4e3b\u8981\u529f\u80fd\u662f\uff1a\u6839\u636e\u5f53\u524d\u7684PC\uff0c\u5bf9ITCM \u8f93\u5165\u7684\u673a\u5668\u7801\u8fdb\u884c\u89e3\u6790\u3002\u5305\u62ec\u5f97\u5230\u76f8\u5e94\u7684\u6c47\u7f16\u8bed\u8a00\u547d\u4ee4\uff0c\u9700\u8981\u7684rs1\uff0crs2\u5bc4\u5b58\u5668\uff0c\u9700\u8981\u5b58\u50a8\u7684rd \u5bc4\u5b58\u5668\u7b49"),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(73372).Z,width:"705",height:"485"})),(0,i.kt)("p",null,(0,i.kt)("img",{src:e(70445).Z,width:"1372",height:"771"})),(0,i.kt)("p",null,"\u5728vivado \u5de5\u7a0b\u6587\u4ef6\u4e2d\uff1a"),(0,i.kt)("p",null,"instr_dec \u6a21\u5757 \u8f93\u5165\u4e3a\u6c47\u7f16\u8bed\u8a00\u7684\u673a\u5668\u7801\uff0c \u8f93\u51fa\u4e3a\uff1a"),(0,i.kt)("p",null,"RS1_IDX: \u901a\u7528\u5bc4\u5b58\u5668rs1 \u7d22\u5f15"),(0,i.kt)("p",null,"RS2_IDX: \u901a\u7528\u5bc4\u5b58\u5668rs2 \u7d22\u5f15"),(0,i.kt)("p",null,"RD_IDX:  \u901a\u7528\u5bc4\u5b58\u5668RD \u7d22\u5f15"),(0,i.kt)("p",null,"instr_group: \u5305\u62ec\uff1aOP_IMM, OP, LUI, AUIPC, JAL, JALR, BRANCH, LOAD, STORE, CSR, \u7b49\u7b49"),(0,i.kt)("p",null,"opimm_instr: \u5305\u62ec\uff1aSRAI, SRLI, SLLI, ANDI, ORI, XORI, SLTIU, SLTI, ADDI"),(0,i.kt)("p",null,"op_instr: \u5305\u62ec\uff1aSRA, SUB, SRL, SLL, XOR, OR, AND, SLTU, SLT, ADD"),(0,i.kt)("p",null,"branch_instr: \u5305\u62ec\uff1aBGTU, BGT, BLTU, BLT, BNE, BEQ"),(0,i.kt)("p",null,"shamt: \u6570\u636e\u4f4d\u79fb\u5bbd\u5ea6 I_imm: I-type \u7acb\u5373\u6570"),(0,i.kt)("p",null,"S_imm: S-type \u7acb\u5373\u6570"),(0,i.kt)("p",null,"J_imm: J-type \u7acb\u5373\u6570"),(0,i.kt)("p",null,"U_imm: U-type \u7acb\u5373\u6570"),(0,i.kt)("p",null,"B_imm: B-type \u7acb\u5373\u6570"),(0,i.kt)("p",null,"load_instr: \u5305\u62ec\uff1aLBU, LB, LHU, LH, LW"),(0,i.kt)("p",null,"store_instr: \u5305\u62ec\uff1aSB, SH, SW"),(0,i.kt)("p",null,"csr_instr: \u5305\u62ec\uff1aCSRRCI, CSRRSI, CSRRWI, CSRRC, CSRRS, CSRRW"),(0,i.kt)("p",null,"csr_addr: \u9009\u62e94096 \u4e2acsr \u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a CSR_imm: csr \u7acb\u5373\u6570  "),(0,i.kt)("h3",{id:"decoder-\u6a21\u5757\u4ee3\u7801"},"decoder \u6a21\u5757\u4ee3\u7801"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"module instr_dec\n(\ninput sys_clk,                  // \u7cfb\u7edf\u65f6\u949f\ninput [ 31: 0 ] i_instr,        // \u4eceITCM \u4e2d\u8bfb\u53d6\u7684\u6c47\u7f16\u8bed\u8a00\u673a\u5668\u7801\n\noutput RV32I,                   // \u8bd1\u7801\u8f93\u51fa\u7684RV32I \u683c\u5f0f. \u76ee\u524d\uff0c\u6211\u4eec\u4e0d\u652f\u6301RV32C, RV64\u7b49\n\noutput [ 4: 0 ] o_rs1_idx,      // \u6c47\u7f16\u6307\u4ee4\u4e2drs1 \u6240\u6307\u5b9a\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a\noutput [ 4: 0 ] o_rs2_idx,      // \u6c47\u7f16\u6307\u4ee4\u4e2drs2 \u6240\u6307\u5b9a\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a\noutput [ 4: 0 ] o_rd_idx,       // \u6c47\u7f16\u6307\u4ee4\u4e2drd \u6240\u6307\u5b9a\u768432\u4e2a\u901a\u7528\u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a\n\noutput [ 15: 0 ] o_instr_group, // \u6307\u4ee4\u7ec4\uff0c\u5c06LOAD,STORE,CSR,BRANCH,OP,OP_imm \u7b49\u7b49 \u6307\u4ee4\u5206\u7ec4\n\noutput [ 8: 0 ] o_opimm_instr,  // opimm \u6307\u4ee4\u4e2d\u7684\u6bcf\u4e00\u6761\u6307\u4ee4\uff0c\u5305\u62ec\uff1aSRAI, SRLI, SLLI, ANDI, ORI, XORI, SLTIU, SLTI, ADDI\noutput [ 9: 0 ] o_op_instr,     // op \u6307\u4ee4\u4e2d\u7684\u6bcf\u4e00\u6761\u6307\u4ee4\uff0c\u5305\u62ec\uff1aSRA, SUB, SRL, SLL, XOR, OR, AND, SLTU, SLT, ADD\noutput [ 5: 0 ] o_branch_instr, // branch \u6307\u4ee4\u4e2d\u7684\u6bcf\u4e00\u6761\u6307\u4ee4\uff0c\u5305\u62ec\uff1aBGTU, BGT, BLTU, BLT, BNE, BEQ\noutput [ 4: 0 ] o_load_instr,   // load \u6307\u4ee4\u4e2d\u7684\u6bcf\u4e00\u6761\u6307\u4ee4\uff0c\u5305\u62ec\uff1aLBU, LB, LHU, LH, LW\noutput [ 2: 0 ] o_store_instr,  // store \u6307\u4ee4\u4e2d\u7684\u6bcf\u4e00\u6761\u6307\u4ee4\uff0c\u5305\u62ec\uff1aSB, SH, SW\noutput [ 1: 0 ] o_fence_instr,  // fence \u6307\u4ee4\u4e2d\u7684\u6bcf\u4e00\u6761\u6307\u4ee4\uff0c\u5305\u62ec\uff1afence\uff0c fence.i\n\noutput [ 5: 0 ] o_csr_instr,    // CSR \u6307\u4ee4\u4e2d\u7684\u6bcf\u4e00\u6761\u6307\u4ee4\uff0c\u5305\u62ec\uff1aSCRRCI, CSRRSI, CSRRWI, SCRRC, CSRRS, CSRRW\noutput [11: 0 ] o_csr_addr,     // \u9009\u62e94095 \u4e2acsr \u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u4e2a CSR_imm: csr \u7acb\u5373\u6570\n\noutput [ 4: 0 ] o_shamt,        // \u6570\u636e\u4f4d\u79fb\u5bbd\u5ea6 I_imm: I-type \u7acb\u5373\u6570\noutput [ 31: 0 ] o_I_imm,       // I-type immediate\noutput [ 31: 0 ] o_S_imm,       // R-type immediate\noutput [ 31: 0 ] o_B_imm,       // S-type immediate\noutput [ 31: 0 ] o_J_imm,       // J-type immediate\noutput [ 31: 0 ] o_U_imm,       // U-type immediate\noutput [ 31: 0 ] o_csr_imm,     // CSR \u7acb\u5373\u6570\n//output [31:0] o_pc\noutput o_mret,                  // \u4e2d\u65ad\u8fd4\u56de\noutput o_ecall,                 // \u901a\u8fc7\u5f15\u53d1\u73af\u5883\u8c03\u7528\u5f02\u5e38\u6765\u8bf7\u6c42\u6267\u884c\u73af\u5883\noutput o_ebreak,                // \u8c03\u8bd5\u4e2d\u65ad\u65ad\u70b9\noutput o_dret,                  // \u8c03\u8bd5\u4e2d\u65ad \u8fd4\u56de\noutput o_wfi                    // \u7b49\u5f85\u4e2d\u65ad\n\n);\n\n//===============================================================================\n// riscv instruction basic decode OP DECODE \nwire [ 6: 0 ] opcode = i_instr[ 6: 0 ];\nwire [ 2: 0 ] funct3 = i_instr[ 14: 12 ];\nwire [ 6: 0 ] funct7 = i_instr[ 31: 25 ];\n\nassign RV32I = ( opcode[ 1: 0 ] == 2'b11 ) && ( opcode[ 4: 2 ] != 3'b111 );\n\n//register index decode\nassign o_rd_idx = i_instr[ 11: 7 ];\nassign o_rs1_idx = i_instr[ 19: 15 ];\nassign o_rs2_idx = i_instr[ 24: 20 ];\n//===============================================================================\n// decode opcode [6:0]\nwire LUI    = ( opcode[ 6: 0 ] == 7'b011_0111 ); // TYPE U lui\nwire AUIPC  = ( opcode[ 6: 0 ] == 7'b001_0111 ); // TYPE U auipc\n\nwire JAL    = ( opcode[ 6: 0 ] == 7'b110_1111 ); // TYPE J jal\nwire JALR   = ( opcode[ 6: 0 ] == 7'b110_0111 ); // TYPE I jalr\n\nwire BRANCH = ( opcode[ 6: 0 ] == 7'b110_0011 ); // TYPE B\n\nwire LOAD   = ( opcode[ 6: 0 ] == 7'b000_0011 ); // TYPE I load\nwire STORE  = ( opcode[ 6: 0 ] == 7'b010_0011 ); // YTPE S store\n\nwire OP_IMM = ( opcode[ 6: 0 ] == 7'b001_0011 ); // TYPE I operator\nwire OP     = ( opcode[ 6: 0 ] == 7'b011_0011 ); // TYPE R operator\n\nwire FENCE  = ( opcode[ 6: 0 ] == 7'b000_1111 ); // TYPE I fence\nwire CSR    = ( opcode[ 6: 0 ] == 7'b111_0011 ); // TYPE I csr\n\n\n\n\nassign o_instr_group = { FENCE, CSR, STORE, LOAD, BRANCH, JALR, JAL, AUIPC, LUI, OP, OP_IMM };\n\n//===============================================================================\n// funct3 decode\nwire funct3_0 = ( funct3 == 3'b000 );\nwire funct3_1 = ( funct3 == 3'b001 );\nwire funct3_2 = ( funct3 == 3'b010 );\nwire funct3_3 = ( funct3 == 3'b011 );\nwire funct3_4 = ( funct3 == 3'b100 );\nwire funct3_5 = ( funct3 == 3'b101 );\nwire funct3_6 = ( funct3 == 3'b110 );\nwire funct3_7 = ( funct3 == 3'b111 );\n//===============================================================================\n//funct7 decode\nwire funct7_0 = ( funct7 == 7'b0 );\nwire funct7_20 = ( funct7 == 7'b010_0000 );\n//===============================================================================\n//imm & shamt decode\n\nassign o_I_imm = { { 20{ i_instr[ 31 ] } } , i_instr[ 31: 20 ] }; //addi/slti/sltiu/andi/ori/xori, lw/lh/lhu/lb/lbu, JALR, SLLI/SRLi/SRAI\n\nassign o_S_imm = { { 20{ i_instr[ 31 ] } }, i_instr[ 31: 25 ], i_instr[ 11: 7 ] }; //s-type instruction, provide imm or store instruction\n\nassign o_B_imm = { { 19{ i_instr[ 31 ] } }, i_instr[ 31 ], i_instr[ 7 ], i_instr[ 30: 25 ], i_instr[ 11: 8 ], 1'b0 };\n\nassign o_U_imm = { i_instr[ 31: 12 ], 12'b0 };\n\nassign o_J_imm = { { 11{ i_instr[ 31 ] } }, i_instr[ 31 ], i_instr[ 19: 12 ], i_instr[ 20 ], i_instr[ 30: 21 ], 1'b0 }; //for JAL,\n\nassign o_shamt = i_instr[ 24: 20 ];\n\nassign o_csr_imm = {27'b0,i_instr[19:15]};\n\n//===============================================================================\n// instruction decode for I-type operator 7'b001_0011\nwire rv32i_addi  = OP_IMM & funct3_0;\nwire rv32i_slti  = OP_IMM & funct3_2;\nwire rv32i_sltiu = OP_IMM & funct3_3;\nwire rv32i_xori  = OP_IMM & funct3_4;\nwire rv32i_ori   = OP_IMM & funct3_6;\nwire rv32i_andi  = OP_IMM & funct3_7;\n\nwire rv32i_slli = OP_IMM & funct3_1 ;\nwire rv32i_srli = OP_IMM & funct3_5 & funct7_0;\nwire rv32i_srai = OP_IMM & funct3_5 & funct7_20;\n\nassign o_opimm_instr = { rv32i_srai, rv32i_srli, rv32i_slli,\nrv32i_andi, rv32i_ori, rv32i_xori,\nrv32i_sltiu, rv32i_slti, rv32i_addi };\n\n//===============================================================================\n//instruction decode for R-type\n\nwire rv32i_add  = OP & funct3_0 & funct7_0;\nwire rv32i_sub  = OP & funct3_0 & funct7_20;\n\nwire rv32i_sll  = OP & funct3_1 & funct7_0;\n\nwire rv32i_slt  = OP & funct3_2 & funct7_0;\nwire rv32i_sltu = OP & funct3_3 & funct7_0;\nwire rv32i_xor  = OP & funct3_4 & funct7_0;\n\nwire rv32i_srl  = OP & funct3_5 & funct7_0;\nwire rv32i_sra  = OP & funct3_5 & funct7_20;\n\nwire rv32i_or   = OP & funct3_6 & funct7_0;\nwire rv32i_and  = OP & funct3_7 & funct7_0;\n\nassign o_op_instr = { rv32i_sra, rv32i_sub, rv32i_srl,\nrv32i_sll, rv32i_xor, rv32i_or,\nrv32i_and, rv32i_sltu, rv32i_slt,\nrv32i_add };\n//===============================================================================\n//instruction for conditional branch\nwire rv32i_beq  = BRANCH & funct3_0;\nwire rv32i_bne  = BRANCH & funct3_1;\nwire rv32i_blt  = BRANCH & funct3_4;\nwire rv32i_bltu = BRANCH & funct3_6;\nwire rv32i_bgt  = BRANCH & funct3_5;\nwire rv32i_bgtu = BRANCH & funct3_7;\n\nassign o_branch_instr = { rv32i_bgtu, rv32i_bgt, rv32i_bltu,\nrv32i_blt, rv32i_bne, rv32i_beq };\n\n//===============================================================================\n// memory operation load/store\nwire rv32i_lw  = LOAD & funct3_2;\nwire rv32i_lh  = LOAD & funct3_1;\nwire rv32i_lhu = LOAD & funct3_5;\nwire rv32i_lb  = LOAD & funct3_0;\nwire rv32i_lbu = LOAD & funct3_4;\n\nwire rv32i_sw = STORE & funct3_2;\nwire rv32i_sh = STORE & funct3_1;\nwire rv32i_sb = STORE & funct3_0;\n\n\nassign o_load_instr  = { rv32i_lbu, rv32i_lb, rv32i_lhu, rv32i_lh, rv32i_lw };\nassign o_store_instr = { rv32i_sb, rv32i_sh, rv32i_sw };\n\n//===============================================================================\n//instruction for fence\nwire rv32i_fence   = FENCE & funct3_0;\nwire rv32i_fence_i = FENCE & funct3_1;\n\nassign o_fence_instr = {rv32i_fence_i, rv32i_fence };\n\n//===============================================================================\n//instruction for csr\n\nwire rv32i_csrrw  = CSR & funct3_1;\nwire rv32i_csrrs  = CSR & funct3_2;\nwire rv32i_csrrc  = CSR & funct3_3;\nwire rv32i_csrrwi = CSR & funct3_5;\nwire rv32i_csrrsi = CSR & funct3_6;\nwire rv32i_csrrci = CSR & funct3_7;\n\nassign o_csr_instr = { rv32i_csrrci, rv32i_csrrsi, rv32i_csrrwi, \nrv32i_csrrc, rv32i_csrrs, rv32i_csrrw};\n\n\nassign o_csr_addr = i_instr[ 31: 20 ];\n//===============================================================================\n// System Instructions\nassign o_ecall  = CSR & funct3_0 & (i_instr[31:20] == 12'b0000_0000_0000);\nassign o_ebreak = CSR & funct3_0 & (i_instr[31:20] == 12'b0000_0000_0001);\nassign o_mret   = CSR & funct3_0 & (i_instr[31:20] == 12'b0011_0000_0010);\nassign o_dret   = CSR & funct3_0 & (i_instr[31:20] == 12'b0111_1011_0010);\nassign o_wfi    = CSR & funct3_0 & (i_instr[31:20] == 12'b0001_0000_0101);\n\n\nendmodule\n")),(0,i.kt)("p",null,"1\uff09\u67e5\u627e\u6c47\u7f16\u6307\u4ee4\u673a\u5668\u7801\u6700\u4f4e7\u4f4d\uff0c\u5f97\u5230opcode\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"wire [ 6: 0 ] opcode = i_instr[ 6: 0 ]; \nassign RV32I = ( opcode[ 1: 0 ] == 2'b11 ) && ( opcode[ 4: 2 ] != 3'b111 );\n")),(0,i.kt)("p",null,"\u5982\u679copcode \u6700\u4f4e2\u4f4d\u4e3a 11\uff0c \u5e76\u4e14\u6700\u4f4e5\u4f4d \u4e0d\u80fd\u662f 111111 \uff0c \u90a3\u4e48\u5f53\u524d\u6307\u4ee4\u4e3a32\u4f4d\u957f\u5ea6\u7684\u6307\u4ee4\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"wire LUI           = ( opcode[ 6: 0 ] == 7\u2019b011_0111 );   // TYPE U lui\nwire AUIPC     = ( opcode[ 6: 0 ] == 7\u2019b001_0111 );   // TYPE U auipc\n\nwire JAL           = ( opcode[ 6: 0 ] == 7\u2019b110_1111 );   // TYPE J jal\nwire JALR        = ( opcode[ 6: 0 ] == 7\u2019b110_0111 );   // TYPE I jalr\n\nwire BRANCH = ( opcode[ 6: 0 ] == 7\u2019b110_0011 );  // TYPE B\n\nwire LOAD       = ( opcode[ 6: 0 ] == 7\u2019b000_0011 );  // TYPE I load\nwire STORE    = ( opcode[ 6: 0 ] == 7\u2019b010_0011 );   // YTPE S store\n\nwire OP_IMM = ( opcode[ 6: 0 ] == 7\u2019b001_0011 );  // TYPE I operator\nwire OP             = ( opcode[ 6: 0 ] == 7\u2019b011_0011 );   // TYPE R operator\n\nwire FENCE     = ( opcode[ 6: 0 ] == 7\u2019b000_1111 );  // TYPE I fence\nwire CSR           = ( opcode[ 6: 0 ] == 7\u2019b111_0011 );   // TYPE I csr\n")),(0,i.kt)("p",null,"\u5982\u679c\u662fRV32I \u6307\u4ee4\uff0c \u5148\u8bd1\u7801\u51fa\u662f\u54ea\u4e00\u7c7b\u6307\u4ee4\u3002"),(0,i.kt)("p",null,"2\uff09\u5c06funct3\uff0cfunct7 \u8bd1\u7801\u51fa\u6765\uff0c funct3 \u4e3b\u8981\u7528\u6765\u6307\u5b9a\u5f53\u524d\u7c7b\u4e2d\u5177\u4f53\u54ea\u4e00\u6761\u6c47\u7f16\u6307\u4ee4\uff1b funct7 \u662f\u5f53funct3 \u4e0d\u591f\u7528\u65f6\u7684\u4e00\u79cd\u8865\u5145\uff0c\u6bd4\u5982\uff1a\u67d0\u4e00\u7c7b\u6307\u4ee4\u4e2d\u67099\u6761\u6307\u4ee4\uff0c\u4f46funct3 \u6700\u591a\u53ea\u80fd\u6307\u5b9a8\u6761\u6307\u4ee4\u3002  "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"wire [ 2: 0 ] funct3 = i_instr[ 14: 12 ]; \nwire [ 6: 0 ] funct7 = i_instr[ 31: 25 ]; \n\nassign o_rd_idx = i_instr[ 11: 7 ]; \nassign o_rs1_idx = i_instr[ 19: 15 ]; \nassign o_rs2_idx = i_instr[ 24: 20 ];\n")),(0,i.kt)("p",null,"3\uff09 \u62fc\u63a5 \u4e0d\u540c\u6307\u4ee4\u4e2d\u7684\u7acb\u5373\u6570\uff0c \u6839\u636e\u6c47\u7f16\u6307\u4ee4\uff0c cpu \u8fd9\u91cc\u505a\u7684\u662f\u76f8\u5bf9\u5e94\u7684\u89e3\u7801"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-verilog"},"assign o_I_imm = { { 20{ i_instr[ 31 ] } } , i_instr[ 31: 20 ] }; //addi/slti/sltiu/andi/ori/xori, lw/lh/lhu/lb/lbu, JALR, SLLI/SRLi/SRAI\n\nassign o_S_imm = { { 20{ i_instr[ 31 ] } }, i_instr[ 31: 25 ], i_instr[ 11: 7 ] }; //s-type instruction, provide imm or store instruction\n\nassign o_B_imm = { { 19{ i_instr[ 31 ] } }, i_instr[ 31 ], i_instr[ 7 ], i_instr[ 30: 25 ], i_instr[ 11: 8 ], 1\u2019b0 };\n\nassign o_U_imm = { i_instr[ 31: 12 ], 12\u2019b0 };\n\nassign o_J_imm = { { 11{ i_instr[ 31 ] } }, i_instr[ 31 ], i_instr[ 19: 12 ], i_instr[ 20 ], i_instr[ 30: 21 ], 1\u2019b0 }; //for JAL,\n\nassign o_shamt = i_instr[ 24: 20 ];\n\nassign o_csr_imm = {27\u2019b0,i_instr[19:15]};\n")),(0,i.kt)("p",null,"4\uff09\u786e\u5b9a\u6700\u7ec8\u6307\u4ee4"),(0,i.kt)("p",null,"\u6839\u636eopcode \u8bd1\u7801\u51fa\u6765\u7684\u5927\u7c7b\uff0c funct3\uff0cfunct7 \u8bd1\u7801\u51fa\u6765\u7684\u5177\u4f53\u6307\u4ee4\uff0c \u6700\u7ec8\u786e\u5b9a\u5f53\u524d\u7684\u673a\u5668\u7801\u662f\u6307\u4ee4\u96c6\u5f53\u4e2d\u7684\u54ea\u4e00\u6761\u6307\u4ee4\u3002"))}o.isMDXComponent=!0},41248:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/74-f0350d6f93e5db1f644a83eb3e554012.jpeg"},84982:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/75-13f465b6ae7eb71f30d0cf1311e30cb8.jpeg"},56487:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/76-a3307b840bf155c7942ecb5d1dba9b6c.jpeg"},14663:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/77-112e394bd4154be984189b42003daa93.jpeg"},84829:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/78-88f82b33d8547a7586ef58ac4d141ecb.jpeg"},79021:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/79-0f93b8e188f8dcc70cbd78a191b202f9.jpeg"},70860:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/80-47c7e0190eb42928d03189f7ea1bceb7.jpeg"},35659:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/81-709322e9227e7682e18cae6a4fdd1cec.jpeg"},82005:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/82-28344fc854246fc9b259aecede460652.jpeg"},18925:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/83-fd993f7f82f2c0b8278220b5c0346cff.jpeg"},5481:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/84-97e4c350f7e0e00f603aa4bd24d76b71.jpeg"},97774:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/85-d77a5952528914e973e9e2ca206f3746.jpeg"},83425:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/86-341435ec9329386ffb2df95b7fb86ee8.jpeg"},48342:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/87-230cb2013207140e5680f7f4d5957a41.jpeg"},85207:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/88-103e12885c2f3c8ae0648b4bc076f692.jpeg"},3849:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/89-e82adf978bb0f5dbca58b4bd937f4e5d.jpeg"},20142:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/90-69959458056588fea57b7ae0b2190438.jpeg"},31851:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/91-50826a4c38a58d764fc180d12e5beb25.jpeg"},73372:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/92-ceebe67179ed64e2df505a8f8ca68f34.jpeg"},70445:(n,t,e)=>{e.d(t,{Z:()=>r});const r=e.p+"assets/images/93-1696daec5a1e34198a8248276b96de1f.jpeg"}}]);