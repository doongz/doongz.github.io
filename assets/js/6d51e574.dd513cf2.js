"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4879],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>g});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=p(a),c=r,g=m["".concat(s,".").concat(c)]||m[c]||u[c]||l;return a?n.createElement(g,i(i({ref:t},d),{},{components:a})):n.createElement(g,i({ref:t},d))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},10824:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const l={},i="GDB",o={unversionedId:"Skill/\u5de5\u5177\u94fe/gdb",id:"Skill/\u5de5\u5177\u94fe/gdb",title:"GDB",description:"\u5b98\u7f51\uff1ahttp://sourceware.org/gdb/documentation/",source:"@site/docs/Skill/\u5de5\u5177\u94fe/5-gdb.md",sourceDirName:"Skill/\u5de5\u5177\u94fe",slug:"/Skill/\u5de5\u5177\u94fe/gdb",permalink:"/docs/Skill/\u5de5\u5177\u94fe/gdb",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"skillSidebar",previous:{title:"Vim",permalink:"/docs/Skill/\u5de5\u5177\u94fe/vim"},next:{title:"GCC",permalink:"/docs/Skill/\u5de5\u5177\u94fe/gcc"}},s={},p=[{value:"\u4e00\u3001\u5e38\u7528\u547d\u4ee4",id:"\u4e00\u5e38\u7528\u547d\u4ee4",level:2},{value:"1. \u52a0\u8f7d",id:"1-\u52a0\u8f7d",level:3},{value:"2. \u8bbe\u7f6e\u65ad\u70b9",id:"2-\u8bbe\u7f6e\u65ad\u70b9",level:3},{value:"breakpoints",id:"breakpoints",level:4},{value:"watchpoints",id:"watchpoints",level:4},{value:"Catchpoints",id:"catchpoints",level:4},{value:"3. \u8fd0\u884c\u81f3\u65ad\u70b9",id:"3-\u8fd0\u884c\u81f3\u65ad\u70b9",level:3},{value:"4. \u5220\u9664\u7981\u7528\u65ad\u70b9",id:"4-\u5220\u9664\u7981\u7528\u65ad\u70b9",level:3},{value:"5. \u6267\u884c",id:"5-\u6267\u884c",level:3},{value:"6. \u6253\u5370\u53d8\u91cf",id:"6-\u6253\u5370\u53d8\u91cf",level:3},{value:"7. \u8bbe\u7f6e\u4e2d\u65ad\u540e\u663e\u793a",id:"7-\u8bbe\u7f6e\u4e2d\u65ad\u540e\u663e\u793a",level:3},{value:"8. \u9000\u51fa",id:"8-\u9000\u51fa",level:3},{value:"9. \u4fe1\u606f\u67e5\u770b",id:"9-\u4fe1\u606f\u67e5\u770b",level:3},{value:"\u4e8c\u3001layout",id:"\u4e8clayout",level:2},{value:"\u793a\u4f8b",id:"\u793a\u4f8b",level:3},{value:"\u4e09\u3001Examining the Stack",id:"\u4e09examining-the-stack",level:2},{value:"1. Stack Frames",id:"1-stack-frames",level:3},{value:"2. Backtraces",id:"2-backtraces",level:3},{value:"3. Selecting a Frame",id:"3-selecting-a-frame",level:3},{value:"4. Information About a Frame",id:"4-information-about-a-frame",level:3},{value:"\u56db\u3001Examining Data",id:"\u56dbexamining-data",level:2}],d={toc:p};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"gdb"},"GDB"),(0,r.kt)("p",null,"\u5b98\u7f51\uff1a",(0,r.kt)("a",{parentName:"p",href:"http://sourceware.org/gdb/documentation/"},"http://sourceware.org/gdb/documentation/")),(0,r.kt)("p",null,"\u6587\u6863\uff1a",(0,r.kt)("a",{parentName:"p",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/"},"https://sourceware.org/gdb/current/onlinedocs/gdb/")),(0,r.kt)("p",null,"gdb\u547d\u4ee4\u5305\u542b\u5728GNU\u7684gcc\u5f00\u53d1\u5957\u4ef6\u4e2d\uff0c\u662f\u529f\u80fd\u5f3a\u5927\u7684\u7a0b\u5e8f\u8c03\u8bd5\u5668\u3002GDB\u4e2d\u7684\u547d\u4ee4\u56fa\u7136\u5f88\u591a\uff0c\u4f46\u6211\u4eec\u53ea\u9700\u638c\u63e1\u5176\u4e2d\u5341\u4e2a\u5de6\u53f3\u7684\u547d\u4ee4\uff0c\u5c31\u5927\u81f4\u53ef\u4ee5\u5b8c\u6210\u65e5\u5e38\u7684\u57fa\u672c\u7684\u7a0b\u5e8f\u8c03\u8bd5\u5de5\u4f5c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"gdb <\u9009\u9879> <\u4e8c\u8fdb\u5236\u6587\u4ef6>\n\n-cd\uff1a\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\uff1b \n-q\uff1a\u5b89\u9759\u6a21\u5f0f\uff0c\u4e0d\u6253\u5370\u4ecb\u7ecd\u4fe1\u606f\u548c\u7248\u672c\u4fe1\u606f\uff1b \n-d\uff1a\u6dfb\u52a0\u6587\u4ef6\u67e5\u627e\u8def\u5f84\uff1b \n-x\uff1a\u4ece\u6307\u5b9a\u6587\u4ef6\u4e2d\u6267\u884cGDB\u6307\u4ee4\uff1b \n-s\uff1a\u8bbe\u7f6e\u8bfb\u53d6\u7684\u7b26\u53f7\u8868\u6587\u4ef6\u3002\n")),(0,r.kt)("h2",{id:"\u4e00\u5e38\u7528\u547d\u4ee4"},"\u4e00\u3001\u5e38\u7528\u547d\u4ee4"),(0,r.kt)("h3",{id:"1-\u52a0\u8f7d"},"1. \u52a0\u8f7d"),(0,r.kt)("p",null,"\u52a0\u8f7d\u88ab\u8c03\u8bd5\u7684\u53ef\u6267\u884c\u7a0b\u5e8f\u6587\u4ef6\u3002 \u56e0\u4e3a\u4e00\u822c\u90fd\u5728\u88ab\u8c03\u8bd5\u7a0b\u5e8f\u6240\u5728\u76ee\u5f55\u4e0b\u6267\u884cGDB\uff0c\u56e0\u800c\u6587\u672c\u540d\u4e0d\u9700\u8981\u5e26\u8def\u5f84\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) file gdb-sample\n")),(0,r.kt)("p",null,"start\uff0c\u8fd0\u884c\u88ab\u8c03\u8bd5\u7684\u7a0b\u5e8f\uff0c\u8fbe\u5230c\u6e90\u7801\u7684\u7b2c\u4e00\u884c\u505c\u4e0b\u6765\uff0c\u4e00\u822c\u662fmain"),(0,r.kt)("p",null,"starti\uff0c\u8fd0\u884c\u88ab\u8c03\u8bd5\u7684\u7a0b\u5e8f\uff0c\u8fbe\u5230\u6c47\u7f16\u7684\u7b2c\u4e00\u884c\u505c\u4e0b\u6765\uff0c\u4e00\u822c\u662f _start"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) start\n(gdb) starti\n")),(0,r.kt)("p",null,"Run\u7684\u7b80\u5199\uff0c\u8fd0\u884c\u88ab\u8c03\u8bd5\u7684\u7a0b\u5e8f\u3002 \u5982\u679c\u6b64\u524d\u6ca1\u6709\u4e0b\u8fc7\u65ad\u70b9\uff0c\u5219\u6267\u884c\u5b8c\u6574\u4e2a\u7a0b\u5e8f\uff1b\u5982\u679c\u6709\u65ad\u70b9\uff0c\u5219\u7a0b\u5e8f\u6682\u505c\u5728\u7b2c\u4e00\u4e2a\u53ef\u7528\u65ad\u70b9\u5904\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) run\n(gdb) r\n")),(0,r.kt)("h3",{id:"2-\u8bbe\u7f6e\u65ad\u70b9"},"2. \u8bbe\u7f6e\u65ad\u70b9"),(0,r.kt)("h4",{id:"breakpoints"},"breakpoints"),(0,r.kt)("p",null,"b: Breakpoint\u7684\u7b80\u5199\uff0c\u8bbe\u7f6e\u65ad\u70b9\u3002\u4e24\u53ef\u4ee5\u4f7f\u7528\u201c\u884c\u53f7\u201d\u201c\u51fd\u6570\u540d\u79f0\u201d\u201c\u6267\u884c\u5730\u5740\u201d\u7b49\u65b9\u5f0f\u6307\u5b9a\u65ad\u70b9\u4f4d\u7f6e\u3002"),(0,r.kt)("p",null,"\u5176\u4e2d\u5728\u51fd\u6570\u540d\u79f0\u524d\u9762\u52a0\u201c*\u201d\u7b26\u53f7\u8868\u793a\u5c06\u65ad\u70b9\u8bbe\u7f6e\u5728\u201c\u7531\u7f16\u8bd1\u5668\u751f\u6210\u7684prolog\u4ee3\u7801\u5904\u201d\u3002\u5982\u679c\u4e0d\u4e86\u89e3\u6c47\u7f16\uff0c\u53ef\u4ee5\u4e0d\u4e88\u7406\u4f1a\u6b64\u7528\u6cd5\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"b <\u884c\u53f7> \nb <\u51fd\u6570\u540d\u79f0> \nb *<\u51fd\u6570\u540d\u79f0> \nb *<\u4ee3\u7801\u5730\u5740> \nd [\u7f16\u53f7]\n\n(gdb) b 8 \n(gdb) b main \n(gdb) b *main \n(gdb) b *0x804835c \n(gdb) d\n")),(0,r.kt)("h4",{id:"watchpoints"},"watchpoints"),(0,r.kt)("p",null,"A ",(0,r.kt)("em",{parentName:"p"},"watchpoint")," is a special breakpoint that stops your program when the value of an expression changes. The expression may be a value of a variable, or it could involve values of one or more variables combined by operators, such as \u2018a + b\u2019. This is sometimes called ",(0,r.kt)("em",{parentName:"p"},"data breakpoints"),". You must use a different command to set watchpoints (see ",(0,r.kt)("a",{parentName:"p",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Watchpoints.html#Set-Watchpoints"},"Setting Watchpoints"),"), but aside from that, you can manage a watchpoint like any other breakpoint: you enable, disable, and delete both breakpoints and watchpoints using the same commands."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) watch a           \nHardware watchpoint 2: a\n(gdb) c                  \nContinuing.              \n                         \nHardware watchpoint 2: a \n                         \nOld value = 32767        \nNew value = 0            \nmain () at a.c:5    \n(gdb) c                 \nContinuing.             \n                        \nHardware watchpoint 2: a\n                        \nOld value = 0           \nNew value = 3           \nmain () at a.c:7        \n")),(0,r.kt)("h4",{id:"catchpoints"},"Catchpoints"),(0,r.kt)("p",null,"You can use ",(0,r.kt)("em",{parentName:"p"},"catchpoints")," to cause the debugger to stop for certain kinds of program events, such as C",(0,r.kt)("inlineCode",{parentName:"p"},"++")," exceptions or the loading of a shared library. Use the ",(0,r.kt)("inlineCode",{parentName:"p"},"catch")," command to set a catchpoint."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Catchpoints.html#Set-Catchpoints"},"Set Catchpoints (Debugging with GDB) (sourceware.org)")),(0,r.kt)("h3",{id:"3-\u8fd0\u884c\u81f3\u65ad\u70b9"},"3. \u8fd0\u884c\u81f3\u65ad\u70b9"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) c\n")),(0,r.kt)("p",null,"Continue\u7684\u7b80\u5199\uff0c\u7ee7\u7eed\u6267\u884c\u88ab\u8c03\u8bd5\u7a0b\u5e8f\uff0c\u76f4\u81f3\u4e0b\u4e00\u4e2a\u65ad\u70b9\uff08\u65ad\u70b9\u884c\u4e0d\u6267\u884c\uff09\u6216\u7a0b\u5e8f\u7ed3\u675f\u3002"),(0,r.kt)("h3",{id:"4-\u5220\u9664\u7981\u7528\u65ad\u70b9"},"4. \u5220\u9664\\\u7981\u7528\u65ad\u70b9"),(0,r.kt)("p",null,"d: Delete breakpoint\u7684\u7b80\u5199\uff0c\u5220\u9664\u6307\u5b9a\u7f16\u53f7\u7684\u67d0\u4e2a\u65ad\u70b9\uff0c\u6216\u5220\u9664\u6240\u6709\u65ad\u70b9\u3002\u65ad\u70b9\u7f16\u53f7\u4ece1\u5f00\u59cb\u9012\u589e\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) i b\n(gdb) d 1\n")),(0,r.kt)("p",null,"Rather than deleting a breakpoint, watchpoint, or catchpoint, you might prefer to ",(0,r.kt)("em",{parentName:"p"},"disable")," it. This makes the breakpoint inoperative as if it had been deleted, but remembers the information on the breakpoint so that you can ",(0,r.kt)("em",{parentName:"p"},"enable")," it again later."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"disable [breakpoints] [list\u2026]\nenable [breakpoints] [list\u2026]\n")),(0,r.kt)("h3",{id:"5-\u6267\u884c"},"5. \u6267\u884c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) s \n(gdb) n\n(gdb) s <count>\n(gdb) n <count>\n")),(0,r.kt)("p",null,"s/step: \u6267\u884c\u4e00\u884c\u6e90\u7a0b\u5e8f\u4ee3\u7801\uff0c\u5982\u679c\u6b64\u884c\u4ee3\u7801\u4e2d\u6709\u51fd\u6570\u8c03\u7528\uff0c\u5219\u8fdb\u5165\u8be5\u51fd\u6570\uff1b",(0,r.kt)("strong",{parentName:"p"},"\u6267\u884c\u8fdb\u5165")),(0,r.kt)("p",null,"n/next: \u6267\u884c\u4e00\u884c\u6e90\u7a0b\u5e8f\u4ee3\u7801\uff0c\u6b64\u884c\u4ee3\u7801\u4e2d\u7684\u51fd\u6570\u8c03\u7528\u4e5f\u4e00\u5e76\u6267\u884c\u3002 s \u76f8\u5f53\u4e8e\u5176\u5b83\u8c03\u8bd5\u5668\u4e2d\u7684\u201cStep Into (\u5355\u6b65\u8ddf\u8e2a\u8fdb\u5165)\u201d\uff1b",(0,r.kt)("strong",{parentName:"p"},"\u6267\u884c\u8df3\u8fc7")),(0,r.kt)("p",null,"n \u76f8\u5f53\u4e8e\u5176\u5b83\u8c03\u8bd5\u5668\u4e2d\u7684\u201cStep Over (\u5355\u6b65\u8ddf\u8e2a)\u201d "),(0,r.kt)("p",null,"\u8fd9\u4e24\u4e2a\u547d\u4ee4\u5fc5\u987b\u5728\u6709\u6e90\u4ee3\u7801\u8c03\u8bd5\u4fe1\u606f\u7684\u60c5\u51b5\u4e0b\u624d\u53ef\u4ee5\u4f7f\u7528\uff08GCC\u7f16\u8bd1\u65f6\u4f7f\u7528\u201c-g\u201d\u53c2\u6570\uff09"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) si\n(gdb) ni\n")),(0,r.kt)("p",null,"si\u547d\u4ee4\u7c7b\u4f3c\u4e8es\u547d\u4ee4\uff0cni\u547d\u4ee4\u7c7b\u4f3c\u4e8en\u547d\u4ee4\u3002"),(0,r.kt)("p",null,"\u6240\u4e0d\u540c\u7684\u662f\uff0c\u8fd9\u4e24\u4e2a\u547d\u4ee4\uff08si/ni\uff09\u6240\u9488\u5bf9\u7684\u662f\u6c47\u7f16\u6307\u4ee4\uff0c\u800cs/n\u9488\u5bf9\u7684\u662f\u6e90\u4ee3\u7801\u3002"),(0,r.kt)("h3",{id:"6-\u6253\u5370\u53d8\u91cf"},"6. \u6253\u5370\u53d8\u91cf"),(0,r.kt)("p",null,"Print\u7684\u7b80\u5199\uff0c\u663e\u793a\u6307\u5b9a\u53d8\u91cf\uff08\u4e34\u65f6\u53d8\u91cf\u6216\u5168\u5c40\u53d8\u91cf\uff09\u7684\u503c\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"p <\u53d8\u91cf\u540d\u79f0>\n\n(gdb) p i \n(gdb) p nGlobalVar\n")),(0,r.kt)("p",null,"\u4ee5 ",(0,r.kt)("inlineCode",{parentName:"p"},"all_thread")," \u6570\u7ec4\u4e3a\u4f8b"),(0,r.kt)("p",null,"\u6253\u5370 16 \u8fdb\u5236\u4fe1\u606f"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"p/x *all_thread\n")),(0,r.kt)("p",null,"\u6253\u5370\u524d4\u4e2a\u5143\u7d20\uff0c\u6253\u5370\u4e0b\u6807\u4ecem\u5f00\u59cb\u7684n\u4e2a\u5143\u7d20\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"p/x *all_thread@4\np/x *all_thread[m]@n\n")),(0,r.kt)("h3",{id:"7-\u8bbe\u7f6e\u4e2d\u65ad\u540e\u663e\u793a"},"7. \u8bbe\u7f6e\u4e2d\u65ad\u540e\u663e\u793a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"display ... \nundisplay <\u7f16\u53f7>\n\n(gdb) display /i $pc \n(gdb) undisplay 1\n")),(0,r.kt)("p",null,"display\uff0c\u8bbe\u7f6e\u7a0b\u5e8f\u4e2d\u65ad\u540e\u6b32\u663e\u793a\u7684\u6570\u636e\u53ca\u5176\u683c\u5f0f\u3002 "),(0,r.kt)("p",null,"\u4f8b\u5982\uff0c\u5982\u679c\u5e0c\u671b\u6bcf\u6b21\u7a0b\u5e8f\u4e2d\u65ad\u540e\u53ef\u4ee5\u770b\u5230\u5373\u5c06\u88ab\u6267\u884c\u7684\u4e0b\u4e00\u6761\u6c47\u7f16\u6307\u4ee4\uff0c\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4 \u201cdisplay /i $pc\u201d \u5176\u4e2d $pc \u4ee3\u8868\u5f53\u524d\u6c47\u7f16\u6307\u4ee4\uff0c/i \u8868\u793a\u4ee5\u5341\u516d\u8fdb\u884c\u663e\u793a\u3002"),(0,r.kt)("p",null,"\u5f53\u9700\u8981\u5173\u5fc3\u6c47\u7f16\u4ee3\u7801\u65f6\uff0c\u6b64\u547d\u4ee4\u76f8\u5f53\u6709\u7528\u3002"),(0,r.kt)("p",null,"undispaly\uff0c\u53d6\u6d88\u5148\u524d\u7684display\u8bbe\u7f6e\uff0c\u7f16\u53f7\u4ece1\u5f00\u59cb\u9012\u589e\u3002"),(0,r.kt)("h3",{id:"8-\u9000\u51fa"},"8. \u9000\u51fa"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) q\n")),(0,r.kt)("p",null,"Quit\u7684\u7b80\u5199\uff0c\u9000\u51faGDB\u8c03\u8bd5\u73af\u5883\u3002"),(0,r.kt)("h3",{id:"9-\u4fe1\u606f\u67e5\u770b"},"9. \u4fe1\u606f\u67e5\u770b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"i\n(gdb) i r\n")),(0,r.kt)("p",null,"Info\u7684\u7b80\u5199\uff0c\u7528\u4e8e\u663e\u793a\u5404\u7c7b\u4fe1\u606f\uff0c\u8be6\u60c5\u8bf7\u67e5\u9605\u201chelp i\u201d\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"help [\u547d\u4ee4\u540d\u79f0]\n\n(gdb) help\n")),(0,r.kt)("p",null,"GDB\u5e2e\u52a9\u547d\u4ee4\uff0c\u63d0\u4f9b\u5bf9GDB\u540d\u79cd\u547d\u4ee4\u7684\u89e3\u91ca\u8bf4\u660e\u3002 \u5982\u679c\u6307\u5b9a\u4e86\u201c\u547d\u4ee4\u540d\u79f0\u201d\u53c2\u6570\uff0c\u5219\u663e\u793a\u8be5\u547d\u4ee4\u7684\u8be6\u7ec6\u8bf4\u660e\uff1b\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u53c2\u6570\uff0c\u5219\u5206\u7c7b\u663e\u793a\u6240\u6709GDB\u547d\u4ee4\uff0c\u4f9b\u7528\u6237\u8fdb\u4e00\u6b65\u6d4f\u89c8\u548c\u67e5\u8be2\u3002"),(0,r.kt)("h2",{id:"\u4e8clayout"},"\u4e8c\u3001layout"),(0,r.kt)("p",null,"layout\uff1a\u7528\u4e8e\u5206\u5272\u7a97\u53e3\uff0c\u53ef\u4ee5\u4e00\u8fb9\u67e5\u770b\u4ee3\u7801\uff0c\u4e00\u8fb9\u6d4b\u8bd5\u3002\u4e3b\u8981\u6709\u4ee5\u4e0b\u51e0\u79cd\u7528\u6cd5\uff1a"),(0,r.kt)("p",null,"layout src\uff1a\u663e\u793a\u6e90\u4ee3\u7801\u7a97\u53e3"),(0,r.kt)("p",null,"layout asm\uff1a\u663e\u793a\u6c47\u7f16\u7a97\u53e3"),(0,r.kt)("p",null,"layout regs\uff1a\u663e\u793a\u6e90\u4ee3\u7801/\u6c47\u7f16\u548c\u5bc4\u5b58\u5668\u7a97\u53e3"),(0,r.kt)("p",null,"layout split\uff1a\u663e\u793a\u6e90\u4ee3\u7801\u548c\u6c47\u7f16\u7a97\u53e3"),(0,r.kt)("p",null,"layout next\uff1a\u663e\u793a\u4e0b\u4e00\u4e2alayout"),(0,r.kt)("p",null,"layout prev\uff1a\u663e\u793a\u4e0a\u4e00\u4e2alayout"),(0,r.kt)("p",null,"Ctrl + L\uff1a\u5237\u65b0\u7a97\u53e3"),(0,r.kt)("p",null,"Ctrl + x\uff0c\u518d\u63091\uff1a\u5355\u7a97\u53e3\u6a21\u5f0f\uff0c\u663e\u793a\u4e00\u4e2a\u7a97\u53e3"),(0,r.kt)("p",null,"Ctrl + x\uff0c\u518d\u63092\uff1a\u53cc\u7a97\u53e3\u6a21\u5f0f\uff0c\u663e\u793a\u4e24\u4e2a\u7a97\u53e3"),(0,r.kt)("p",null,"Ctrl + x\uff0c\u518d\u6309a\uff1a\u56de\u5230\u4f20\u7edf\u6a21\u5f0f\uff0c\u5373\u9000\u51falayout\uff0c\u56de\u5230\u6267\u884clayout\u4e4b\u524d\u7684\u8c03\u8bd5\u7a97\u53e3"),(0,r.kt)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"gdb\u4e2d\u8f93\u5165 ",(0,r.kt)("inlineCode",{parentName:"li"},"tui enable")," \u53ef\u4ee5\u6253\u5f00\u6e90\u4ee3\u7801\u5c55\u793a\u7a97\u53e3\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5728gdb\u4e2d\u8f93\u5165 ",(0,r.kt)("inlineCode",{parentName:"li"},"layout asm"),"\uff0c\u53ef\u4ee5\u5728tui\u7a97\u53e3\u770b\u5230\u6240\u6709\u7684\u6c47\u7f16\u6307\u4ee4\u3002\u518d\u8f93\u5165 ",(0,r.kt)("inlineCode",{parentName:"li"},"layout reg")," \u53ef\u4ee5\u770b\u5230\u6240\u6709\u7684\u5bc4\u5b58\u5668\u4fe1\u606f\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u4f60\u53ef\u4ee5\u5728gdb\u4e2d\u8f93\u5165 ",(0,r.kt)("inlineCode",{parentName:"li"},"info breakpoints")," \uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u6240\u6709\u8bbe\u7f6e\u4e86\u7684\u65ad\u70b9\u3002\u4f60\u751a\u81f3\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u65ad\u70b9\u5df2\u7ecf\u88ab\u547d\u4e2d\u4e86\u51e0\u6b21\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u73b0\u5728\u6211\u4eec\u5728 dummymain \u51fd\u6570\u4e2d\u3002\u5982\u679c\u6211\u4eec\u5728gdb\u4e2d\u8f93\u5165 ",(0,r.kt)("inlineCode",{parentName:"li"},"info frame")," \uff0c\u53ef\u4ee5\u770b\u5230\u6709\u5173\u5f53\u524dStack Frame\u8bb8\u591a\u6709\u7528\u7684\u4fe1\u606f\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8f93\u5165 ",(0,r.kt)("inlineCode",{parentName:"li"},"backtrace"),"\uff08\u7b80\u5199 ",(0,r.kt)("inlineCode",{parentName:"li"},"bt")," \uff09\u53ef\u4ee5\u770b\u5230\u4ece\u5f53\u524d\u8c03\u7528\u6808\u5f00\u59cb\u7684\u6240\u6709Stack Frame\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u5bf9\u67d0\u4e00\u4e2aStack Frame\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u5148\u5b9a\u4f4d\u5230\u90a3\u4e2aframe\uff08 ",(0,r.kt)("inlineCode",{parentName:"li"},"frame 3")," \uff09\u518d\u8f93\u5165",(0,r.kt)("inlineCode",{parentName:"li"},"info frame")," \uff0c\u5047\u8bbe\u5bf9syscall\u7684Stack Frame\u611f\u5174\u8da3\u3002")),(0,r.kt)("h2",{id:"\u4e09examining-the-stack"},"\u4e09\u3001Examining the Stack"),(0,r.kt)("h3",{id:"1-stack-frames"},"1. Stack Frames"),(0,r.kt)("p",null,"When your program has stopped, the first thing you need to know is where it stopped and how it got there."),(0,r.kt)("p",null,"Each time your program performs a function call, information about the call is generated. That information includes the location of the call in your program, the arguments of the call, and the local variables of the function being called. The information is saved in a block of data called a ",(0,r.kt)("em",{parentName:"p"},"stack frame"),". The stack frames are allocated in a region of memory called the ",(0,r.kt)("em",{parentName:"p"},"call stack"),"."),(0,r.kt)("p",null,"Inside your program, stack frames are identified by their addresses. A stack frame consists of many bytes, each of which has its own address; each kind of computer has a convention for choosing one byte whose address serves as the address of the frame. Usually this address is kept in a register called the ",(0,r.kt)("em",{parentName:"p"},"frame pointer register")," (see ",(0,r.kt)("a",{parentName:"p",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Registers.html#Registers"},"$fp"),") while execution is going on in that frame."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) p $fp\n$1 = (void *) 0x7fffffffe210\n")),(0,r.kt)("h3",{id:"2-backtraces"},"2. Backtraces"),(0,r.kt)("p",null,"A backtrace is a summary of how your program got where it is. It shows one line per frame, for many frames, starting with the currently executing frame (frame zero), followed by its caller (frame one), and on up the stack."),(0,r.kt)("p",null,"To print a backtrace of the entire stack, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"backtrace")," command, or its alias ",(0,r.kt)("inlineCode",{parentName:"p"},"bt"),". This command will print one line per frame for frames in the stack. By default, all stack frames are printed. You can stop the backtrace at any time by typing the system interrupt character, normally Ctrl-c."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) bt                                   \n#0  foo (t=10) at a.c:4                    \n#1  0x000055555555468a in main () at a.c:14\n(gdb) bt 1                   \n#0  foo (t=10) at a.c:4      \n(More stack frames follow...)\n")),(0,r.kt)("h3",{id:"3-selecting-a-frame"},"3. Selecting a Frame"),(0,r.kt)("p",null,"Most commands for examining the stack and other data in your program work on whichever stack frame is selected at the moment. Here are the commands for selecting a stack frame; all of them finish by printing a brief description of the stack frame just selected."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"frame [ frame-selection-spec ]")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"f [ frame-selection-spec ]"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) frame 3\n(gdb) frame address stack-address\n")),(0,r.kt)("p",null,"Select the frame with stack address stack-address. The stack-address for a frame can be seen in the output of ",(0,r.kt)("inlineCode",{parentName:"p"},"info frame"),", for example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) info frame\nStack level 1, frame at 0x7fffffffda30:\n rip = 0x40066d in b (amd64-entry-value.cc:59); saved rip 0x4004c5\n tail call frame, caller of frame at 0x7fffffffda30\n source language c++.\n Arglist at unknown address.\n Locals at unknown address, Previous frame's sp is 0x7fffffffda30\n")),(0,r.kt)("p",null,"The stack-address for this frame is ",(0,r.kt)("inlineCode",{parentName:"p"},"0x7fffffffda30")," as indicated by the line:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Stack level 1, frame at 0x7fffffffda30:\n")),(0,r.kt)("h3",{id:"4-information-about-a-frame"},"4. Information About a Frame"),(0,r.kt)("p",null,"There are several other commands to print information about the selected stack frame."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) frame\n(gdb) f\n")),(0,r.kt)("p",null,"When used without any argument, this command does not change which frame is selected, but prints a brief description of the currently selected stack frame. It can be abbreviated ",(0,r.kt)("inlineCode",{parentName:"p"},"f"),". With an argument, this command is used to select a stack frame. See ",(0,r.kt)("a",{parentName:"p",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Selection.html#Selection"},"Selecting a Frame"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) info frame\n(gdb) info f\n")),(0,r.kt)("p",null,"This command prints a verbose description of the selected stack frame, including:the address of the framethe address of the next frame down (called by this frame)the address of the next frame up (caller of this frame)the language in which the source code corresponding to this frame is writtenthe address of the frame\u2019s argumentsthe address of the frame\u2019s local variablesthe program counter saved in it (the address of execution in the caller frame)which registers were saved in the frameThe verbose description is useful when something has gone wrong that has made the stack format fail to fit the usual conventions."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"(gdb) info frame [ frame-selection-spec ]\n(gdb) info f [ frame-selection-spec ]\n")),(0,r.kt)("p",null,"Print a verbose description of the frame selected by frame-selection-spec. The frame-selection-spec is the same as for the ",(0,r.kt)("inlineCode",{parentName:"p"},"frame")," command (see ",(0,r.kt)("a",{parentName:"p",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Selection.html#Selection"},"Selecting a Frame"),"). The selected frame remains unchanged by this command."),(0,r.kt)("h2",{id:"\u56dbexamining-data"},"\u56db\u3001Examining Data"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Data.html#Data"},"Data (Debugging with GDB) (sourceware.org)")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"th",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Expressions.html#Expressions"},"Expressions"),":"),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null},"Expressions"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Ambiguous-Expressions.html#Ambiguous-Expressions"},"Ambiguous Expressions"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Ambiguous Expressions")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Variables.html#Variables"},"Variables"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Program variables")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Arrays.html#Arrays"},"Arrays"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Artificial arrays")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Output-Formats.html#Output-Formats"},"Output Formats"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Output formats")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Memory.html#Memory"},"Memory"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Examining memory")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Memory-Tagging.html#Memory-Tagging"},"Memory Tagging"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Memory Tagging")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Auto-Display.html#Auto-Display"},"Auto Display"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Automatic display")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Print-Settings.html#Print-Settings"},"Print Settings"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Print settings")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Pretty-Printing.html#Pretty-Printing"},"Pretty Printing"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Python pretty printing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Value-History.html#Value-History"},"Value History"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Value history")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Convenience-Vars.html#Convenience-Vars"},"Convenience Vars"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Convenience variables")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Convenience-Funs.html#Convenience-Funs"},"Convenience Funs"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Convenience functions")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Registers.html#Registers"},"Registers"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Registers")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Floating-Point-Hardware.html#Floating-Point-Hardware"},"Floating Point Hardware"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Floating point hardware")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Vector-Unit.html#Vector-Unit"},"Vector Unit"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Vector Unit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/OS-Information.html#OS-Information"},"OS Information"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Auxiliary data provided by operating system")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Memory-Region-Attributes.html#Memory-Region-Attributes"},"Memory Region Attributes"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Memory region attributes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Dump_002fRestore-Files.html#Dump_002fRestore-Files"},"Dump/Restore Files"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Copy between memory and a file")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Core-File-Generation.html#Core-File-Generation"},"Core File Generation"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Cause a program dump its core")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Character-Sets.html#Character-Sets"},"Character Sets"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Debugging programs that use a different character set than GDB does")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Caching-Target-Data.html#Caching-Target-Data"},"Caching Target Data"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Data caching for targets")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Searching-Memory.html#Searching-Memory"},"Searching Memory"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Searching memory for a sequence of bytes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2022 ",(0,r.kt)("a",{parentName:"td",href:"https://sourceware.org/gdb/current/onlinedocs/gdb/Value-Sizes.html#Value-Sizes"},"Value Sizes"),":"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null},"Managing memory allocated for values")))))}m.isMDXComponent=!0}}]);